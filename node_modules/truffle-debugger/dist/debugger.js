(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("Debugger", [], factory);
	else if(typeof exports === 'object')
		exports["Debugger"] = factory();
	else
		root["Debugger"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 37);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = require("debug");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/toConsumableArray");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/defineProperty");

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/slicedToArray");

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/regenerator");

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/object/entries");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.prefixName = prefixName;
exports.keccak256 = keccak256;

var _utils = __webpack_require__(14);

function prefixName(prefix, fn) {
  Object.defineProperty(fn, 'name', {
    value: prefix + "." + fn.name,
    configurable: true
  });

  return fn;
}

/**
 * @return 0x-prefix string of keccak256 hash
 */
function keccak256() {
  return (0, _utils.toHexString)(_utils.keccak256.apply(undefined, arguments));
}

/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/object/assign");

/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = require("reselect-tree");

/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/extends");

/***/ }),
/* 10 */
/***/ (function(module, exports) {

module.exports = require("redux-saga/effects");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _extends2 = __webpack_require__(9);

var _extends3 = _interopRequireDefault(_extends2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _selectors = __webpack_require__(18);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:evm:selectors");

var WORD_SIZE = 0x20;

/**
 * create EVM-level selectors for a given trace step selector
 * may specify additional selectors to include
 */
function createStepSelectors(step) {
  var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

  var base = {
    /**
     * .trace
     *
     * trace step info related to operation
     */
    trace: (0, _reselectTree.createLeaf)([step], function (_ref) {
      var gasCost = _ref.gasCost,
          op = _ref.op,
          pc = _ref.pc;
      return { gasCost: gasCost, op: op, pc: pc };
    }),

    /**
     * .programCounter
     */
    programCounter: (0, _reselectTree.createLeaf)(["./trace"], function (step) {
      return step.pc;
    }),

    /**
     * .isJump
     */
    isJump: (0, _reselectTree.createLeaf)(["./trace"], function (step) {
      return step.op != "JUMPDEST" && step.op.indexOf("JUMP") == 0;
    }),

    /**
     * .isCall
     *
     * whether the opcode will switch to another calling context
     */
    isCall: (0, _reselectTree.createLeaf)(["./trace"], function (step) {
      return step.op == "CALL" || step.op == "DELEGATECALL";
    }),

    /**
     * .isCreate
     */
    isCreate: (0, _reselectTree.createLeaf)(["./trace"], function (step) {
      return step.op == "CREATE";
    }),

    /**
     * .isHalting
     *
     * whether the instruction halts or returns from a calling context
     */
    isHalting: (0, _reselectTree.createLeaf)(["./trace"], function (step) {
      return step.op == "STOP" || step.op == "RETURN";
    })
  };

  if (state) {
    var isRelative = function isRelative(path) {
      return typeof path == "string" && (path.startsWith("./") || path.startsWith("../"));
    };

    if (isRelative(state)) {
      state = "../" + state;
    }

    (0, _assign2.default)(base, {
      /**
       * .callAddress
       *
       * address transferred to by call operation
       */
      callAddress: (0, _reselectTree.createLeaf)(["./isCall", "./trace", state], function (matches, step, _ref2) {
        var stack = _ref2.stack;

        if (!matches) return null;

        var address = stack[stack.length - 2];
        address = "0x" + address.substring(24);
        return address;
      }),

      /**
       * .createBinary
       *
       * binary code to execute via create operation
       */
      createBinary: (0, _reselectTree.createLeaf)(["./isCreate", "./trace", state], function (matches, step, _ref3) {
        var stack = _ref3.stack,
            memory = _ref3.memory;

        if (!matches) return null;

        // Get the code that's going to be created from memory.
        // Note we multiply by 2 because these offsets are in bytes.
        var offset = parseInt(stack[stack.length - 2], 16) * 2;
        var length = parseInt(stack[stack.length - 3], 16) * 2;

        return "0x" + memory.join("").substring(offset, offset + length);
      })
    });
  }

  return base;
}

var evm = (0, _reselectTree.createSelectorTree)({
  /**
   * evm.state
   */
  state: function state(_state) {
    return _state.evm;
  },

  /**
   * evm.info
   */
  info: {
    /**
     * evm.info.contexts
     */
    contexts: (0, _reselectTree.createLeaf)(['/state'], function (state) {
      return state.info.contexts.byContext;
    }),

    /**
     * evm.info.instances
     */
    instances: (0, _reselectTree.createLeaf)(['/state'], function (state) {
      return state.info.instances.byAddress;
    }),

    /**
     * evm.info.binaries
     */
    binaries: {
      _: (0, _reselectTree.createLeaf)(['/state'], function (state) {
        return state.info.contexts.byBinary;
      }),

      /**
       * evm.info.binaries.search
       *
       * returns function (binary) => context
       */
      search: (0, _reselectTree.createLeaf)(['./_'], function (binaries) {
        // HACK ignore link references for search
        // link references come in two forms: with underscores or all zeroes
        // the underscore format is used by Truffle to reference links by name
        // zeroes are used by solc directly, as libraries inject their own
        // address at CREATE-time
        var toRegExp = function toRegExp(binary) {
          return new RegExp("^" + binary.replace(/__.{38}|0{40}/g, ".{40}"));
        };

        var matchers = (0, _entries2.default)(binaries).map(function (_ref4) {
          var _ref5 = (0, _slicedToArray3.default)(_ref4, 2),
              binary = _ref5[0],
              context = _ref5[1].context;

          return {
            context: context,
            regex: toRegExp(binary)
          };
        });

        return function (binary) {
          return matchers.filter(function (_ref6) {
            var context = _ref6.context,
                regex = _ref6.regex;
            return binary.match(regex);
          }).map(function (_ref7) {
            var context = _ref7.context;
            return { context: context };
          })[0] || null;
        };
      })
    }
  },

  /**
   * evm.current
   */
  current: {

    /**
     * evm.current.callstack
     */
    callstack: function callstack(state) {
      return state.evm.proc.callstack;
    },

    /**
     * evm.current.call
     */
    call: (0, _reselectTree.createLeaf)(["./callstack"], function (stack) {
      return stack.length ? stack[stack.length - 1] : {};
    }),

    /**
     * evm.current.context
     */
    context: (0, _reselectTree.createLeaf)(["./call", "/info/instances", "/info/binaries/search", "/info/contexts"], function (_ref8, instances, search, contexts) {
      var address = _ref8.address,
          binary = _ref8.binary;

      var record = void 0;
      if (address) {
        record = instances[address];
        binary = record.binary;
      } else {
        record = search(binary);
      }

      var context = contexts[(record || {}).context];

      return (0, _extends3.default)({}, context, {
        binary: binary
      });
    }),

    /**
     * evm.current.state
     *
     * evm state info: as of last operation, before op defined in step
     */
    state: _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)(["depth", "error", "gas", "memory", "stack", "storage"].map(function (param) {
      return (0, _defineProperty3.default)({}, param, (0, _reselectTree.createLeaf)([_selectors2.default.step], function (step) {
        return step[param];
      }));
    })))),

    /**
     * evm.current.step
     */
    step: createStepSelectors(_selectors2.default.step, "./state")
  },

  /**
   * evm.next
   */
  next: {

    /**
     * evm.next.state
     *
     * evm state as a result of next step operation
     */
    state: _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)(["depth", "error", "gas", "memory", "stack", "storage"].map(function (param) {
      return (0, _defineProperty3.default)({}, param, (0, _reselectTree.createLeaf)([_selectors2.default.next], function (step) {
        return step[param];
      }));
    })))),

    step: createStepSelectors(_selectors2.default.next, "./state")
  }
});

exports.default = evm;

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getIterator2 = __webpack_require__(15);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _extends2 = __webpack_require__(9);

var _extends3 = _interopRequireDefault(_extends2);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _truffleSolidityUtils = __webpack_require__(42);

var _truffleSolidityUtils2 = _interopRequireDefault(_truffleSolidityUtils);

var _truffleCodeUtils = __webpack_require__(43);

var _truffleCodeUtils2 = _interopRequireDefault(_truffleCodeUtils);

var _selectors = __webpack_require__(11);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:solidity:selectors");

function getSourceRange() {
  var instruction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  return {
    start: instruction.start || 0,
    length: instruction.length || 0,
    lines: instruction.range || {
      start: {
        line: 0, column: 0
      },
      end: {
        line: 0, column: 0
      }
    }
  };
}

var solidity = (0, _reselectTree.createSelectorTree)({
  /**
   * solidity.state
   */
  state: function state(_state) {
    return _state.solidity;
  },

  /**
   * solidity.info
   */
  info: {
    /**
     * solidity.info.sources
     */
    sources: (0, _reselectTree.createLeaf)(['/state'], function (state) {
      return state.info.sources.byId;
    }),

    /**
     * solidity.info.sourceMaps
     */
    sourceMaps: (0, _reselectTree.createLeaf)(['/state'], function (state) {
      return state.info.sourceMaps.byContext;
    })
  },

  /**
   * solidity.current
   */
  current: {

    /**
     * solidity.current.sourceMap
     */
    sourceMap: (0, _reselectTree.createLeaf)([_selectors2.default.current.context, "/info/sourceMaps"], function (_ref, sourceMaps) {
      var context = _ref.context;
      return sourceMaps[context] || {};
    }),

    /**
     * solidity.current.functionDepth
     */
    functionDepth: function functionDepth(state) {
      return state.solidity.proc.functionDepth;
    },

    /**
     * solidity.current.instructions
     */
    instructions: (0, _reselectTree.createLeaf)(["/info/sources", _selectors2.default.current.context, "./sourceMap"], function (sources, _ref2, _ref3) {
      var binary = _ref2.binary;
      var sourceMap = _ref3.sourceMap;

      var instructions = _truffleCodeUtils2.default.parseCode(binary);

      if (!sourceMap) {
        // Let's create a source map to use since none exists. This source map
        // maps just as many ranges as there are instructions, and ensures every
        // instruction is marked as "jumping out". This will ensure all
        // available debugger commands step one instruction at a time.
        //
        // This is kindof a hack; perhaps this should be broken out into separate
        // context types. TODO
        sourceMap = "";
        for (var i = 0; i < instructions.length; i++) {
          sourceMap += i + ":" + i + ":1:-1;";
        }
      }

      var lineAndColumnMappings = _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(sources).map(function (_ref4) {
        var _ref5 = (0, _slicedToArray3.default)(_ref4, 2),
            id = _ref5[0],
            source = _ref5[1].source;

        return (0, _defineProperty3.default)({}, id, _truffleSolidityUtils2.default.getCharacterOffsetToLineAndColumnMapping(source || ""));
      }))));
      var humanReadableSourceMap = _truffleSolidityUtils2.default.getHumanReadableSourceMap(sourceMap);

      var primaryFile = humanReadableSourceMap[0].file;
      debug("primaryFile %o", primaryFile);

      return instructions.map(function (instruction, index) {
        // lookup source map by index and add `index` property to
        // instruction
        //

        var sourceMap = humanReadableSourceMap[index] || {};

        return {
          instruction: (0, _extends3.default)({}, instruction, { index: index }),
          sourceMap: sourceMap
        };
      }).map(function (_ref7) {
        var instruction = _ref7.instruction,
            sourceMap = _ref7.sourceMap;

        // add source map information to instruction, or defaults
        //

        var jump = sourceMap.jump,
            _sourceMap$start = sourceMap.start,
            start = _sourceMap$start === undefined ? 0 : _sourceMap$start,
            _sourceMap$length = sourceMap.length,
            length = _sourceMap$length === undefined ? 0 : _sourceMap$length,
            _sourceMap$file = sourceMap.file,
            file = _sourceMap$file === undefined ? primaryFile : _sourceMap$file;

        var lineAndColumnMapping = lineAndColumnMappings[file] || {};
        var range = {
          start: lineAndColumnMapping[start] || { line: null, column: null },
          end: lineAndColumnMapping[start + length] || { line: null, column: null }
        };

        if (range.start.line === null) {
          debug("sourceMap %o", sourceMap);
        }

        return (0, _extends3.default)({}, instruction, {

          jump: jump,
          start: start,
          length: length,
          file: file,
          range: range
        });
      });
    }),

    /**
     * solidity.current.instructionAtProgramCounter
     */
    instructionAtProgramCounter: (0, _reselectTree.createLeaf)(["./instructions"], function (instructions) {
      var map = [];
      instructions.forEach(function (instruction) {
        map[instruction.pc] = instruction;
      });

      // fill in gaps in map by defaulting to the last known instruction
      var lastSeen = null;
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = (0, _getIterator3.default)(map.entries()), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _ref8 = _step.value;

          var _ref9 = (0, _slicedToArray3.default)(_ref8, 2);

          var pc = _ref9[0];
          var instruction = _ref9[1];

          if (instruction) {
            lastSeen = instruction;
          } else {
            map[pc] = lastSeen;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return map;
    }),

    /**
     * solidity.current.instruction
     */
    instruction: (0, _reselectTree.createLeaf)(["./instructionAtProgramCounter", _selectors2.default.current.step.programCounter], function (map, pc) {
      return map[pc] || {};
    }),

    /**
     * solidity.current.source
     */
    source: (0, _reselectTree.createLeaf)(["/info/sources", "./instruction"], function (sources, _ref10) {
      var id = _ref10.file;
      return sources[id] || {};
    }),

    /**
     * solidity.current.sourceRange
     */
    sourceRange: (0, _reselectTree.createLeaf)(["./instruction"], getSourceRange),

    /**
     * solidity.current.isSourceRangeFinal
     */
    isSourceRangeFinal: (0, _reselectTree.createLeaf)(["./instructionAtProgramCounter", _selectors2.default.current.step.programCounter, _selectors2.default.next.step.programCounter], function (map, current, next) {
      if (!map[next]) {
        return true;
      }

      current = map[current];
      next = map[next];

      return current.start != next.start || current.length != next.length || current.file != next.file;
    }),

    /**
     * solidity.current.isMultiline
     */
    isMultiline: (0, _reselectTree.createLeaf)(["./sourceRange"], function (_ref11) {
      var lines = _ref11.lines;
      return lines.start.line != lines.end.line;
    }),

    /**
     * solidity.current.willJump
     */
    willJump: (0, _reselectTree.createLeaf)([_selectors2.default.current.step.isJump], function (isJump) {
      return isJump;
    }),

    /**
     * solidity.current.jumpDirection
     */
    jumpDirection: (0, _reselectTree.createLeaf)(["./instruction"], function () {
      var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return i.jump || "-";
    })
  }
});

exports.default = solidity;

/***/ }),
/* 13 */
/***/ (function(module, exports) {

module.exports = require("redux");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MAX_WORD = exports.WORD_SIZE = undefined;

var _getIterator2 = __webpack_require__(15);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _typeof2 = __webpack_require__(27);

var _typeof3 = _interopRequireDefault(_typeof2);

exports.cleanBigNumbers = cleanBigNumbers;
exports.typeIdentifier = typeIdentifier;
exports.typeClass = typeClass;
exports.allocateDeclarations = allocateDeclarations;
exports.specifiedSize = specifiedSize;
exports.storageSize = storageSize;
exports.isReference = isReference;
exports.referenceType = referenceType;
exports.baseDefinition = baseDefinition;
exports.toBigNumber = toBigNumber;
exports.toSignedBigNumber = toSignedBigNumber;
exports.toHexString = toHexString;
exports.toBytes = toBytes;
exports.keccak256 = keccak256;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _bignumber = __webpack_require__(19);

var _web = __webpack_require__(30);

var _web2 = _interopRequireDefault(_web);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:decode:utils");

var WORD_SIZE = exports.WORD_SIZE = 0x20;
var MAX_WORD = exports.MAX_WORD = new _bignumber.BigNumber(2).pow(256).minus(1);

/**
 * recursively converts big numbers into something nicer to look at
 */
function cleanBigNumbers(value) {
  if (_bignumber.BigNumber.isBigNumber(value)) {
    return value.toNumber();
  } else if (value && value.map != undefined) {
    return value.map(function (inner) {
      return cleanBigNumbers(inner);
    });
  } else if (value && (typeof value === "undefined" ? "undefined" : (0, _typeof3.default)(value)) == "object") {
    return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(value).map(function (_ref) {
      var _ref2 = (0, _slicedToArray3.default)(_ref, 2),
          key = _ref2[0],
          inner = _ref2[1];

      return (0, _defineProperty3.default)({}, key, cleanBigNumbers(inner));
    }))));
  } else {
    return value;
  }
}

function typeIdentifier(definition) {
  return definition.typeDescriptions.typeIdentifier;
}

/**
 * returns basic type class for a variable definition node
 * e.g.:
 *  `t_uint256` becomes `uint`
 *  `t_struct$_Thing_$20_memory_ptr` becomes `struct`
 */
function typeClass(definition) {
  return typeIdentifier(definition).match(/t_([^$_0-9]+)/)[1];
}

/**
 * Allocate storage for given variable declarations
 *
 * Postcondition: starts a new slot and occupies whole slots
 */
function allocateDeclarations(declarations, refs) {
  var slot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var index = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : WORD_SIZE - 1;
  var path = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];

  if (index < WORD_SIZE - 1) {
    // starts a new slot
    slot++;
    index = WORD_SIZE - 1;
  }

  var parentFrom = { slot: slot, index: 0 };
  var parentTo = { slot: slot, index: WORD_SIZE - 1 };
  var mapping = {};

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = (0, _getIterator3.default)(declarations), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var declaration = _step.value;

      var _allocateDeclaration = allocateDeclaration(declaration, refs, slot, index),
          from = _allocateDeclaration.from,
          to = _allocateDeclaration.to,
          next = _allocateDeclaration.next,
          children = _allocateDeclaration.children;

      mapping[declaration.id] = { from: from, to: to, name: declaration.name };
      if (children !== undefined) {
        mapping[declaration.id].children = children;
      }

      slot = next.slot;
      index = next.index;

      parentTo = { slot: to.slot, index: WORD_SIZE - 1 };
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  if (index < WORD_SIZE - 1) {
    slot++;
    index = WORD_SIZE - 1;
  }

  return {
    from: parentFrom,
    to: parentTo,
    next: { slot: slot, index: index },
    children: mapping
  };
}

function allocateValue(slot, index, bytes) {
  var from = index - bytes + 1 >= 0 ? { slot: slot, index: index - bytes + 1 } : { slot: slot + 1, index: WORD_SIZE - bytes };

  var to = { slot: from.slot, index: from.index + bytes - 1 };

  var next = from.index == 0 ? { slot: from.slot + 1, index: WORD_SIZE - 1 } : { slot: from.slot, index: from.index - 1 };

  return { from: from, to: to, next: next };
}

function allocateDeclaration(declaration, refs, slot, index) {
  var definition = refs[declaration.id].definition;
  var byteSize = storageSize(definition); // yum

  if (typeClass(definition) != "struct") {
    return allocateValue(slot, index, byteSize);
  }

  var struct = refs[definition.typeName.referencedDeclaration];
  debug("struct: %O", struct);

  var result = allocateDeclarations(struct.variables || [], refs, slot, index);
  debug("struct result %o", result);
  return result;
}

/**
 * e.g. uint48 -> 6
 * @return size in bytes for explicit type size, or `null` if not stated
 */
function specifiedSize(definition) {
  var specified = typeIdentifier(definition).match(/t_[a-z]+([0-9]+)/);

  if (!specified) {
    return null;
  }

  var num = specified[1];

  switch (typeClass(definition)) {
    case "int":
    case "uint":
      return num / 8;

    case "bytes":
      return num;

    default:
      debug("Unknown type for size specification: %s", typeIdentifier(definition));
  }
}

function storageSize(definition) {
  switch (typeClass(definition)) {
    case "bool":
      return 1;

    case "address":
      return 20;

    case "int":
    case "uint":
      // is this a HACK? ("256" / 8)
      return typeIdentifier(definition).match(/t_[a-z]+([0-9]+)/)[1] / 8;

    case "string":
    case "bytes":
    case "array":
      return WORD_SIZE;
  }
}

function isReference(definition) {
  return typeIdentifier(definition).match(/_(memory|storage)(_ptr)?$/) != null;
}

function referenceType(definition) {
  return typeIdentifier(definition).match(/_([^_]+)(_ptr)?$/)[1];
}

function baseDefinition(definition) {
  var baseIdentifier = typeIdentifier(definition)
  // first dollar sign     last dollar sign
  //   `---------.       ,---'
  .match(/^[^$]+\$_(.+)_\$[^$]+$/)[1];
  //              `----' greedy match

  // HACK - internal types for memory or storage also seem to be pointers
  if (baseIdentifier.match(/_(memory|storage)$/) != null) {
    baseIdentifier = baseIdentifier + "_ptr";
  }

  // another HACK - we get away with it becausewe're only using that one property
  return {
    typeDescriptions: {
      typeIdentifier: baseIdentifier
    }
  };
}

function toBigNumber(bytes) {
  if (bytes == undefined) {
    return undefined;
  } else if (typeof bytes == "string") {
    return new _bignumber.BigNumber(bytes, 16);
  } else if (typeof bytes == "number" || _bignumber.BigNumber.isBigNumber(bytes)) {
    return new _bignumber.BigNumber(bytes);
  } else if (bytes.reduce) {
    return bytes.reduce(function (num, byte) {
      return num.times(0x100).plus(byte);
    }, new _bignumber.BigNumber(0));
  }
}

function toSignedBigNumber(bytes) {
  if (bytes[0] < 128) {
    // first bit is 0
    return toBigNumber(bytes);
  } else {
    return toBigNumber(bytes.map(function (b) {
      return 0xff - b;
    })).plus(1).negated();
  }
}

/**
 * @param bytes - Uint8Array
 * @param length - desired byte length (pad with zeroes)
 * @param trim - omit leading zeroes
 */
function toHexString(bytes) {
  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var trim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  if (typeof length == "boolean") {
    trim = length;
    length = 0;
  }

  if (_bignumber.BigNumber.isBigNumber(bytes)) {
    bytes = toBytes(bytes);
  }

  var pad = function pad(s) {
    return "" + "00".slice(0, 2 - s.length) + s;
  };

  //                                          0  1  2  3  4
  //                                 0  1  2  3  4  5  6  7
  // bytes.length:        5  -  0x(          e5 c2 aa 09 11 )
  // length (preferred):  8  -  0x( 00 00 00 e5 c2 aa 09 11 )
  //                                `--.---'
  //                                     offset 3
  if (bytes.length < length) {
    var prior = bytes;
    bytes = new Uint8Array(length);

    bytes.set(prior, length - prior.length);
  }

  debug("bytes: %o", bytes);

  var string = bytes.reduce(function (str, byte) {
    return "" + str + pad(byte.toString(16));
  }, "");

  if (trim) {
    string = string.replace(/^(00)+/, "");
  }

  if (string.length == 0) {
    string = "00";
  }

  return "0x" + string;
}

function toBytes(number) {
  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

  if (number < 0) {
    return [];
  }

  var hex = number.toString(16);
  if (hex.length % 2 == 1) {
    hex = "0" + hex;
  }

  var bytes = new Uint8Array(hex.match(/.{2}/g).map(function (byte) {
    return parseInt(byte, 16);
  }));

  if (bytes.length < length) {
    var prior = bytes;
    bytes = new Uint8Array(length);
    bytes.set(prior, length - prior.length);
  }

  return bytes;
}

function keccak256() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  var web3 = new _web2.default();

  args = args.map(function (arg) {
    if (typeof arg == "number" || _bignumber.BigNumber.isBigNumber(arg)) {
      return toHexString(toBytes(arg, WORD_SIZE)).slice(2);
    } else if (typeof arg == "string") {
      return web3.toHex(arg).slice(2);
    } else {
      return "";
    }
  });

  var sha = web3.sha3(args.join(''), { encoding: 'hex' });
  debug("sha %o", sha);
  return toBigNumber(sha);
}

/***/ }),
/* 15 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/get-iterator");

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _jsonPointer = __webpack_require__(22);

var _jsonPointer2 = _interopRequireDefault(_jsonPointer);

var _selectors = __webpack_require__(12);

var _selectors2 = _interopRequireDefault(_selectors);

var _map = __webpack_require__(44);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:ast:selectors");

/**
 * ast
 */
var ast = (0, _reselectTree.createSelectorTree)({
  /**
   * ast.views
   */
  views: {
    /**
     * ast.views.sources
     */
    sources: (0, _reselectTree.createLeaf)([_selectors2.default.info.sources], function (sources) {
      return sources;
    })
  },

  /**
   * ast.current
   */
  current: {

    /**
     * ast.current.tree
     *
     * ast for current source
     */
    tree: (0, _reselectTree.createLeaf)([_selectors2.default.current.source], function (_ref) {
      var ast = _ref.ast;
      return ast;
    }),

    /**
     * ast.current.index
     *
     * source ID
     */
    index: (0, _reselectTree.createLeaf)([_selectors2.default.current.source], function (_ref2) {
      var id = _ref2.id;
      return id;
    }),

    /**
     * ast.current.pointer
     *
     * jsonpointer for current ast node
     */
    pointer: (0, _reselectTree.createLeaf)(["./tree", _selectors2.default.current.sourceRange], function (ast, range) {
      return (0, _map.findRange)(ast, range.start, range.length);
    }),

    /**
     * ast.current.node
     *
     * current ast node to execute
     */
    node: (0, _reselectTree.createLeaf)(["./tree", "./pointer"], function (ast, pointer) {
      return pointer ? _jsonPointer2.default.get(ast, pointer) : _jsonPointer2.default.get(ast, "");
    })

  }
});

exports.default = ast;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.saveSteps = saveSteps;
exports.receiveAddresses = receiveAddresses;
exports.next = next;
exports.tick = tick;
exports.tock = tock;
exports.endTrace = endTrace;
var SAVE_STEPS = exports.SAVE_STEPS = "SAVE_STEPS";
function saveSteps(steps) {
  return {
    type: SAVE_STEPS,
    steps: steps
  };
}

var RECEIVE_ADDRESSES = exports.RECEIVE_ADDRESSES = "RECEIVE_ADDRESSES";
function receiveAddresses(addresses) {
  return {
    type: RECEIVE_ADDRESSES,
    addresses: addresses
  };
}

var NEXT = exports.NEXT = "NEXT";
function next() {
  return { type: NEXT };
}

var TICK = exports.TICK = "TICK";
function tick() {
  return { type: TICK };
}

var TOCK = exports.TOCK = "TOCK";
function tock() {
  return { type: TOCK };
}

var END_OF_TRACE = exports.END_OF_TRACE = "EOT";
function endTrace() {
  return { type: END_OF_TRACE };
}

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _reselectTree = __webpack_require__(8);

var trace = (0, _reselectTree.createSelectorTree)({
  /**
   * trace.index
   *
   * current step index
   */
  index: function index(state) {
    return state.trace.proc.index;
  },

  /**
   * trace.steps
   *
   * all trace steps
   */
  steps: function steps(state) {
    return state.trace.info.steps;
  },

  /**
   * trace.stepsRemaining
   *
   * number of steps remaining in trace
   */
  stepsRemaining: (0, _reselectTree.createLeaf)(["./steps", "./index"], function (steps, index) {
    return steps.length - index;
  }),

  /**
   * trace.step
   *
   * current trace step
   */
  step: (0, _reselectTree.createLeaf)(["./steps", "./index"], function (steps, index) {
    return steps[index];
  }),

  /**
   * trace.next
   *
   * next trace step or {}
   */
  next: (0, _reselectTree.createLeaf)(["./steps", "./index"], function (steps, index) {
    return index < steps.length - 1 ? steps[index + 1] : {};
  })
});

exports.default = trace;

/***/ }),
/* 19 */
/***/ (function(module, exports) {

module.exports = require("bignumber.js");

/***/ }),
/* 20 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/classCallCheck");

/***/ }),
/* 21 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/createClass");

/***/ }),
/* 22 */
/***/ (function(module, exports) {

module.exports = require("json-pointer");

/***/ }),
/* 23 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/object/keys");

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.start = start;
exports.ready = ready;
exports.error = error;
exports.finish = finish;
exports.recordContracts = recordContracts;
var START = exports.START = "SESSION_START";
function start(txHash, provider) {
  return {
    type: START,
    txHash: txHash, provider: provider
  };
}

var READY = exports.READY = "SESSION_READY";
function ready() {
  return {
    type: READY
  };
}

var ERROR = exports.ERROR = "SESSION_ERROR";
function error(error) {
  return {
    type: ERROR,
    error: error
  };
}

var FINISH = exports.FINISH = "SESSION_FINISH";
function finish() {
  return {
    type: FINISH
  };
}

var RECORD_CONTRACTS = exports.RECORD_CONTRACTS = "RECORD_CONTRACTS";
function recordContracts(contexts, sources) {
  return {
    type: RECORD_CONTRACTS,
    contexts: contexts, sources: sources
  };
}

/***/ }),
/* 25 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/set");

/***/ }),
/* 26 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/asyncToGenerator");

/***/ }),
/* 27 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/helpers/typeof");

/***/ }),
/* 28 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/promise");

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.beginStep = beginStep;
exports.advance = advance;
exports.stepNext = stepNext;
exports.stepOver = stepOver;
exports.stepInto = stepInto;
exports.stepOut = stepOut;
exports.interrupt = interrupt;
exports.continueUntil = continueUntil;
var BEGIN_STEP = exports.BEGIN_STEP = "BEGIN_STEP";
function beginStep(type) {
  return {
    type: BEGIN_STEP,
    stepType: type
  };
}

var ADVANCE = exports.ADVANCE = "ADVANCE";
function advance() {
  return { type: ADVANCE };
}

var STEP_NEXT = exports.STEP_NEXT = "STEP_NEXT";
function stepNext() {
  return { type: STEP_NEXT };
}

var STEP_OVER = exports.STEP_OVER = "STEP_OVER";
function stepOver() {
  return { type: STEP_OVER };
}

var STEP_INTO = exports.STEP_INTO = "STEP_INTO";
function stepInto() {
  return { type: STEP_INTO };
}

var STEP_OUT = exports.STEP_OUT = "STEP_OUT";
function stepOut() {
  return { type: STEP_OUT };
}

var INTERRUPT = exports.INTERRUPT = "INTERRUPT";
function interrupt() {
  return { type: INTERRUPT };
}

var CONTINUE_UNTIL = exports.CONTINUE_UNTIL = "CONTINUE_UNTIL";
function continueUntil() {
  for (var _len = arguments.length, breakpoints = Array(_len), _key = 0; _key < _len; _key++) {
    breakpoints[_key] = arguments[_key];
  }

  return {
    type: CONTINUE_UNTIL,
    breakpoints: breakpoints
  };
}

/***/ }),
/* 30 */
/***/ (function(module, exports) {

module.exports = require("web3");

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.scope = scope;
exports.declare = declare;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _jsonPointer = __webpack_require__(22);

var _jsonPointer2 = _interopRequireDefault(_jsonPointer);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(17);

var _actions2 = __webpack_require__(32);

var actions = _interopRequireWildcard(_actions2);

var _selectors = __webpack_require__(33);

var _selectors2 = _interopRequireDefault(_selectors);

var _utils = __webpack_require__(14);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(scope),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(declare),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(tickSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:data:sagas");

function scope(nodeId, pointer, parentId, sourceId) {
  return _regenerator2.default.wrap(function scope$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, _effects.put)(actions.scope(nodeId, pointer, parentId, sourceId));

        case 2:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

function declare(node) {
  return _regenerator2.default.wrap(function declare$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return (0, _effects.put)(actions.declare(node));

        case 2:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function tickSaga() {
  var _ref, tree, treeId, node, pointer, scopes, definitions, stack, top, parameters, returnParameters, assignments, storageVars, _storageVars, slot, index, allocation;

  return _regenerator2.default.wrap(function tickSaga$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          _context3.next = 2;
          return (0, _effects.select)(_selectors2.default.views.ast);

        case 2:
          _ref = _context3.sent;
          tree = _ref.tree;
          treeId = _ref.id;
          node = _ref.node;
          pointer = _ref.pointer;
          _context3.next = 9;
          return (0, _effects.select)(_selectors2.default.info.scopes);

        case 9:
          scopes = _context3.sent;
          _context3.next = 12;
          return (0, _effects.select)(_selectors2.default.views.scopes.inlined);

        case 12:
          definitions = _context3.sent;
          _context3.next = 15;
          return (0, _effects.select)(_selectors2.default.next.state.stack);

        case 15:
          stack = _context3.sent;

          if (stack) {
            _context3.next = 18;
            break;
          }

          return _context3.abrupt("return");

        case 18:
          top = stack.length - 1;

          if (node) {
            _context3.next = 21;
            break;
          }

          return _context3.abrupt("return");

        case 21:
          _context3.t0 = node.nodeType;
          _context3.next = _context3.t0 === "FunctionDefinition" ? 24 : _context3.t0 === "ContractDefinition" ? 34 : _context3.t0 === "VariableDeclaration" ? 44 : 46;
          break;

        case 24:
          _context3.next = 26;
          return (0, _effects.select)(_selectors2.default.views.atLastInstructionForSourceRange);

        case 26:
          if (_context3.sent) {
            _context3.next = 28;
            break;
          }

          return _context3.abrupt("break", 47);

        case 28:

          parameters = node.parameters.parameters.map(function (p, i) {
            return pointer + "/parameters/parameters/" + i;
          });

          returnParameters = node.returnParameters.parameters.map(function (p, i) {
            return pointer + "/returnParameters/parameters/" + i;
          });

          assignments = returnParameters.concat(parameters).reverse().map(function (pointer) {
            return _jsonPointer2.default.get(tree, pointer).id;
          }).map(function (id, i) {
            return (0, _defineProperty3.default)({}, id, { "stack": top - i });
          }).reduce(function (acc, assignment) {
            return (0, _assign2.default)(acc, assignment);
          }, {});

          _context3.next = 33;
          return (0, _effects.put)(actions.assign(treeId, assignments));

        case 33:
          return _context3.abrupt("break", 47);

        case 34:
          _storageVars = scopes[node.id].variables || [];
          slot = 0;
          index = _utils.WORD_SIZE - 1; // cause lower-order

          debug("storage vars %o", _storageVars);

          allocation = utils.allocateDeclarations(_storageVars, definitions);

          assignments = _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(allocation.children).map(function (_ref3) {
            var _ref4 = (0, _slicedToArray3.default)(_ref3, 2),
                id = _ref4[0],
                storage = _ref4[1];

            return (0, _defineProperty3.default)({}, id, { storage: storage });
          }))));
          debug("assignments %O", assignments);

          _context3.next = 43;
          return (0, _effects.put)(actions.assign(treeId, assignments));

        case 43:
          return _context3.abrupt("break", 47);

        case 44:
          _context3.next = 46;
          return (0, _effects.put)(actions.assign(treeId, (0, _defineProperty3.default)({}, _jsonPointer2.default.get(tree, pointer).id, { "stack": top })));

        case 46:
          return _context3.abrupt("break", 47);

        case 47:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function saga() {
  return _regenerator2.default.wrap(function saga$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.takeEvery)(_actions.TICK, /*#__PURE__*/_regenerator2.default.mark(function _callee() {
            return _regenerator2.default.wrap(function _callee$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    _context4.prev = 0;
                    return _context4.delegateYield(tickSaga(), "t0", 2);

                  case 2:
                    _context4.next = 7;
                    break;

                  case 4:
                    _context4.prev = 4;
                    _context4.t1 = _context4["catch"](0);

                    debug(_context4.t1);

                  case 7:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee, this, [[0, 4]]);
          }));

        case 2:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked4, this);
}

exports.default = (0, _helpers.prefixName)("data", saga);

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.scope = scope;
exports.declare = declare;
exports.assign = assign;
var SCOPE = exports.SCOPE = "SCOPE";
function scope(id, pointer, parentId, sourceId) {
  return {
    type: SCOPE,
    id: id, pointer: pointer, parentId: parentId, sourceId: sourceId
  };
}

var DECLARE = exports.DECLARE = "DECLARE_VARIABLE";
function declare(node) {
  return {
    type: DECLARE,
    node: node
  };
}

var ASSIGN = exports.ASSIGN = "ASSIGN";
function assign(context, assignments) {
  return {
    type: ASSIGN,
    context: context, assignments: assignments
  };
}

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = __webpack_require__(9);

var _extends3 = _interopRequireDefault(_extends2);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _jsonPointer = __webpack_require__(22);

var _jsonPointer2 = _interopRequireDefault(_jsonPointer);

var _selectors = __webpack_require__(16);

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__(11);

var _selectors4 = _interopRequireDefault(_selectors3);

var _selectors5 = __webpack_require__(12);

var _selectors6 = _interopRequireDefault(_selectors5);

var _decode = __webpack_require__(53);

var _decode2 = _interopRequireDefault(_decode);

var _utils = __webpack_require__(14);

var decodeUtils = _interopRequireWildcard(_utils);

var _bignumber = __webpack_require__(19);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:selectors");

function createStateSelectors(_ref) {
  var stack = _ref.stack,
      memory = _ref.memory,
      storage = _ref.storage;

  return {
    /**
     * .stack
     */
    stack: (0, _reselectTree.createLeaf)([stack], function (words) {
      return (words || []).map(function (word) {
        return decodeUtils.toBytes(decodeUtils.toBigNumber(word, decodeUtils.WORD_SIZE));
      });
    }),

    /**
     * .memory
     */
    memory: (0, _reselectTree.createLeaf)([memory], function (words) {
      return new Uint8Array((words.join("").match(/.{1,2}/g) || []).map(function (byte) {
        return parseInt(byte, 16);
      }));
    }),

    /**
     * .storage
     */
    storage: (0, _reselectTree.createLeaf)([storage], function (mapping) {
      return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(mapping).map(function (_ref2) {
        var _ref3 = (0, _slicedToArray3.default)(_ref2, 2),
            address = _ref3[0],
            word = _ref3[1];

        return (0, _defineProperty3.default)({}, "0x" + address, new Uint8Array((word.match(/.{1,2}/g) || []).map(function (byte) {
          return parseInt(byte, 16);
        })));
      }))));
    })
  };
}

var data = (0, _reselectTree.createSelectorTree)({
  state: function state(_state) {
    return _state.data;
  },

  /**
   * data.views
   */
  views: {
    ast: (0, _reselectTree.createLeaf)([_selectors2.default.current], function (tree) {
      return tree;
    }),

    atLastInstructionForSourceRange: (0, _reselectTree.createLeaf)([_selectors6.default.current.isSourceRangeFinal], function (final) {
      return final;
    }),

    /**
     * data.views.scopes
     */
    scopes: {

      /**
       * data.views.scopes.inlined
       */
      inlined: (0, _reselectTree.createLeaf)(["/info/scopes", _selectors6.default.info.sources], function (scopes, sources) {
        return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(scopes).map(function (_ref5) {
          var _ref6 = (0, _slicedToArray3.default)(_ref5, 2),
              id = _ref6[0],
              entry = _ref6[1];

          return (0, _defineProperty3.default)({}, id, (0, _extends3.default)({}, entry, {

            definition: _jsonPointer2.default.get(sources[entry.sourceId].ast, entry.pointer)
          }));
        }))));
      })
    },

    /**
     * data.views.decoder
     *
     * selector returns (ast node definition, data reference) => value
     */
    decoder: (0, _reselectTree.createLeaf)(["/views/scopes/inlined", "/current/state"], function (scopes, state) {
      return function (definition, ref) {
        return (0, _decode2.default)(definition, ref, state, scopes);
      };
    })
  },

  /**
   * data.info
   */
  info: {

    /**
     * data.info.scopes
     */
    scopes: (0, _reselectTree.createLeaf)(["/state"], function (state) {
      return state.info.scopes.byId;
    })
  },

  /**
   * data.proc
   */
  proc: {

    /**
     * data.proc.assignments
     */
    assignments: (0, _reselectTree.createLeaf)(["/state"], function (state) {
      return state.proc.assignments.byId;
    })
  },

  /**
   * data.current
   */
  current: {
    /**
     *
     * data.current.scope
     */
    scope: {

      /**
       * data.current.scope.id
       */
      id: (0, _reselectTree.createLeaf)([_selectors2.default.current.node], function (node) {
        return node.id;
      })
    },

    /**
     * data.current.state
     */
    state: createStateSelectors(_selectors4.default.current.state),

    /**
     * data.current.identifiers (namespace)
     */
    identifiers: {

      /**
       * data.current.identifiers (selector)
       *
       * returns identifers and corresponding definition node ID
       */
      _: (0, _reselectTree.createLeaf)(["/views/scopes/inlined", "/current/scope"], function (scopes, scope) {
        var cur = scope.id;
        var variables = {};

        do {
          variables = _assign2.default.apply(Object, [variables].concat((0, _toConsumableArray3.default)((scopes[cur].variables || []).filter(function (v) {
            return variables[v.name] == undefined;
          }).map(function (v) {
            return (0, _defineProperty3.default)({}, v.name, v.id);
          }))));

          cur = scopes[cur].parentId;
        } while (cur != null);

        return variables;
      }),

      /**
       * data.current.identifiers.definitions
       *
       * current variable definitions
       */
      definitions: (0, _reselectTree.createLeaf)(["/views/scopes/inlined", "./_"], function (scopes, identifiers) {
        return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(identifiers).map(function (_ref9) {
          var _ref10 = (0, _slicedToArray3.default)(_ref9, 2),
              identifier = _ref10[0],
              id = _ref10[1];

          var definition = scopes[id].definition;


          return (0, _defineProperty3.default)({}, identifier, definition);
        }))));
      }),

      /**
       * data.current.identifiers.refs
       *
       * current variables' value refs
       */
      refs: (0, _reselectTree.createLeaf)(["/proc/assignments", "./_"], function (assignments, identifiers) {
        return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(identifiers).map(function (_ref12) {
          var _ref13 = (0, _slicedToArray3.default)(_ref12, 2),
              identifier = _ref13[0],
              id = _ref13[1];

          var _ref14 = assignments[id] || {},
              ref = _ref14.ref;

          if (!ref) {
            return undefined;
          };

          return (0, _defineProperty3.default)({}, identifier, ref);
        }))));
      }),

      decoded: (0, _reselectTree.createLeaf)(["/views/decoder", "./definitions", "./refs"], function (decode, definitions, refs) {
        return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(refs).map(function (_ref16) {
          var _ref17 = (0, _slicedToArray3.default)(_ref16, 2),
              identifier = _ref17[0],
              ref = _ref17[1];

          return (0, _defineProperty3.default)({}, identifier, decode(definitions[identifier], ref));
        }))));
      }),

      native: (0, _reselectTree.createLeaf)(['./decoded'], decodeUtils.cleanBigNumbers)
    }
  },

  /**
   * data.next
   */
  next: {

    /**
     * data.next.state
     */
    state: createStateSelectors(_selectors4.default.next.state)
  }
});

exports.default = data;

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _set = __webpack_require__(25);

var _set2 = _interopRequireDefault(_set);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

exports.advance = advance;
exports.wait = wait;
exports.processTrace = processTrace;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(17);

var actions = _interopRequireWildcard(_actions);

var _selectors = __webpack_require__(18);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(waitForTrace),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(advance),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(next),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(wait),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(processTrace),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:trace:sagas");

function waitForTrace() {
  var _ref, steps, addresses;

  return _regenerator2.default.wrap(function waitForTrace$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, _effects.take)(actions.SAVE_STEPS);

        case 2:
          _ref = _context.sent;
          steps = _ref.steps;
          addresses = [].concat((0, _toConsumableArray3.default)(new _set2.default(steps.filter(function (_ref2) {
            var op = _ref2.op;
            return op == "CALL" || op == "DELEGATECALL";
          }).map(function (_ref3) {
            var stack = _ref3.stack;
            return "0x" + stack[stack.length - 2].substring(24);
          }))));
          _context.next = 7;
          return (0, _effects.put)(actions.receiveAddresses(addresses));

        case 7:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

function advance() {
  return _regenerator2.default.wrap(function advance$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return (0, _effects.put)(actions.next());

        case 2:
          _context2.next = 4;
          return (0, _effects.take)(actions.TOCK);

        case 4:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function next() {
  var remaining, steps;
  return _regenerator2.default.wrap(function next$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          _context3.next = 2;
          return (0, _effects.select)(_selectors2.default.stepsRemaining);

        case 2:
          remaining = _context3.sent;

          debug("remaining: %o", remaining);
          _context3.next = 6;
          return (0, _effects.select)(_selectors2.default.steps);

        case 6:
          steps = _context3.sent;

          debug("total steps: %o", steps.length);

          if (!(remaining > 0)) {
            _context3.next = 14;
            break;
          }

          debug("putting TICK");
          // updates state for current step
          _context3.next = 12;
          return (0, _effects.put)(actions.tick());

        case 12:
          debug("put TICK");

          remaining--; // local update, just for convenience

        case 14:
          if (!remaining) {
            _context3.next = 21;
            break;
          }

          debug("putting TOCK");
          // updates step to next step in trace
          _context3.next = 18;
          return (0, _effects.put)(actions.tock());

        case 18:
          debug("put TOCK");

          _context3.next = 23;
          break;

        case 21:
          _context3.next = 23;
          return (0, _effects.put)(actions.endTrace());

        case 23:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function wait() {
  return _regenerator2.default.wrap(function wait$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return (0, _effects.take)(actions.END_OF_TRACE);

        case 2:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

function processTrace(trace) {
  var _ref4, addresses;

  return _regenerator2.default.wrap(function processTrace$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.put)(actions.saveSteps(trace));

        case 2:
          _context5.next = 4;
          return (0, _effects.take)(actions.RECEIVE_ADDRESSES);

        case 4:
          _ref4 = _context5.sent;
          addresses = _ref4.addresses;

          debug("received addresses");

          return _context5.abrupt("return", addresses);

        case 8:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this);
}

function saga() {
  return _regenerator2.default.wrap(function saga$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          return _context6.delegateYield(waitForTrace(), "t0", 1);

        case 1:
          _context6.next = 3;
          return (0, _effects.takeEvery)(actions.NEXT, next);

        case 3:
        case "end":
          return _context6.stop();
      }
    }
  }, _marked6, this);
}

exports.default = (0, _helpers.prefixName)("trace", saga);

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addSource = addSource;
exports.addSourceMap = addSourceMap;
exports.jump = jump;
var ADD_SOURCE = exports.ADD_SOURCE = "SOLIDITY_ADD_SOURCE";
function addSource(source, sourcePath, ast) {
  return {
    type: ADD_SOURCE,
    source: source, sourcePath: sourcePath, ast: ast
  };
}

var ADD_SOURCEMAP = exports.ADD_SOURCEMAP = "SOLIDITY_ADD_SOURCEMAP";
function addSourceMap(binary, sourceMap) {
  return {
    type: ADD_SOURCEMAP,
    binary: binary, sourceMap: sourceMap
  };
}

var JUMP = exports.JUMP = "JUMP";
function jump(jumpDirection) {
  return {
    type: JUMP,
    jumpDirection: jumpDirection
  };
}

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addContext = addContext;
exports.addInstance = addInstance;
exports.call = call;
exports.create = create;
exports.returnCall = returnCall;
var ADD_CONTEXT = exports.ADD_CONTEXT = "EVM_ADD_CONTEXT";
function addContext(contractName, binary) {
  return {
    type: ADD_CONTEXT,
    contractName: contractName, binary: binary
  };
}

var ADD_INSTANCE = exports.ADD_INSTANCE = "EVM_ADD_INSTANCE";
function addInstance(address, context, binary) {
  return {
    type: ADD_INSTANCE,
    address: address, context: context, binary: binary
  };
}

var CALL = exports.CALL = "CALL";
function call(address) {
  return {
    type: CALL,
    address: address
  };
}

var CREATE = exports.CREATE = "CREATE";
function create(binary) {
  return {
    type: CREATE,
    binary: binary
  };
}

var RETURN = exports.RETURN = "RETURN";
function returnCall() {
  return {
    type: RETURN
  };
}

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

var Debugger = __webpack_require__(38).default;

module.exports = Debugger;



/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(26);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = __webpack_require__(20);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(21);

var _createClass3 = _interopRequireDefault(_createClass2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _truffleExpect = __webpack_require__(39);

var _truffleExpect2 = _interopRequireDefault(_truffleExpect);

var _session = __webpack_require__(40);

var _session2 = _interopRequireDefault(_session);

var _reselectTree = __webpack_require__(8);

var _selectors = __webpack_require__(33);

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__(16);

var _selectors4 = _interopRequireDefault(_selectors3);

var _selectors5 = __webpack_require__(18);

var _selectors6 = _interopRequireDefault(_selectors5);

var _selectors7 = __webpack_require__(11);

var _selectors8 = _interopRequireDefault(_selectors7);

var _selectors9 = __webpack_require__(12);

var _selectors10 = _interopRequireDefault(_selectors9);

var _selectors11 = __webpack_require__(70);

var _selectors12 = _interopRequireDefault(_selectors11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger");

/**
 * @example
 * let session = Debugger
 *   .forTx(<txHash>, {
 *     contracts: [<contract obj>, ...],
 *     provider: <provider instance>
 *   })
 *   .connect();
 */

var Debugger = function () {
  /**
   * @param {Session} session - debugger session
   * @private
   */
  function Debugger(session) {
    (0, _classCallCheck3.default)(this, Debugger);

    /**
     * @private
     */
    this._session = session;
  }

  /**
   * Instantiates a Debugger for a given transaction hash.
   *
   * @param {String} txHash - transaction hash with leading "0x"
   * @param {{contracts: Array<Contract>, files: Array<String>, provider: Web3Provider}} options -
   * @return {Debugger} instance
   */


  (0, _createClass3.default)(Debugger, [{
    key: "connect",


    /**
     * Connects to the instantiated Debugger.
     *
     * @return {Session} session instance
     */
    value: function connect() {
      return this._session;
    }

    /**
     * Exported selectors
     *
     * See individual selector docs for full listing
     *
     * @example
     * Debugger.selectors.ast.current.tree
     *
     * @example
     * Debugger.selectors.solidity.current.instruction
     *
     * @example
     * Debugger.selectors.trace.steps
     */

  }], [{
    key: "forTx",
    value: function () {
      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(txHash) {
        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var session;
        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _truffleExpect2.default.options(options, ["contracts", "provider"]);

                session = new _session2.default(options.contracts, options.files, txHash, options.provider);
                _context.prev = 2;
                _context.next = 5;
                return session.ready();

              case 5:
                _context.next = 10;
                break;

              case 7:
                _context.prev = 7;
                _context.t0 = _context["catch"](2);
                throw _context.t0;

              case 10:
                return _context.abrupt("return", new this(session));

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[2, 7]]);
      }));

      function forTx(_x2) {
        return _ref.apply(this, arguments);
      }

      return forTx;
    }()
  }, {
    key: "selectors",
    get: function get() {
      return (0, _reselectTree.createNestedSelector)({
        ast: _selectors4.default,
        data: _selectors2.default,
        trace: _selectors6.default,
        evm: _selectors8.default,
        solidity: _selectors10.default,
        session: _selectors12.default
      });
    }
  }]);
  return Debugger;
}();

/**
 * @typedef {Object} Contract
 * @property {string} contractName contract name
 * @property {string} source solidity source code
 * @property {string} sourcePath path to source file
 * @property {string} binary 0x-prefixed hex string with create bytecode
 * @property {string} sourceMap solidity source map for create bytecode
 * @property {Object} ast Abstract Syntax Tree from Solidity
 * @property {string} deployedBinary 0x-prefixed compiled binary (on chain)
 * @property {string} deployedSourceMap solidity source map for on-chain bytecode
 */


exports.default = Debugger;

/***/ }),
/* 39 */
/***/ (function(module, exports) {

module.exports = require("truffle-expect");

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getIterator2 = __webpack_require__(15);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _values = __webpack_require__(41);

var _values2 = _interopRequireDefault(_values);

var _typeof2 = __webpack_require__(27);

var _typeof3 = _interopRequireDefault(_typeof2);

var _promise = __webpack_require__(28);

var _promise2 = _interopRequireDefault(_promise);

var _classCallCheck2 = __webpack_require__(20);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(21);

var _createClass3 = _interopRequireDefault(_createClass2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _selectors = __webpack_require__(18);

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__(11);

var _selectors4 = _interopRequireDefault(_selectors3);

var _selectors5 = __webpack_require__(16);

var _selectors6 = _interopRequireDefault(_selectors5);

var _selectors7 = __webpack_require__(12);

var _selectors8 = _interopRequireDefault(_selectors7);

var _store = __webpack_require__(46);

var _store2 = _interopRequireDefault(_store);

var _actions = __webpack_require__(29);

var controller = _interopRequireWildcard(_actions);

var _actions2 = __webpack_require__(24);

var actions = _interopRequireWildcard(_actions2);

var _sagas = __webpack_require__(51);

var _sagas2 = _interopRequireDefault(_sagas);

var _reducers = __webpack_require__(64);

var _reducers2 = _interopRequireDefault(_reducers);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:session");

/**
 * Debugger Session
 */
var Session = function () {
  /**
   * @param {Array<Contract>} contracts - contract definitions
   * @param {Array<String>} files - array of filenames for sourceMap indexes
   * @param {string} txHash - transaction hash
   * @param {Web3Provider} provider - web3 provider
   * @private
   */
  function Session(contracts, files, txHash, provider) {
    (0, _classCallCheck3.default)(this, Session);

    /**
     * @private
     */
    this._store = (0, _store2.default)(_reducers2.default, _sagas2.default);

    var _Session$normalize = Session.normalize(contracts, files),
        contexts = _Session$normalize.contexts,
        sources = _Session$normalize.sources;

    // record contracts


    this._store.dispatch(actions.recordContracts(contexts, sources));

    this._store.dispatch(actions.start(txHash, provider));
  }

  (0, _createClass3.default)(Session, [{
    key: "ready",
    value: function ready() {
      var _this = this;

      return new _promise2.default(function (accept, reject) {
        _this._store.subscribe(function () {
          if (_this.state.session == "ACTIVE") {
            accept();
          } else if ((0, _typeof3.default)(_this.state.session) == "object") {
            reject(_this.state.session.error);
          }
        });
      });
    }

    /**
     * Split up artifacts into "contexts" and "sources", dividing artifact
     * data into appropriate buckets.
     *
     * Multiple contracts can be defined in the same source file, but have
     * different bytecodes.
     *
     * This iterates over the contracts and collects binaries separately
     * from sources, using the optional `files` argument to force
     * source ordering.
     * @private
     */

  }, {
    key: "view",
    value: function view(selector) {
      return selector(this.state);
    }
  }, {
    key: "dispatch",
    value: function dispatch(action) {
      if (this.finished) {
        debug("finished: intercepting action %o", action);

        return false;
      }

      this._store.dispatch(action);

      return true;
    }
  }, {
    key: "interrupt",
    value: function interrupt() {
      return this.dispatch(controller.interrupt());
    }
  }, {
    key: "advance",
    value: function advance() {
      return this.dispatch(controller.advance());
    }
  }, {
    key: "stepNext",
    value: function stepNext() {
      return this.dispatch(controller.stepNext());
    }
  }, {
    key: "stepOver",
    value: function stepOver() {
      return this.dispatch(controller.stepOver());
    }
  }, {
    key: "stepInto",
    value: function stepInto() {
      return this.dispatch(controller.stepInto());
    }
  }, {
    key: "stepOut",
    value: function stepOut() {
      return this.dispatch(controller.stepOut());
    }
  }, {
    key: "continueUntil",
    value: function continueUntil() {
      return this.dispatch(controller.continueUntil.apply(controller, arguments));
    }
  }, {
    key: "state",
    get: function get() {
      return this._store.getState();
    }
  }, {
    key: "finished",
    get: function get() {
      return this.state.session == "FINISHED";
    }
  }, {
    key: "failed",
    get: function get() {
      return this.finished && this.view(_selectors4.default.current.callstack).length;
    }
  }], [{
    key: "normalize",
    value: function normalize(contracts) {
      var files = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

      var sourcesByPath = {};
      var contexts = [];
      var sources = void 0;

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = (0, _getIterator3.default)(contracts), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var contract = _step.value;
          var contractName = contract.contractName,
              binary = contract.binary,
              sourceMap = contract.sourceMap,
              deployedBinary = contract.deployedBinary,
              deployedSourceMap = contract.deployedSourceMap,
              sourcePath = contract.sourcePath,
              source = contract.source,
              _ast = contract.ast;


          sourcesByPath[sourcePath] = { sourcePath: sourcePath, source: source, ast: _ast };

          if (binary && binary != "0x") {
            contexts.push({
              contractName: contractName,
              binary: binary,
              sourceMap: sourceMap
            });
          }

          if (deployedBinary && deployedBinary != "0x") {
            contexts.push({
              contractName: contractName,
              binary: deployedBinary,
              sourceMap: deployedSourceMap
            });
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      if (!files) {
        sources = (0, _values2.default)(sourcesByPath);
      } else {
        sources = files.map(function (file) {
          return sourcesByPath[file];
        });
      }

      return { contexts: contexts, sources: sources };
    }
  }]);
  return Session;
}();

exports.default = Session;

/***/ }),
/* 41 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/object/values");

/***/ }),
/* 42 */
/***/ (function(module, exports) {

module.exports = require("truffle-solidity-utils");

/***/ }),
/* 43 */
/***/ (function(module, exports) {

module.exports = require("truffle-code-utils");

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _keys = __webpack_require__(23);

var _keys2 = _interopRequireDefault(_keys);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.getRange = getRange;
exports.rangeNodes = rangeNodes;
exports.findRange = findRange;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _nodeIntervalTree = __webpack_require__(45);

var _nodeIntervalTree2 = _interopRequireDefault(_nodeIntervalTree);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:ast:map");

/**
 * @private
 */
function getRange(node) {
  // src: "<start>:<length>:<_>"
  // returns [start, end]
  var _node$src$split$slice = node.src.split(":").slice(0, 2).map(function (i) {
    return parseInt(i);
  }),
      _node$src$split$slice2 = (0, _slicedToArray3.default)(_node$src$split$slice, 2),
      start = _node$src$split$slice2[0],
      length = _node$src$split$slice2[1];

  return [start, start + length];
}

/**
 * @private
 */
function rangeNodes(node) {
  var pointer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";

  if (node instanceof Array) {
    var _ref;

    return (_ref = []).concat.apply(_ref, (0, _toConsumableArray3.default)(node.map(function (sub, i) {
      return rangeNodes(sub, pointer + "/" + i);
    })));
  } else if (node instanceof Object) {
    var results = [];

    if (node.src) {
      results.push({ pointer: pointer, range: getRange(node) });
    }

    return results.concat.apply(results, (0, _toConsumableArray3.default)((0, _keys2.default)(node).map(function (key) {
      return rangeNodes(node[key], pointer + "/" + key);
    })));
  } else {
    return [];
  }
}

/**
 * @private
 */
function findRange(node, sourceStart, sourceLength) {
  var ranges = rangeNodes(node);
  var tree = new _nodeIntervalTree2.default();

  ranges.forEach(function (_ref2) {
    var range = _ref2.range,
        pointer = _ref2.pointer;

    var _range = (0, _slicedToArray3.default)(range, 2),
        start = _range[0],
        end = _range[1];

    tree.insert(start, end, { range: range, pointer: pointer });
  });

  var sourceEnd = sourceStart + sourceLength;

  var overlapping = tree.search(sourceStart, sourceEnd);

  // find nodes that fully contain requested range,
  // return longest pointer
  return overlapping.filter(function (_ref3) {
    var range = _ref3.range;
    return sourceStart >= range[0] && sourceEnd <= range[1];
  }).map(function (_ref4) {
    var pointer = _ref4.pointer;
    return pointer;
  }).reduce(function (a, b) {
    return a.length > b.length ? a : b;
  }, "");
}

/***/ }),
/* 45 */
/***/ (function(module, exports) {

module.exports = require("node-interval-tree");

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


if (true) {
  module.exports = __webpack_require__(47);
} else if (process.env.NODE_ENV == "test") {
  module.exports = require("./test");
} else {
  module.exports = require("./development");
}

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _common = __webpack_require__(48);

var _common2 = _interopRequireDefault(_common);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _common2.default;

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

exports.abbreviateValues = abbreviateValues;
exports.default = configureStore;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _redux = __webpack_require__(13);

var _reduxSaga = __webpack_require__(49);

var _reduxSaga2 = _interopRequireDefault(_reduxSaga);

var _reduxCliLogger = __webpack_require__(50);

var _reduxCliLogger2 = _interopRequireDefault(_reduxCliLogger);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:store:common");
var reduxDebug = (0, _debug2.default)("debugger:redux");

function abbreviateValues(value) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

  options.stringLimit = options.stringLimit || 66;
  options.arrayLimit = options.arrayLimit || 8;
  options.recurseLimit = options.recurseLimit || 4;

  if (depth > options.recurseLimit) {
    return "...";
  }

  var recurse = function recurse(child) {
    return abbreviateValues(child, options, depth + 1);
  };

  if (value instanceof Array) {
    if (value.length > options.arrayLimit) {
      value = [].concat((0, _toConsumableArray3.default)(value.slice(0, options.arrayLimit / 2)), ["..."], (0, _toConsumableArray3.default)(value.slice(value.length - options.arrayLimit / 2 + 1)));
    }

    return value.map(recurse);
  } else if (value instanceof Object) {
    return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(value).map(function (_ref) {
      var _ref2 = (0, _slicedToArray3.default)(_ref, 2),
          k = _ref2[0],
          v = _ref2[1];

      return (0, _defineProperty3.default)({}, recurse(k), recurse(v));
    }))));
  } else if (typeof value === "string" && value.length > options.stringLimit) {
    var inner = "...";
    var extractAmount = (options.stringLimit - inner.length) / 2;
    var leading = value.slice(0, Math.ceil(extractAmount));
    var trailing = value.slice(value.length - Math.floor(extractAmount));
    return "" + leading + inner + trailing;
  } else {
    return value;
  }
}

function configureStore(reducer, saga, initialState, composeEnhancers) {
  var sagaMiddleware = (0, _reduxSaga2.default)();

  if (!composeEnhancers) {
    composeEnhancers = _redux.compose;
  }

  var loggerMiddleware = (0, _reduxCliLogger2.default)({
    log: reduxDebug,
    stateTransformer: function stateTransformer(state) {
      return abbreviateValues(state, {
        arrayLimit: 4,
        recurseLimit: 3
      });
    },
    actionTransformer: abbreviateValues
  });

  var store = (0, _redux.createStore)(reducer, initialState, composeEnhancers((0, _redux.applyMiddleware)(sagaMiddleware, loggerMiddleware)));

  sagaMiddleware.run(saga);

  return store;
}

/***/ }),
/* 49 */
/***/ (function(module, exports) {

module.exports = require("redux-saga");

/***/ }),
/* 50 */
/***/ (function(module, exports) {

module.exports = require("redux-cli-logger");

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getIterator2 = __webpack_require__(15);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _sagas = __webpack_require__(52);

var ast = _interopRequireWildcard(_sagas);

var _sagas2 = __webpack_require__(57);

var controller = _interopRequireWildcard(_sagas2);

var _sagas3 = __webpack_require__(59);

var solidity = _interopRequireWildcard(_sagas3);

var _sagas4 = __webpack_require__(60);

var evm = _interopRequireWildcard(_sagas4);

var _sagas5 = __webpack_require__(34);

var trace = _interopRequireWildcard(_sagas5);

var _sagas6 = __webpack_require__(31);

var data = _interopRequireWildcard(_sagas6);

var _sagas7 = __webpack_require__(61);

var web3 = _interopRequireWildcard(_sagas7);

var _actions = __webpack_require__(24);

var actions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(saga),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(forkListeners),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchTx),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(recordContexts),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(recordSources),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(recordInstance),
    _marked7 = /*#__PURE__*/_regenerator2.default.mark(ready),
    _marked8 = /*#__PURE__*/_regenerator2.default.mark(error);

var debug = (0, _debug2.default)("debugger:session:sagas");

function saga() {
  var listeners, _ref, contexts, sources, _ref2, txHash, provider, err;

  return _regenerator2.default.wrap(function saga$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          debug("starting listeners");
          return _context.delegateYield(forkListeners(), "t0", 2);

        case 2:
          listeners = _context.t0;


          // receiving & saving contracts into state
          debug("waiting for contract information");
          _context.next = 6;
          return (0, _effects.take)(actions.RECORD_CONTRACTS);

        case 6:
          _ref = _context.sent;
          contexts = _ref.contexts;
          sources = _ref.sources;


          debug("recording contract binaries");
          return _context.delegateYield(recordContexts.apply(undefined, (0, _toConsumableArray3.default)(contexts)), "t1", 11);

        case 11:

          debug("recording contract sources");
          return _context.delegateYield(recordSources.apply(undefined, (0, _toConsumableArray3.default)(sources)), "t2", 13);

        case 13:

          debug("waiting for start");
          // wait for start signal
          _context.next = 16;
          return (0, _effects.take)(actions.START);

        case 16:
          _ref2 = _context.sent;
          txHash = _ref2.txHash;
          provider = _ref2.provider;

          debug("starting");

          // process transaction
          debug("fetching transaction info");
          return _context.delegateYield(fetchTx(txHash, provider), "t3", 22);

        case 22:
          err = _context.t3;

          if (!err) {
            _context.next = 28;
            break;
          }

          debug("error %o", err);
          return _context.delegateYield(error(err), "t4", 26);

        case 26:
          _context.next = 37;
          break;

        case 28:
          debug("visiting ASTs");
          // visit asts
          return _context.delegateYield(ast.visitAll(), "t5", 30);

        case 30:

          debug("readying");
          // signal that stepping can begin
          return _context.delegateYield(ready(), "t6", 32);

        case 32:

          debug("waiting for trace EOT");
          // wait until trace hits EOT
          return _context.delegateYield(trace.wait(), "t7", 34);

        case 34:

          debug("finishing");
          // finish
          _context.next = 37;
          return (0, _effects.put)(actions.finish());

        case 37:

          debug("stopping listeners");
          _context.next = 40;
          return (0, _effects.all)(listeners.map(function (task) {
            return (0, _effects.cancel)(task);
          }));

        case 40:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

exports.default = (0, _helpers.prefixName)("session", saga);


function forkListeners() {
  return _regenerator2.default.wrap(function forkListeners$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return (0, _effects.all)([ast, controller, data, evm, solidity, trace, web3].map(function (app) {
            return (0, _effects.fork)(app.saga);
          }));

        case 2:
          return _context2.abrupt("return", _context2.sent);

        case 3:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function fetchTx(txHash, provider) {
  var result, addresses, binaries;
  return _regenerator2.default.wrap(function fetchTx$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          return _context3.delegateYield(web3.inspectTransaction(txHash, provider), "t0", 1);

        case 1:
          result = _context3.t0;

          if (!result.error) {
            _context3.next = 4;
            break;
          }

          return _context3.abrupt("return", result.error);

        case 4:
          return _context3.delegateYield(evm.begin(result), "t1", 5);

        case 5:
          return _context3.delegateYield(trace.processTrace(result.trace), "t2", 6);

        case 6:
          addresses = _context3.t2;

          if (result.address && addresses.indexOf(result.address) == -1) {
            addresses.push(result.address);
          }

          return _context3.delegateYield(web3.obtainBinaries(addresses), "t3", 9);

        case 9:
          binaries = _context3.t3;
          _context3.next = 12;
          return (0, _effects.all)(addresses.map(function (address, i) {
            return (0, _effects.call)(recordInstance, address, binaries[i]);
          }));

        case 12:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function recordContexts() {
  for (var _len = arguments.length, contexts = Array(_len), _key = 0; _key < _len; _key++) {
    contexts[_key] = arguments[_key];
  }

  var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _ref3, contractName, binary, sourceMap;

  return _regenerator2.default.wrap(function recordContexts$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _iteratorNormalCompletion = true;
          _didIteratorError = false;
          _iteratorError = undefined;
          _context4.prev = 3;
          _iterator = (0, _getIterator3.default)(contexts);

        case 5:
          if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
            _context4.next = 14;
            break;
          }

          _ref3 = _step.value;
          contractName = _ref3.contractName, binary = _ref3.binary, sourceMap = _ref3.sourceMap;
          return _context4.delegateYield(evm.addContext(contractName, binary), "t0", 9);

        case 9:
          if (!sourceMap) {
            _context4.next = 11;
            break;
          }

          return _context4.delegateYield(solidity.addSourceMap(binary, sourceMap), "t1", 11);

        case 11:
          _iteratorNormalCompletion = true;
          _context4.next = 5;
          break;

        case 14:
          _context4.next = 20;
          break;

        case 16:
          _context4.prev = 16;
          _context4.t2 = _context4["catch"](3);
          _didIteratorError = true;
          _iteratorError = _context4.t2;

        case 20:
          _context4.prev = 20;
          _context4.prev = 21;

          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }

        case 23:
          _context4.prev = 23;

          if (!_didIteratorError) {
            _context4.next = 26;
            break;
          }

          throw _iteratorError;

        case 26:
          return _context4.finish(23);

        case 27:
          return _context4.finish(20);

        case 28:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this, [[3, 16, 20, 28], [21,, 23, 27]]);
}

function recordSources() {
  for (var _len2 = arguments.length, sources = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    sources[_key2] = arguments[_key2];
  }

  var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _ref4, sourcePath, source, _ast;

  return _regenerator2.default.wrap(function recordSources$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _iteratorNormalCompletion2 = true;
          _didIteratorError2 = false;
          _iteratorError2 = undefined;
          _context5.prev = 3;
          _iterator2 = (0, _getIterator3.default)(sources);

        case 5:
          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
            _context5.next = 12;
            break;
          }

          _ref4 = _step2.value;
          sourcePath = _ref4.sourcePath, source = _ref4.source, _ast = _ref4.ast;
          return _context5.delegateYield(solidity.addSource(source, sourcePath, _ast), "t0", 9);

        case 9:
          _iteratorNormalCompletion2 = true;
          _context5.next = 5;
          break;

        case 12:
          _context5.next = 18;
          break;

        case 14:
          _context5.prev = 14;
          _context5.t1 = _context5["catch"](3);
          _didIteratorError2 = true;
          _iteratorError2 = _context5.t1;

        case 18:
          _context5.prev = 18;
          _context5.prev = 19;

          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }

        case 21:
          _context5.prev = 21;

          if (!_didIteratorError2) {
            _context5.next = 24;
            break;
          }

          throw _iteratorError2;

        case 24:
          return _context5.finish(21);

        case 25:
          return _context5.finish(18);

        case 26:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this, [[3, 14, 18, 26], [19,, 21, 25]]);
}

function recordInstance(address, binary) {
  return _regenerator2.default.wrap(function recordInstance$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          return _context6.delegateYield(evm.addInstance(address, binary), "t0", 1);

        case 1:
        case "end":
          return _context6.stop();
      }
    }
  }, _marked6, this);
}

function ready() {
  return _regenerator2.default.wrap(function ready$(_context7) {
    while (1) {
      switch (_context7.prev = _context7.next) {
        case 0:
          _context7.next = 2;
          return (0, _effects.put)(actions.ready());

        case 2:
        case "end":
          return _context7.stop();
      }
    }
  }, _marked7, this);
}

function error(err) {
  return _regenerator2.default.wrap(function error$(_context8) {
    while (1) {
      switch (_context8.prev = _context8.next) {
        case 0:
          _context8.next = 2;
          return (0, _effects.put)(actions.error(err));

        case 2:
        case "end":
          return _context8.stop();
      }
    }
  }, _marked8, this);
}

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _getIterator2 = __webpack_require__(15);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.visitAll = visitAll;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _sagas = __webpack_require__(31);

var data = _interopRequireWildcard(_sagas);

var _actions = __webpack_require__(56);

var actions = _interopRequireWildcard(_actions);

var _selectors = __webpack_require__(16);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(walk),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(handleEnter),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(handleExit),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(walkSaga),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(visitAll),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:ast:sagas");

function walk(sourceId, node) {
  var pointer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
  var parentId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

  var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _ref, _ref2, i, child, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _ref3, _ref4, key, _child;

  return _regenerator2.default.wrap(function walk$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          debug("walking %o %o", pointer, node);

          return _context.delegateYield(handleEnter(sourceId, node, pointer, parentId), "t0", 2);

        case 2:
          if (!(node instanceof Array)) {
            _context.next = 34;
            break;
          }

          _iteratorNormalCompletion = true;
          _didIteratorError = false;
          _iteratorError = undefined;
          _context.prev = 6;
          _iterator = (0, _getIterator3.default)(node.entries());

        case 8:
          if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
            _context.next = 18;
            break;
          }

          _ref = _step.value;
          _ref2 = (0, _slicedToArray3.default)(_ref, 2);
          i = _ref2[0];
          child = _ref2[1];
          _context.next = 15;
          return (0, _effects.call)(walk, sourceId, child, pointer + "/" + i, parentId);

        case 15:
          _iteratorNormalCompletion = true;
          _context.next = 8;
          break;

        case 18:
          _context.next = 24;
          break;

        case 20:
          _context.prev = 20;
          _context.t1 = _context["catch"](6);
          _didIteratorError = true;
          _iteratorError = _context.t1;

        case 24:
          _context.prev = 24;
          _context.prev = 25;

          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }

        case 27:
          _context.prev = 27;

          if (!_didIteratorError) {
            _context.next = 30;
            break;
          }

          throw _iteratorError;

        case 30:
          return _context.finish(27);

        case 31:
          return _context.finish(24);

        case 32:
          _context.next = 64;
          break;

        case 34:
          if (!(node instanceof Object)) {
            _context.next = 64;
            break;
          }

          _iteratorNormalCompletion2 = true;
          _didIteratorError2 = false;
          _iteratorError2 = undefined;
          _context.prev = 38;
          _iterator2 = (0, _getIterator3.default)((0, _entries2.default)(node));

        case 40:
          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
            _context.next = 50;
            break;
          }

          _ref3 = _step2.value;
          _ref4 = (0, _slicedToArray3.default)(_ref3, 2);
          key = _ref4[0];
          _child = _ref4[1];
          _context.next = 47;
          return (0, _effects.call)(walk, sourceId, _child, pointer + "/" + key, node.id);

        case 47:
          _iteratorNormalCompletion2 = true;
          _context.next = 40;
          break;

        case 50:
          _context.next = 56;
          break;

        case 52:
          _context.prev = 52;
          _context.t2 = _context["catch"](38);
          _didIteratorError2 = true;
          _iteratorError2 = _context.t2;

        case 56:
          _context.prev = 56;
          _context.prev = 57;

          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }

        case 59:
          _context.prev = 59;

          if (!_didIteratorError2) {
            _context.next = 62;
            break;
          }

          throw _iteratorError2;

        case 62:
          return _context.finish(59);

        case 63:
          return _context.finish(56);

        case 64:
          return _context.delegateYield(handleExit(sourceId, node, pointer), "t3", 65);

        case 65:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this, [[6, 20, 24, 32], [25,, 27, 31], [38, 52, 56, 64], [57,, 59, 63]]);
}

function handleEnter(sourceId, node, pointer, parentId) {
  return _regenerator2.default.wrap(function handleEnter$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          if (node instanceof Object) {
            _context2.next = 2;
            break;
          }

          return _context2.abrupt("return");

        case 2:

          debug("entering %s", pointer);

          if (!(node.id !== undefined)) {
            _context2.next = 6;
            break;
          }

          debug("%s recording scope %s", pointer, node.id);
          return _context2.delegateYield(data.scope(node.id, pointer, parentId, sourceId), "t0", 6);

        case 6:
          _context2.t1 = node.nodeType;
          _context2.next = _context2.t1 === "VariableDeclaration" ? 9 : 12;
          break;

        case 9:
          debug("%s recording variable %o", pointer, node);
          return _context2.delegateYield(data.declare(node), "t2", 11);

        case 11:
          return _context2.abrupt("break", 12);

        case 12:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function handleExit(sourceId, node, pointer) {
  return _regenerator2.default.wrap(function handleExit$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          debug("exiting %s", pointer);

          // no-op right now

        case 1:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function walkSaga(_ref5) {
  var sourceId = _ref5.sourceId,
      ast = _ref5.ast;
  return _regenerator2.default.wrap(function walkSaga$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return walk(sourceId, ast);

        case 2:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

function visitAll(idx) {
  var sources, tasks;
  return _regenerator2.default.wrap(function visitAll$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.select)(_selectors2.default.views.sources);

        case 2:
          sources = _context5.sent;
          _context5.next = 5;
          return (0, _effects.all)((0, _entries2.default)(sources).filter(function (_ref6) {
            var _ref7 = (0, _slicedToArray3.default)(_ref6, 2),
                id = _ref7[0],
                ast = _ref7[1].ast;

            return !!ast;
          }).map(function (_ref8) {
            var _ref9 = (0, _slicedToArray3.default)(_ref8, 2),
                id = _ref9[0],
                ast = _ref9[1].ast;

            return (0, _effects.fork)(function () {
              return (0, _effects.put)(actions.visit(id, ast));
            });
          }));

        case 5:
          tasks = _context5.sent;

          if (!(tasks.length > 0)) {
            _context5.next = 9;
            break;
          }

          _context5.next = 9;
          return _effects.join.apply(undefined, (0, _toConsumableArray3.default)(tasks));

        case 9:
          _context5.next = 11;
          return (0, _effects.put)(actions.doneVisiting());

        case 11:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this);
}

function saga() {
  return _regenerator2.default.wrap(function saga$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          _context6.next = 2;
          return (0, _effects.race)({
            visitor: (0, _effects.takeEvery)(actions.VISIT, walkSaga),
            done: (0, _effects.take)(actions.DONE_VISITING)
          });

        case 2:
        case "end":
          return _context6.stop();
      }
    }
  }, _marked6, this);
}

exports.default = (0, _helpers.prefixName)("ast", saga);

/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends2 = __webpack_require__(9);

var _extends3 = _interopRequireDefault(_extends2);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

exports.read = read;
exports.decodeValue = decodeValue;
exports.decodeMemoryReference = decodeMemoryReference;
exports.decodeStorageReference = decodeStorageReference;
exports.default = decode;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _bignumber = __webpack_require__(19);

var _memory = __webpack_require__(54);

var memory = _interopRequireWildcard(_memory);

var _storage = __webpack_require__(55);

var storage = _interopRequireWildcard(_storage);

var _utils = __webpack_require__(14);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:decode");

function read(pointer, state) {
  if (pointer.stack != undefined && state.stack && pointer.stack < state.stack.length) {
    return state.stack[pointer.stack];
  } else if (pointer.storage != undefined && state.storage) {
    return storage.readRange(state.storage, pointer.storage);
  } else if (pointer.memory != undefined && state.memory) {
    return memory.readBytes(state.memory, pointer.memory.start, pointer.memory.length);
  } else if (pointer.literal) {
    return pointer.literal;
  }
}

function decodeValue(definition, pointer, state) {
  var bytes = read(pointer, state);
  if (!bytes) {
    return undefined;
  }

  switch (utils.typeClass(definition)) {
    case "bool":
      return !utils.toBigNumber(bytes).isZero();

    case "uint":
      return utils.toBigNumber(bytes);

    case "int":
      return utils.toSignedBigNumber(bytes);

    case "address":
      return utils.toHexString(bytes, true);

    case "bytes":
      debug("typeIdentifier %s %o", utils.typeIdentifier(definition), bytes);
      var length = utils.specifiedSize(definition);
      return utils.toHexString(bytes, length);

    case "string":
      debug("typeIdentifier %s %o", utils.typeIdentifier(definition), bytes);
      return String.fromCharCode.apply(null, bytes);

    default:
      debug("Unknown value type: %s", utils.typeIdentifier(definition));
      return null;
  }
}

function decodeMemoryReference(definition, pointer, state) {
  for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
    args[_key - 3] = arguments[_key];
  }

  var rawValue = utils.toBigNumber(read(pointer, state)).toNumber();

  var bytes;
  switch (utils.typeClass(definition)) {

    case "bytes":
    case "string":
      bytes = read({
        memory: { start: rawValue, length: _utils.WORD_SIZE }
      }, state); // bytes contain length

      return decodeValue.apply(undefined, [definition, {
        memory: { start: rawValue + _utils.WORD_SIZE, length: bytes }
      }, state].concat(args));

    case "array":
      bytes = utils.toBigNumber(read({
        memory: { start: rawValue, length: _utils.WORD_SIZE }
      }, state)).toNumber(); // bytes contain array length

      bytes = read({ memory: {
          start: rawValue + _utils.WORD_SIZE, length: bytes * _utils.WORD_SIZE
        } }, state); // now bytes contain items

      return memory.chunk(bytes, _utils.WORD_SIZE).map(function (chunk) {
        return decode.apply(undefined, [utils.baseDefinition(definition), {
          literal: chunk
        }, state].concat(args));
      });

    case "struct":
      var refs = args[0];

      var structDefinition = refs[definition.typeName.referencedDeclaration];
      var structVariables = structDefinition.variables || [];

      return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)(structVariables.map(function (_ref, i) {
        var name = _ref.name,
            id = _ref.id;

        var memberDefinition = refs[id].definition;
        var memberPointer = {
          memory: { start: rawValue + i * _utils.WORD_SIZE, length: _utils.WORD_SIZE }
        };
        // let memberPointer = memory.read(state.memory, pointer + i * WORD_SIZE);

        // HACK
        memberDefinition = (0, _extends3.default)({}, memberDefinition, {

          typeDescriptions: (0, _extends3.default)({}, memberDefinition.typeDescriptions, {

            typeIdentifier: memberDefinition.typeDescriptions.typeIdentifier.replace(/_storage_/g, "_memory_")
          })
        });

        return (0, _defineProperty3.default)({}, name, decode.apply(undefined, [memberDefinition, memberPointer, state].concat(args)));
      }))));

    default:
      debug("Unknown memory reference type: %s", utils.typeIdentifier(definition));
      return null;

  }
}

function decodeStorageReference(definition, pointer, state) {
  for (var _len2 = arguments.length, args = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {
    args[_key2 - 3] = arguments[_key2];
  }

  var data;
  var bytes;
  var length;
  var slot;

  switch (utils.typeClass(definition)) {
    case "array":
      debug("storage array! %o", pointer);
      data = read(pointer, state);
      if (!data) {
        return null;
      }

      length = utils.toBigNumber(data).toNumber();
      debug("length %o", length);

      var baseSize = utils.storageSize(utils.baseDefinition(definition));
      var perWord = Math.floor(_utils.WORD_SIZE / baseSize);
      debug("baseSize %o", baseSize);
      debug("perWord %d", perWord);

      var offset = function offset(i) {
        if (perWord == 1) {
          return i;
        }

        return Math.floor(i * baseSize / _utils.WORD_SIZE);
      };

      var index = function index(i) {
        if (perWord == 1) {
          return _utils.WORD_SIZE - baseSize;
        }

        var position = perWord - i % perWord - 1;
        return position * baseSize;
      };

      debug("pointer: %o", pointer);
      return [].concat((0, _toConsumableArray3.default)(Array(length).keys())).map(function (i) {
        var childFrom = pointer.storage.from.offset != undefined ? {
          slot: ["0x" + utils.toBigNumber(utils.keccak256.apply(utils, (0, _toConsumableArray3.default)(pointer.storage.from.slot))).plus(pointer.storage.from.offset).toString(16)],
          offset: offset(i),
          index: index(i)
        } : {
          slot: [pointer.storage.from.slot],
          offset: offset(i),
          index: index(i)
        };
        return childFrom;
      }).map(function (childFrom, idx) {
        debug("childFrom %d, %o", idx, childFrom);
        return decode.apply(undefined, [utils.baseDefinition(definition), { storage: {
            from: childFrom,
            length: baseSize
          } }, state].concat(args));
      });

    case "bytes":
    case "string":
      data = read(pointer, state);
      if (!data) {
        return null;
      }

      if (data[_utils.WORD_SIZE - 1] % 2 == 0) {
        // string lives in word, length is last byte / 2
        length = data[_utils.WORD_SIZE - 1] / 2;
        debug("in-word; length %o", length);
        if (length == 0) {
          return "";
        }

        return decodeValue.apply(undefined, [definition, { storage: {
            from: { slot: pointer.storage.from.slot, index: 0 },
            to: { slot: pointer.storage.from.slot, index: length - 1 }
          } }, state].concat(args));
      } else {
        length = utils.toBigNumber(data).minus(1).div(2).toNumber();
        debug("new-word, length %o", length);

        return decodeValue.apply(undefined, [definition, { storage: {
            from: { slot: [pointer.storage.from.slot], index: 0 },
            length: length
          } }, state].concat(args));
      }

    case "struct":
      var refs = args[0];


      return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(pointer.storage.children).map(function (_ref3) {
        var _ref4 = (0, _slicedToArray3.default)(_ref3, 2),
            id = _ref4[0],
            childPointer = _ref4[1];

        return (0, _defineProperty3.default)({}, childPointer.name, decode.apply(undefined, [refs[id].definition, { storage: childPointer }, state].concat(args)));
      }))));

    default:
      debug("Unknown storage reference type: %s", utils.typeIdentifier(definition));
      return undefined;
  }
}

function decode(definition) {
  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
    args[_key3 - 1] = arguments[_key3];
  }

  if (!utils.isReference(definition)) {
    return decodeValue.apply(undefined, [definition].concat(args));
  }

  switch (utils.referenceType(definition)) {
    case "memory":
      return decodeMemoryReference.apply(undefined, [definition].concat(args));
    case "storage":
      return decodeStorageReference.apply(undefined, [definition].concat(args));
    default:
      debug("Unknown reference category: %s", utils.typeIdentifier(definition));
      return undefined;
  }
}

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.read = read;
exports.readBytes = readBytes;
exports.chunk = chunk;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _bignumber = __webpack_require__(19);

var _utils = __webpack_require__(14);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:decode:memory");

/**
 * read word from memory
 *
 * requires `byte` to be a multiple of WORD_SIZE (32)
 *
 * @param memory - Uint8Array
 * @return {BigNumber}
 */
function read(memory, byte) {
  return readBytes(memory, byte, _utils.WORD_SIZE);
}

/**
 * read <bytes> amount of bytes from memory, starting at byte <start>
 *
 * @param memory - Uint8Array
 */
function readBytes(memory, byte, length) {
  byte = utils.toBigNumber(byte);
  length = utils.toBigNumber(length);

  if (byte.toNumber() >= memory.length) {
    return new Uint8Array(length ? length.toNumber() : 0);
  }

  if (length == undefined) {
    return new Uint8Array(memory.buffer, byte.toNumber());
  }

  // grab `length` bytes no matter what, here fill this array
  var bytes = new Uint8Array(length.toNumber());

  // if we're reading past the end of memory, truncate the length to read
  var excess = byte.plus(length).minus(memory.length).toNumber();
  if (excess > 0) {
    length = new _bignumber.BigNumber(memory.length).minus(byte);
  }

  var existing = new Uint8Array(memory.buffer, byte.toNumber(), length.toNumber());

  bytes.set(existing);

  return bytes;
}

/**
 * Split memory into chunks
 */
function chunk(memory) {
  var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _utils.WORD_SIZE;

  var chunks = [];

  for (var i = 0; i < memory.length; i += size) {
    var _chunk = readBytes(memory, i, size);
    chunks.push(_chunk);
  }

  return chunks;
}

/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = __webpack_require__(9);

var _extends3 = _interopRequireDefault(_extends2);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

exports.read = read;
exports.readRange = readRange;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _utils = __webpack_require__(14);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:decode:storage");

/**
 * read slot from storage
 *
 * @param slot - big number or array of regular numbers
 * @param offset - for array, offset from the keccak determined location
 */
function read(storage, slot) {
  var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

  if (slot instanceof Array) {
    slot = utils.keccak256.apply(utils, (0, _toConsumableArray3.default)(slot.map(utils.toBigNumber)));
  }

  slot = utils.toBigNumber(slot).plus(offset);

  debug("reading slot: %o", utils.toHexString(slot));

  var word = storage[utils.toHexString(slot, _utils.WORD_SIZE)] || new Uint8Array(_utils.WORD_SIZE);

  debug("word %o", word);
  return word;
}

/**
 * read all bytes in some range.
 *
 * parameters `from` and `to` are objects with the following properties:
 *
 *   slot - (required) either a bignumber or a "path" array of integer offsets
 *
 *     path array values get converted into keccak256 hash as per solidity
 *     storage allocation method
 *
 *     ref: https://solidity.readthedocs.io/en/v0.4.23/miscellaneous.html#layout-of-state-variables-in-storage
 *     (search "concatenation")
 *
 *  offset - (default: 0) slot offset
 *
 *  index - (default: 0) byte index in word
 *
 * @param from - location (see ^)
 * @param to - location (see ^). inclusive.
 * @param length - instead of `to`, number of bytes after `from`
 */
function readRange(storage, _ref) {
  var from = _ref.from,
      to = _ref.to,
      length = _ref.length;

  if (!length && !to || length && to) {
    throw new Error("must specify exactly one `to`|`length`");
  }

  from = (0, _extends3.default)({}, from, {
    offset: from.offset || 0
  });

  if (length) {
    to = {
      slot: from.slot,
      offset: from.offset + Math.floor((from.index + length - 1) / _utils.WORD_SIZE),
      index: (from.index + length - 1) % _utils.WORD_SIZE
    };
  } else {
    to = (0, _extends3.default)({}, to, {
      offset: to.offset || 0
    });
  }

  debug("readRange %o", { from: from, to: to });

  var totalWords = to.offset - from.offset + 1;
  debug("totalWords %o", totalWords);

  var data = new Uint8Array(totalWords * _utils.WORD_SIZE);

  for (var i = 0; i < totalWords; i++) {
    var offset = i + from.offset;
    data.set(read(storage, from.slot, offset), i * _utils.WORD_SIZE);
  }
  debug("words %o", data);

  data = data.slice(from.index, (totalWords - 1) * _utils.WORD_SIZE + to.index + 1);

  debug("data: %o", data);

  return data;
}

/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.visit = visit;
exports.doneVisiting = doneVisiting;
var VISIT = exports.VISIT = "VISIT";
function visit(sourceId, ast) {
  return {
    type: VISIT,
    sourceId: sourceId, ast: ast
  };
}

var DONE_VISITING = exports.DONE_VISITING = "DONE_VISITING";
function doneVisiting() {
  return {
    type: DONE_VISITING
  };
}

/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _keys = __webpack_require__(23);

var _keys2 = _interopRequireDefault(_keys);

var _set = __webpack_require__(25);

var _set2 = _interopRequireDefault(_set);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _CONTROL_SAGAS;

exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _sagas = __webpack_require__(34);

var trace = _interopRequireWildcard(_sagas);

var _actions = __webpack_require__(29);

var actions = _interopRequireWildcard(_actions);

var _selectors = __webpack_require__(58);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(saga),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(advance),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(stepNext),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(stepInto),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(stepOut),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(stepOver),
    _marked7 = /*#__PURE__*/_regenerator2.default.mark(continueUntil);

var debug = (0, _debug2.default)("debugger:controller:sagas");

var CONTROL_SAGAS = (_CONTROL_SAGAS = {}, (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.ADVANCE, advance), (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.STEP_NEXT, stepNext), (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.STEP_OVER, stepOver), (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.STEP_INTO, stepInto), (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.STEP_OUT, stepOut), (0, _defineProperty3.default)(_CONTROL_SAGAS, actions.CONTINUE_UNTIL, continueUntil), _CONTROL_SAGAS);

/** AST node types that are skipped to filter out some noise */
var SKIPPED_TYPES = new _set2.default(["ContractDefinition", "VariableDeclaration"]);

function saga() {
  var action, _saga;

  return _regenerator2.default.wrap(function saga$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          if (false) {
            _context.next = 13;
            break;
          }

          debug("waiting for control action");
          _context.next = 4;
          return (0, _effects.take)((0, _keys2.default)(CONTROL_SAGAS));

        case 4:
          action = _context.sent;

          debug("got control action");
          _saga = CONTROL_SAGAS[action.type];
          _context.next = 9;
          return (0, _effects.put)(actions.beginStep(action.type));

        case 9:
          _context.next = 11;
          return (0, _effects.race)({
            exec: (0, _effects.call)(_saga, action),
            interrupt: (0, _effects.take)(actions.INTERRUPT)
          });

        case 11:
          _context.next = 0;
          break;

        case 13:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

exports.default = (0, _helpers.prefixName)("controller", saga);

/**
 * Advance the state by one instruction
 */

function advance() {
  return _regenerator2.default.wrap(function advance$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          return _context2.delegateYield(trace.advance(), "t0", 1);

        case 1:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

/**
 * stepNext - step to the next logical code segment
 *
 * Note: It might take multiple instructions to express the same section of code.
 * "Stepping", then, is stepping to the next logical item, not stepping to the next
 * instruction. See advance() if you'd like to advance by one instruction.
 */
function stepNext() {
  var startingRange, upcoming;
  return _regenerator2.default.wrap(function stepNext$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          _context3.next = 2;
          return (0, _effects.select)(_selectors2.default.current.location.sourceRange);

        case 2:
          startingRange = _context3.sent;

        case 3:
          return _context3.delegateYield(advance(), "t0", 4);

        case 4:
          _context3.next = 6;
          return (0, _effects.select)(_selectors2.default.current.location);

        case 6:
          upcoming = _context3.sent;

        case 7:
          if (!upcoming.node || SKIPPED_TYPES.has(upcoming.node.nodeType) || upcoming.sourceRange.start == startingRange.start && upcoming.sourceRange.length == startingRange.length) {
            _context3.next = 3;
            break;
          }

        case 8:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

/**
 * stepInto - step into the current function
 *
 * Conceptually this is easy, but from a programming standpoint it's hard.
 * Code like `getBalance(msg.sender)` might be highlighted, but there could
 * be a number of different intermediate steps (like evaluating `msg.sender`)
 * before `getBalance` is stepped into. This function will step into the first
 * function available (where instruction.jump == "i"), ignoring any intermediate
 * steps that fall within the same code range. If there's a step encountered
 * that exists outside of the range, then stepInto will only execute until that
 * step.
 */
function stepInto() {
  var startingDepth, startingRange, currentDepth, currentRange;
  return _regenerator2.default.wrap(function stepInto$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return (0, _effects.select)(_selectors2.default.current.willJump);

        case 2:
          if (!_context4.sent) {
            _context4.next = 5;
            break;
          }

          return _context4.delegateYield(stepNext(), "t0", 4);

        case 4:
          return _context4.abrupt("return");

        case 5:
          _context4.next = 7;
          return (0, _effects.select)(_selectors2.default.current.location.isMultiline);

        case 7:
          if (!_context4.sent) {
            _context4.next = 10;
            break;
          }

          return _context4.delegateYield(stepOver(), "t1", 9);

        case 9:
          return _context4.abrupt("return");

        case 10:
          _context4.next = 12;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 12:
          startingDepth = _context4.sent;
          _context4.next = 15;
          return (0, _effects.select)(_selectors2.default.current.location.sourceRange);

        case 15:
          startingRange = _context4.sent;

        case 16:
          return _context4.delegateYield(stepNext(), "t2", 17);

        case 17:
          _context4.next = 19;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 19:
          currentDepth = _context4.sent;
          _context4.next = 22;
          return (0, _effects.select)(_selectors2.default.current.location.sourceRange);

        case 22:
          currentRange = _context4.sent;

        case 23:
          if (
          // the function stack has not increased,
          currentDepth <= startingDepth &&

          // the current source range begins on or after the starting range
          currentRange.start >= startingRange.start &&

          // and the current range ends on or before the starting range ends
          currentRange.start + currentRange.length <= startingRange.start + startingRange.length) {
            _context4.next = 16;
            break;
          }

        case 24:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

/**
 * Step out of the current function
 *
 * This will run until the debugger encounters a decrease in function depth.
 */
function stepOut() {
  var startingDepth, currentDepth;
  return _regenerator2.default.wrap(function stepOut$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.select)(_selectors2.default.current.location.isMultiline);

        case 2:
          if (!_context5.sent) {
            _context5.next = 5;
            break;
          }

          return _context5.delegateYield(stepOver(), "t0", 4);

        case 4:
          return _context5.abrupt("return");

        case 5:
          _context5.next = 7;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 7:
          startingDepth = _context5.sent;

        case 8:
          return _context5.delegateYield(stepNext(), "t1", 9);

        case 9:
          _context5.next = 11;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 11:
          currentDepth = _context5.sent;

        case 12:
          if (currentDepth >= startingDepth) {
            _context5.next = 8;
            break;
          }

        case 13:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this);
}

/**
 * stepOver - step over the current line
 *
 * Step over the current line. This will step to the next instruction that
 * exists on a different line of code within the same function depth.
 */
function stepOver() {
  var startingDepth, startingRange, currentDepth, currentRange;
  return _regenerator2.default.wrap(function stepOver$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          _context6.next = 2;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 2:
          startingDepth = _context6.sent;
          _context6.next = 5;
          return (0, _effects.select)(_selectors2.default.current.location.sourceRange);

        case 5:
          startingRange = _context6.sent;

        case 6:
          return _context6.delegateYield(stepNext(), "t0", 7);

        case 7:
          _context6.next = 9;
          return (0, _effects.select)(_selectors2.default.current.functionDepth);

        case 9:
          currentDepth = _context6.sent;
          _context6.next = 12;
          return (0, _effects.select)(_selectors2.default.current.location.sourceRange);

        case 12:
          currentRange = _context6.sent;

        case 13:
          if (
          // keep stepping provided:
          //
          // we haven't jumped out
          !(currentDepth < startingDepth) && (

          // either: function depth is greater than starting (ignore function calls)
          // or, if we're at the same depth, keep stepping until we're on a new
          // line.
          currentDepth > startingDepth || currentRange.lines.start.line == startingRange.lines.start.line)) {
            _context6.next = 6;
            break;
          }

        case 14:
        case "end":
          return _context6.stop();
      }
    }
  }, _marked6, this);
}

/**
 * continueUntil - step through execution until a breakpoint
 *
 * @param breakpoints - array of breakpoints ({ ...call, line })
 */
function continueUntil(_ref) {
  var breakpoints = _ref.breakpoints;
  var currentCall, currentLocation, breakpointHit;
  return _regenerator2.default.wrap(function continueUntil$(_context7) {
    while (1) {
      switch (_context7.prev = _context7.next) {
        case 0:
          breakpointHit = false;

        case 1:
          return _context7.delegateYield(stepNext(), "t0", 2);

        case 2:
          _context7.next = 4;
          return (0, _effects.select)(_selectors2.default.current.executionContext);

        case 4:
          currentCall = _context7.sent;
          _context7.next = 7;
          return (0, _effects.select)(_selectors2.default.current.location);

        case 7:
          currentLocation = _context7.sent;


          breakpointHit = breakpoints.filter(function (_ref2) {
            var address = _ref2.address,
                binary = _ref2.binary,
                line = _ref2.line,
                node = _ref2.node;
            return (address == currentCall.address || binary == currentCall.binary) && (line == currentLocation.sourceRange.lines.start.line || node == currentLocation.node.id);
          }).length > 0;

        case 9:
          if (!breakpointHit) {
            _context7.next = 1;
            break;
          }

        case 10:
        case "end":
          return _context7.stop();
      }
    }
  }, _marked7, this);
}

/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _selectors = __webpack_require__(11);

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__(12);

var _selectors4 = _interopRequireDefault(_selectors3);

var _selectors5 = __webpack_require__(16);

var _selectors6 = _interopRequireDefault(_selectors5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:controller:sagas");

/**
 * @private
 */
var identity = function identity(x) {
  return x;
};

/**
 * controller
 */
var controller = (0, _reselectTree.createSelectorTree)({

  /**
   * controller.current
   */
  current: {
    /**
     * controller.current.functionDepth
     */
    functionDepth: (0, _reselectTree.createLeaf)([_selectors4.default.current.functionDepth], identity),

    /**
     * controller.current.executionContext
     */
    executionContext: (0, _reselectTree.createLeaf)([_selectors2.default.current.call], identity),

    /**
     * controller.current.willJump
     */
    willJump: (0, _reselectTree.createLeaf)([_selectors2.default.current.step.isJump], identity),

    /**
     * controller.current.location
     */
    location: {
      /**
       * controller.current.location.sourceRange
       */
      sourceRange: (0, _reselectTree.createLeaf)([_selectors4.default.current.sourceRange], identity),

      /**
       * controller.current.location.node
       */
      node: (0, _reselectTree.createLeaf)([_selectors6.default.current.node], identity),

      /**
       * controller.current.location.isMultiline
       */
      isMultiline: (0, _reselectTree.createLeaf)([_selectors4.default.current.isMultiline], identity)
    }
  }
});

exports.default = controller;

/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.addSource = addSource;
exports.addSourceMap = addSourceMap;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(35);

var actions = _interopRequireWildcard(_actions);

var _actions2 = __webpack_require__(17);

var _selectors = __webpack_require__(12);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(addSource),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(addSourceMap),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(functionDepthSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:solidity:sagas");

function addSource(source, sourcePath, ast) {
  return _regenerator2.default.wrap(function addSource$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, _effects.put)(actions.addSource(source, sourcePath, ast));

        case 2:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

function addSourceMap(binary, sourceMap) {
  return _regenerator2.default.wrap(function addSourceMap$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return (0, _effects.put)(actions.addSourceMap(binary, sourceMap));

        case 2:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function functionDepthSaga() {
  var instruction, jumpDirection;
  return _regenerator2.default.wrap(function functionDepthSaga$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          if (false) {
            _context3.next = 18;
            break;
          }

          _context3.next = 3;
          return (0, _effects.take)(_actions2.TICK);

        case 3:
          debug("got TICK");
          _context3.next = 6;
          return (0, _effects.select)(_selectors2.default.current.instruction);

        case 6:
          instruction = _context3.sent;

          debug("instruction: %o", instruction);

          _context3.next = 10;
          return (0, _effects.select)(_selectors2.default.current.willJump);

        case 10:
          if (!_context3.sent) {
            _context3.next = 16;
            break;
          }

          _context3.next = 13;
          return (0, _effects.select)(_selectors2.default.current.jumpDirection);

        case 13:
          jumpDirection = _context3.sent;
          _context3.next = 16;
          return (0, _effects.put)(actions.jump(jumpDirection));

        case 16:
          _context3.next = 0;
          break;

        case 18:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function saga() {
  return _regenerator2.default.wrap(function saga$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return (0, _effects.call)(functionDepthSaga);

        case 2:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

exports.default = (0, _helpers.prefixName)("solidity", saga);

/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.addContext = addContext;
exports.addInstance = addInstance;
exports.begin = begin;
exports.callstackSaga = callstackSaga;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(17);

var _actions2 = __webpack_require__(36);

var actions = _interopRequireWildcard(_actions2);

var _selectors = __webpack_require__(11);

var _selectors2 = _interopRequireDefault(_selectors);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(addContext),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(addInstance),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(begin),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(callstackSaga),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:evm:sagas");

/**
 * Adds EVM bytecode context
 *
 * @return {string} ID (0x-prefixed keccak of binary)
 */
function addContext(contractName, binary) {
  return _regenerator2.default.wrap(function addContext$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, _effects.put)(actions.addContext(contractName, binary));

        case 2:
          return _context.abrupt("return", (0, _helpers.keccak256)(binary));

        case 3:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this);
}

/**
 * Adds known deployed instance of binary at address
 *
 * @return {string} ID (0x-prefixed keccak of binary)
 */
function addInstance(address, binary) {
  var search, _search, context;

  return _regenerator2.default.wrap(function addInstance$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return (0, _effects.select)(_selectors2.default.info.binaries.search);

        case 2:
          search = _context2.sent;
          _search = search(binary), context = _search.context;
          _context2.next = 6;
          return (0, _effects.put)(actions.addInstance(address, context, binary));

        case 6:
          return _context2.abrupt("return", context);

        case 7:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function begin(_ref) {
  var address = _ref.address,
      binary = _ref.binary;
  return _regenerator2.default.wrap(function begin$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          if (!address) {
            _context3.next = 5;
            break;
          }

          _context3.next = 3;
          return (0, _effects.put)(actions.call(address));

        case 3:
          _context3.next = 7;
          break;

        case 5:
          _context3.next = 7;
          return (0, _effects.put)(actions.create(binary));

        case 7:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function callstackSaga() {
  var address, binary;
  return _regenerator2.default.wrap(function callstackSaga$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          if (false) {
            _context4.next = 34;
            break;
          }

          _context4.next = 3;
          return (0, _effects.take)(_actions.TICK);

        case 3:
          debug("got TICK");

          _context4.next = 6;
          return (0, _effects.select)(_selectors2.default.current.step.isCall);

        case 6:
          if (!_context4.sent) {
            _context4.next = 15;
            break;
          }

          debug("got call");
          _context4.next = 10;
          return (0, _effects.select)(_selectors2.default.current.step.callAddress);

        case 10:
          address = _context4.sent;
          _context4.next = 13;
          return (0, _effects.put)(actions.call(address));

        case 13:
          _context4.next = 32;
          break;

        case 15:
          _context4.next = 17;
          return (0, _effects.select)(_selectors2.default.current.step.isCreate);

        case 17:
          if (!_context4.sent) {
            _context4.next = 26;
            break;
          }

          debug("got create");
          _context4.next = 21;
          return (0, _effects.select)(_selectors2.default.current.step.createBinary);

        case 21:
          binary = _context4.sent;
          _context4.next = 24;
          return (0, _effects.put)(actions.create(binary));

        case 24:
          _context4.next = 32;
          break;

        case 26:
          _context4.next = 28;
          return (0, _effects.select)(_selectors2.default.current.step.isHalting);

        case 28:
          if (!_context4.sent) {
            _context4.next = 32;
            break;
          }

          debug("got return");
          _context4.next = 32;
          return (0, _effects.put)(actions.returnCall());

        case 32:
          _context4.next = 0;
          break;

        case 34:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

function saga() {
  return _regenerator2.default.wrap(function saga$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.call)(callstackSaga);

        case 2:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this);
}

exports.default = (0, _helpers.prefixName)("evm", saga);

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.inspectTransaction = inspectTransaction;
exports.obtainBinaries = obtainBinaries;
exports.saga = saga;

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _effects = __webpack_require__(10);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(62);

var actions = _interopRequireWildcard(_actions);

var _adapter = __webpack_require__(63);

var _adapter2 = _interopRequireDefault(_adapter);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchTransactionInfo),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchBinary),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(inspectTransaction),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(obtainBinaries),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(receiveBinary),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(saga);

var debug = (0, _debug2.default)("debugger:web3:sagas");

function fetchTransactionInfo(adapter, _ref) {
  var txHash = _ref.txHash;
  var trace, tx, receipt;
  return _regenerator2.default.wrap(function fetchTransactionInfo$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          debug("inspecting transaction");
          _context.prev = 1;
          _context.next = 4;
          return (0, _effects.apply)(adapter, adapter.getTrace, [txHash]);

        case 4:
          trace = _context.sent;
          _context.next = 13;
          break;

        case 7:
          _context.prev = 7;
          _context.t0 = _context["catch"](1);

          debug("putting error");
          _context.next = 12;
          return (0, _effects.put)(actions.error(_context.t0));

        case 12:
          return _context.abrupt("return");

        case 13:

          debug("got trace");
          _context.next = 16;
          return (0, _effects.put)(actions.receiveTrace(trace));

        case 16:
          _context.next = 18;
          return (0, _effects.apply)(adapter, adapter.getTransaction, [txHash]);

        case 18:
          tx = _context.sent;

          if (!(tx.to && tx.to != "0x0")) {
            _context.next = 23;
            break;
          }

          _context.next = 22;
          return (0, _effects.put)(actions.receiveCall({ address: tx.to }));

        case 22:
          return _context.abrupt("return");

        case 23:
          _context.next = 25;
          return (0, _effects.apply)(adapter, adapter.getReceipt, [txHash]);

        case 25:
          receipt = _context.sent;

          if (!receipt.contractAddress) {
            _context.next = 30;
            break;
          }

          _context.next = 29;
          return (0, _effects.put)(actions.receiveCall({ binary: tx.input }));

        case 29:
          return _context.abrupt("return");

        case 30:
          throw new Error("Could not find contract associated with transaction. " + "Please make sure you're debugging a transaction that executes a " + "contract function or creates a new contract.");

        case 31:
        case "end":
          return _context.stop();
      }
    }
  }, _marked, this, [[1, 7]]);
}

function fetchBinary(adapter, _ref2) {
  var address = _ref2.address;
  var binary;
  return _regenerator2.default.wrap(function fetchBinary$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          debug("fetching binary for %s", address);
          _context2.next = 3;
          return (0, _effects.apply)(adapter, adapter.getDeployedCode, [address]);

        case 3:
          binary = _context2.sent;


          debug("received binary for %s", address);
          _context2.next = 7;
          return (0, _effects.put)(actions.receiveBinary(address, binary));

        case 7:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2, this);
}

function inspectTransaction(txHash, provider) {
  var action, trace, _ref4, address, binary;

  return _regenerator2.default.wrap(function inspectTransaction$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          _context3.next = 2;
          return (0, _effects.put)(actions.init(provider));

        case 2:
          _context3.next = 4;
          return (0, _effects.put)(actions.inspect(txHash));

        case 4:
          _context3.next = 6;
          return (0, _effects.take)(function (_ref3) {
            var type = _ref3.type;
            return type == actions.RECEIVE_TRACE || type == actions.ERROR_WEB3;
          });

        case 6:
          action = _context3.sent;

          debug("action %o", action);

          if (!(action.type == actions.RECEIVE_TRACE)) {
            _context3.next = 13;
            break;
          }

          trace = action.trace;
          debug("received trace");
          _context3.next = 14;
          break;

        case 13:
          return _context3.abrupt("return", { error: action.error });

        case 14:
          _context3.next = 16;
          return (0, _effects.take)(actions.RECEIVE_CALL);

        case 16:
          _ref4 = _context3.sent;
          address = _ref4.address;
          binary = _ref4.binary;

          debug("received call");

          return _context3.abrupt("return", { trace: trace, address: address, binary: binary });

        case 21:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3, this);
}

function obtainBinaries(addresses) {
  var tasks, binaries;
  return _regenerator2.default.wrap(function obtainBinaries$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return (0, _effects.all)(addresses.map(function (address) {
            return (0, _effects.fork)(receiveBinary, address);
          }));

        case 2:
          tasks = _context4.sent;


          debug("requesting binaries");
          _context4.next = 6;
          return (0, _effects.all)(addresses.map(function (address) {
            return (0, _effects.put)(actions.fetchBinary(address));
          }));

        case 6:
          binaries = [];
          _context4.next = 9;
          return (0, _effects.all)(tasks.map(function (task) {
            return (0, _effects.join)(task);
          }));

        case 9:
          binaries = _context4.sent;


          debug("binaries %o", binaries);

          return _context4.abrupt("return", binaries);

        case 12:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4, this);
}

function receiveBinary(address) {
  var _ref5, binary;

  return _regenerator2.default.wrap(function receiveBinary$(_context5) {
    while (1) {
      switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return (0, _effects.take)(function (action) {
            return action.type == actions.RECEIVE_BINARY && action.address == address;
          });

        case 2:
          _ref5 = _context5.sent;
          binary = _ref5.binary;

          debug("got binary for %s", address);

          return _context5.abrupt("return", binary);

        case 6:
        case "end":
          return _context5.stop();
      }
    }
  }, _marked5, this);
}

function saga() {
  var _ref6, provider, adapter;

  return _regenerator2.default.wrap(function saga$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          _context6.next = 2;
          return (0, _effects.take)(actions.INIT_WEB3);

        case 2:
          _ref6 = _context6.sent;
          provider = _ref6.provider;
          adapter = new _adapter2.default(provider);
          _context6.next = 7;
          return (0, _effects.takeEvery)(actions.INSPECT, fetchTransactionInfo, adapter);

        case 7:
          _context6.next = 9;
          return (0, _effects.takeEvery)(actions.FETCH_BINARY, fetchBinary, adapter);

        case 9:
        case "end":
          return _context6.stop();
      }
    }
  }, _marked6, this);
}

exports.default = (0, _helpers.prefixName)("web3", saga);

/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.init = init;
exports.inspect = inspect;
exports.fetchBinary = fetchBinary;
exports.receiveBinary = receiveBinary;
exports.receiveTrace = receiveTrace;
exports.receiveCall = receiveCall;
exports.error = error;
var INIT_WEB3 = exports.INIT_WEB3 = "INIT_WEB3";
function init(provider) {
  return {
    type: INIT_WEB3,
    provider: provider
  };
}

var INSPECT = exports.INSPECT = "INSPECT_TRANSACTION";
function inspect(txHash) {
  return {
    type: INSPECT,
    txHash: txHash
  };
}

var FETCH_BINARY = exports.FETCH_BINARY = "FETCH_BINARY";
function fetchBinary(address) {
  return {
    type: FETCH_BINARY,
    address: address
  };
}

var RECEIVE_BINARY = exports.RECEIVE_BINARY = "RECEIVE_BINARY";
function receiveBinary(address, binary) {
  return {
    type: RECEIVE_BINARY,
    address: address, binary: binary
  };
}

var RECEIVE_TRACE = exports.RECEIVE_TRACE = "RECEIVE_TRACE";
function receiveTrace(trace) {
  return {
    type: RECEIVE_TRACE,
    trace: trace
  };
}

var RECEIVE_CALL = exports.RECEIVE_CALL = "RECEIVE_CALL";
function receiveCall(_ref) {
  var address = _ref.address,
      binary = _ref.binary;

  return {
    type: RECEIVE_CALL,
    address: address, binary: binary
  };
}

var ERROR_WEB3 = exports.ERROR_WEB3 = "ERROR_WEB3";
function error(error) {
  return {
    type: ERROR_WEB3,
    error: error
  };
}

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(4);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _promise = __webpack_require__(28);

var _promise2 = _interopRequireDefault(_promise);

var _asyncToGenerator2 = __webpack_require__(26);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = __webpack_require__(20);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(21);

var _createClass3 = _interopRequireDefault(_createClass2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _web = __webpack_require__(30);

var _web2 = _interopRequireDefault(_web);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:web3:adapter");

var Web3Adapter = function () {
  function Web3Adapter(provider) {
    (0, _classCallCheck3.default)(this, Web3Adapter);

    this.web3 = new _web2.default(provider);
  }

  (0, _createClass3.default)(Web3Adapter, [{
    key: "getTrace",
    value: function () {
      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(txHash) {
        var _this = this;

        return _regenerator2.default.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", new _promise2.default(function (accept, reject) {
                  _this.web3.currentProvider.sendAsync({
                    jsonrpc: "2.0",
                    method: "debug_traceTransaction",
                    params: [txHash, {}],
                    id: new Date().getTime()
                  }, function (err, result) {
                    if (err) return reject(err);
                    if (result.error) return reject(new Error(result.error.message));
                    debug("result: %o", result);
                    accept(result.result.structLogs);
                  });
                }));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getTrace(_x) {
        return _ref.apply(this, arguments);
      }

      return getTrace;
    }()
  }, {
    key: "getTransaction",
    value: function () {
      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(txHash) {
        var _this2 = this;

        return _regenerator2.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", new _promise2.default(function (accept, reject) {
                  _this2.web3.eth.getTransaction(txHash, function (err, tx) {
                    if (err) return reject(err);

                    return accept(tx);
                  });
                }));

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function getTransaction(_x2) {
        return _ref2.apply(this, arguments);
      }

      return getTransaction;
    }()
  }, {
    key: "getReceipt",
    value: function () {
      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3(txHash) {
        var _this3 = this;

        return _regenerator2.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt("return", new _promise2.default(function (accept, reject) {
                  _this3.web3.eth.getTransactionReceipt(txHash, function (err, receipt) {
                    if (err) return reject(err);

                    return accept(receipt);
                  });
                }));

              case 1:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function getReceipt(_x3) {
        return _ref3.apply(this, arguments);
      }

      return getReceipt;
    }()
  }, {
    key: "getDeployedCode",


    /**
     * getDeployedCode - get the deployed code for an address from the client
     * @param  {String} address
     * @return {String}         deployedBinary
     */
    value: function () {
      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(address) {
        var _this4 = this;

        return _regenerator2.default.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                debug("getting deployed code for %s", address);
                return _context4.abrupt("return", new _promise2.default(function (accept, reject) {
                  _this4.web3.eth.getCode(address, function (err, deployedBinary) {
                    if (err) debug("error: %o", err);
                    if (err) return reject(err);
                    debug("got deployed code for %s", address);
                    accept(deployedBinary);
                  });
                }));

              case 2:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function getDeployedCode(_x4) {
        return _ref4.apply(this, arguments);
      }

      return getDeployedCode;
    }()
  }]);
  return Web3Adapter;
}();

exports.default = Web3Adapter;

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FINISHED = exports.ERROR = exports.ACTIVE = exports.WAITING = undefined;
exports.session = session;

var _redux = __webpack_require__(13);

var _reducers = __webpack_require__(65);

var _reducers2 = _interopRequireDefault(_reducers);

var _reducers3 = __webpack_require__(66);

var _reducers4 = _interopRequireDefault(_reducers3);

var _reducers5 = __webpack_require__(68);

var _reducers6 = _interopRequireDefault(_reducers5);

var _reducers7 = __webpack_require__(69);

var _reducers8 = _interopRequireDefault(_reducers7);

var _actions = __webpack_require__(24);

var actions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var WAITING = exports.WAITING = "WAITING";
var ACTIVE = exports.ACTIVE = "ACTIVE";
var ERROR = exports.ERROR = "ERROR";
var FINISHED = exports.FINISHED = "FINISHED";

function session() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : WAITING;
  var action = arguments[1];

  switch (action.type) {
    case actions.READY:
      return ACTIVE;

    case actions.ERROR:
      return { error: action.error };

    case actions.FINISH:
      return FINISHED;

    default:
      return state;
  }
}

var reduceState = (0, _redux.combineReducers)({
  session: session,
  data: _reducers2.default,
  evm: _reducers4.default,
  solidity: _reducers6.default,
  trace: _reducers8.default
});

exports.default = reduceState;

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends4 = __webpack_require__(9);

var _extends5 = _interopRequireDefault(_extends4);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _redux = __webpack_require__(13);

var _actions = __webpack_require__(32);

var actions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:data:reducers");

var DEFAULT_SCOPES = {
  byId: {}
};

function scopes() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPES;
  var action = arguments[1];

  var context;
  var scope;
  var variables;

  switch (action.type) {
    case actions.SCOPE:
      scope = state.byId[action.id] || {};

      return {
        byId: (0, _extends5.default)({}, state.byId, (0, _defineProperty3.default)({}, action.id, (0, _extends5.default)({}, scope, {

          id: action.id,
          sourceId: action.sourceId,
          parentId: action.parentId,
          pointer: action.pointer
        })))
      };

    case actions.DECLARE:
      scope = state.byId[action.node.scope] || {};
      variables = scope.variables || [];

      return {
        byId: (0, _extends5.default)({}, state.byId, (0, _defineProperty3.default)({}, action.node.scope, (0, _extends5.default)({}, scope, {

          variables: [].concat((0, _toConsumableArray3.default)(variables), [{ name: action.node.name, id: action.node.id }])
        })))
      };

    default:
      return state;
  }
}

var info = (0, _redux.combineReducers)({
  scopes: scopes
});

var DEFAULT_ASSIGNMENTS = {
  byId: {}
};

function assignments() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_ASSIGNMENTS;
  var action = arguments[1];

  switch (action.type) {
    case actions.ASSIGN:
      return {
        byId: (0, _extends5.default)({}, state.byId, _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(action.assignments).map(function (_ref) {
          var _ref2 = (0, _slicedToArray3.default)(_ref, 2),
              id = _ref2[0],
              ref = _ref2[1];

          return (0, _defineProperty3.default)({}, id, (0, _extends5.default)({}, state.byId[id], {
            ref: ref
          }));
        })))))
      };

    default:
      return state;
  }
};

var proc = (0, _redux.combineReducers)({
  assignments: assignments
});

var reducer = (0, _redux.combineReducers)({
  info: info,
  proc: proc
});

exports.default = reducer;

/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _set = __webpack_require__(25);

var _set2 = _interopRequireDefault(_set);

var _from = __webpack_require__(67);

var _from2 = _interopRequireDefault(_from);

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends6 = __webpack_require__(9);

var _extends7 = _interopRequireDefault(_extends6);

exports.callstack = callstack;

var _redux = __webpack_require__(13);

var _actions = __webpack_require__(36);

var actions = _interopRequireWildcard(_actions);

var _helpers = __webpack_require__(6);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_CONTEXTS = {
  byContext: {},
  byBinary: {}
};

function contexts() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_CONTEXTS;
  var action = arguments[1];

  switch (action.type) {
    /*
     * Adding a new context
     */
    case actions.ADD_CONTEXT:
      var contractName = action.contractName,
          binary = action.binary;


      if (state.byBinary[binary]) {
        return state;
      }

      var context = (0, _helpers.keccak256)(binary);

      return {
        byContext: (0, _extends7.default)({}, state.byContext, (0, _defineProperty3.default)({}, context, { context: context, binary: binary, contractName: contractName })),

        byBinary: (0, _extends7.default)({}, state.byBinary, (0, _defineProperty3.default)({}, binary, { context: context }))
      };

    /*
     * Default case
     */
    default:
      return state;
  }
}

var DEFAULT_INSTANCES = {
  byAddress: {},
  byContext: {}
};

function instances() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_INSTANCES;
  var action = arguments[1];

  switch (action.type) {
    /*
     * Adding a new address for context
     */
    case actions.ADD_INSTANCE:
      var address = action.address,
          context = action.context,
          binary = action.binary;

      // get known addresses for this context

      var otherInstances = state.byContext[context] || [];
      var otherAddresses = otherInstances.map(function (_ref) {
        var address = _ref.address;
        return address;
      });

      return {
        byAddress: (0, _extends7.default)({}, state.byAddress, (0, _defineProperty3.default)({}, address, { context: context, binary: binary })),

        byContext: (0, _extends7.default)({}, state.byContext, (0, _defineProperty3.default)({}, context, (0, _from2.default)(new _set2.default(otherAddresses).add(address)).map(function (address) {
          return { address: address };
        })))
      };

    /*
     * Default case
     */
    default:
      return state;
  }
}

var info = (0, _redux.combineReducers)({
  contexts: contexts,
  instances: instances
});

function callstack() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var action = arguments[1];

  switch (action.type) {
    case actions.CALL:
      var address = action.address;
      return state.concat([{ address: address }]);

    case actions.CREATE:
      var binary = action.binary;
      return state.concat([{ binary: binary }]);

    case actions.RETURN:
      return state.slice(0, -1); // pop

    default:
      return state;
  };
}

var proc = (0, _redux.combineReducers)({
  callstack: callstack
});

var reducer = (0, _redux.combineReducers)({
  info: info,
  proc: proc
});

exports.default = reducer;

/***/ }),
/* 67 */
/***/ (function(module, exports) {

module.exports = require("babel-runtime/core-js/array/from");

/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends4 = __webpack_require__(9);

var _extends5 = _interopRequireDefault(_extends4);

var _keys = __webpack_require__(23);

var _keys2 = _interopRequireDefault(_keys);

exports.functionDepth = functionDepth;

var _redux = __webpack_require__(13);

var _helpers = __webpack_require__(6);

var _actions = __webpack_require__(35);

var actions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_SOURCES = {
  byId: {}
};

function sources() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SOURCES;
  var action = arguments[1];

  switch (action.type) {
    /*
     * Adding a new source
     */
    case actions.ADD_SOURCE:
      var ast = action.ast,
          source = action.source,
          sourcePath = action.sourcePath;


      var id = (0, _keys2.default)(state.byId).length;

      return {
        byId: (0, _extends5.default)({}, state.byId, (0, _defineProperty3.default)({}, id, {
          id: id,
          ast: ast,
          source: source,
          sourcePath: sourcePath
        }))

        /*
         * Default case
         */
      };default:
      return state;
  }
}

var DEFAULT_SOURCEMAPS = {
  byContext: {}
};

function sourceMaps() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SOURCEMAPS;
  var action = arguments[1];

  switch (action.type) {
    /*
     * Adding a new sourceMap
     */
    case actions.ADD_SOURCEMAP:
      var binary = action.binary,
          sourceMap = action.sourceMap;

      var context = (0, _helpers.keccak256)(binary);

      return {
        byContext: (0, _extends5.default)({}, state.byContext, (0, _defineProperty3.default)({}, context, {
          context: context,
          sourceMap: sourceMap
        }))
      };

    /*
     * Default Case
     */
    default:
      return state;
  }
}

var info = (0, _redux.combineReducers)({
  sources: sources,
  sourceMaps: sourceMaps
});

function functionDepth() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
  var action = arguments[1];

  if (action.type === actions.JUMP) {
    var delta = spelunk(action.jumpDirection);
    return state + delta;
  } else {
    return state;
  }
}

function spelunk(jump) {
  if (jump == "i") {
    return 1;
  } else if (jump == "o") {
    return -1;
  } else {
    return 0;
  }
}

var proc = (0, _redux.combineReducers)({
  functionDepth: functionDepth
});

var reducer = (0, _redux.combineReducers)({
  info: info,
  proc: proc
});

exports.default = reducer;

/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.index = index;
exports.steps = steps;

var _redux = __webpack_require__(13);

var _actions = __webpack_require__(17);

var actions = _interopRequireWildcard(_actions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function index() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var action = arguments[1];

  if (action.type == actions.TOCK || action.type == actions.END_OF_TRACE) {
    return state + 1;
  } else {
    return state;
  }
}

function steps() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var action = arguments[1];

  if (action.type == actions.SAVE_STEPS) {
    return action.steps;
  } else {
    return state;
  }
}

var info = (0, _redux.combineReducers)({
  steps: steps
});

var proc = (0, _redux.combineReducers)({
  index: index
});

var reducer = (0, _redux.combineReducers)({
  info: info,
  proc: proc
});

exports.default = reducer;

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(2);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(3);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(5);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(7);

var _assign2 = _interopRequireDefault(_assign);

var _toConsumableArray2 = __webpack_require__(1);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _debug = __webpack_require__(0);

var _debug2 = _interopRequireDefault(_debug);

var _reselectTree = __webpack_require__(8);

var _selectors = __webpack_require__(11);

var _selectors2 = _interopRequireDefault(_selectors);

var _selectors3 = __webpack_require__(12);

var _selectors4 = _interopRequireDefault(_selectors3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var debug = (0, _debug2.default)("debugger:session:selectors");

var session = (0, _reselectTree.createSelectorTree)({
  /**
   * session.info
   */
  info: {

    /**
     * session.info.affectedInstances
     */
    affectedInstances: (0, _reselectTree.createLeaf)([_selectors2.default.info.instances, _selectors2.default.info.contexts, _selectors4.default.info.sources, _selectors4.default.info.sourceMaps], function (instances, contexts, sources, sourceMaps) {
      return _assign2.default.apply(Object, [{}].concat((0, _toConsumableArray3.default)((0, _entries2.default)(instances).map(function (_ref) {
        var _ref2 = (0, _slicedToArray3.default)(_ref, 2),
            address = _ref2[0],
            context = _ref2[1].context;

        var _contexts$context = contexts[context],
            contractName = _contexts$context.contractName,
            binary = _contexts$context.binary;
        var sourceMap = sourceMaps[context].sourceMap;

        var _ref3 = sourceMap ?
        // look for source ID between second and third colons (HACK)
        sources[sourceMap.match(/^[^:]+:[^:]+:([^:]+):/)[1]] : {},
            source = _ref3.source;

        return (0, _defineProperty3.default)({}, address, {
          contractName: contractName, source: source, binary: binary
        });
      }))));
    })
  }
});

exports.default = session;

/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVidWdnZXIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2svYm9vdHN0cmFwIDVmMmVlYWVkODFjNmZiYWQ5YzAyIiwiZXh0ZXJuYWwgXCJkZWJ1Z1wiIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIiIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCIiLCJleHRlcm5hbCBcImJhYmVsLXJ1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCIiLCJleHRlcm5hbCBcImJhYmVsLXJ1bnRpbWUvcmVnZW5lcmF0b3JcIiIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9lbnRyaWVzXCIiLCJsaWIvaGVscGVycy9pbmRleC5qcyIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9hc3NpZ25cIiIsImV4dGVybmFsIFwicmVzZWxlY3QtdHJlZVwiIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiIiwiZXh0ZXJuYWwgXCJyZWR1eC1zYWdhL2VmZmVjdHNcIiIsImxpYi9ldm0vc2VsZWN0b3JzL2luZGV4LmpzIiwibGliL3NvbGlkaXR5L3NlbGVjdG9ycy9pbmRleC5qcyIsImV4dGVybmFsIFwicmVkdXhcIiIsImxpYi9kYXRhL2RlY29kZS91dGlscy5qcyIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2dldC1pdGVyYXRvclwiIiwibGliL2FzdC9zZWxlY3RvcnMvaW5kZXguanMiLCJsaWIvdHJhY2UvYWN0aW9ucy9pbmRleC5qcyIsImxpYi90cmFjZS9zZWxlY3RvcnMvaW5kZXguanMiLCJleHRlcm5hbCBcImJpZ251bWJlci5qc1wiIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIiIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzXCIiLCJleHRlcm5hbCBcImpzb24tcG9pbnRlclwiIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXNcIiIsImxpYi9zZXNzaW9uL2FjdGlvbnMvaW5kZXguanMiLCJleHRlcm5hbCBcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9zZXRcIiIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIiIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZlwiIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZVwiIiwibGliL2NvbnRyb2xsZXIvYWN0aW9ucy9pbmRleC5qcyIsImV4dGVybmFsIFwid2ViM1wiIiwibGliL2RhdGEvc2FnYXMvaW5kZXguanMiLCJsaWIvZGF0YS9hY3Rpb25zL2luZGV4LmpzIiwibGliL2RhdGEvc2VsZWN0b3JzL2luZGV4LmpzIiwibGliL3RyYWNlL3NhZ2FzL2luZGV4LmpzIiwibGliL3NvbGlkaXR5L2FjdGlvbnMvaW5kZXguanMiLCJsaWIvZXZtL2FjdGlvbnMvaW5kZXguanMiLCIvVXNlcnMvZ25pZGFuL3NyYy93b3JrL2RldmVsb3AtdHJ1ZmZsZS9kZXBlbmRlbmNpZXMvdHJ1ZmZsZS1kZWJ1Z2dlci9kZWJ1Z2dlci5qcyIsImxpYi9kZWJ1Z2dlci5qcyIsImV4dGVybmFsIFwidHJ1ZmZsZS1leHBlY3RcIiIsImxpYi9zZXNzaW9uL2luZGV4LmpzIiwiZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L3ZhbHVlc1wiIiwiZXh0ZXJuYWwgXCJ0cnVmZmxlLXNvbGlkaXR5LXV0aWxzXCIiLCJleHRlcm5hbCBcInRydWZmbGUtY29kZS11dGlsc1wiIiwibGliL2FzdC9tYXAuanMiLCJleHRlcm5hbCBcIm5vZGUtaW50ZXJ2YWwtdHJlZVwiIiwibGliL3N0b3JlL2luZGV4LmpzIiwibGliL3N0b3JlL3Byb2R1Y3Rpb24uanMiLCJsaWIvc3RvcmUvY29tbW9uLmpzIiwiZXh0ZXJuYWwgXCJyZWR1eC1zYWdhXCIiLCJleHRlcm5hbCBcInJlZHV4LWNsaS1sb2dnZXJcIiIsImxpYi9zZXNzaW9uL3NhZ2FzL2luZGV4LmpzIiwibGliL2FzdC9zYWdhcy9pbmRleC5qcyIsImxpYi9kYXRhL2RlY29kZS9pbmRleC5qcyIsImxpYi9kYXRhL2RlY29kZS9tZW1vcnkuanMiLCJsaWIvZGF0YS9kZWNvZGUvc3RvcmFnZS5qcyIsImxpYi9hc3QvYWN0aW9ucy9pbmRleC5qcyIsImxpYi9jb250cm9sbGVyL3NhZ2FzL2luZGV4LmpzIiwibGliL2NvbnRyb2xsZXIvc2VsZWN0b3JzL2luZGV4LmpzIiwibGliL3NvbGlkaXR5L3NhZ2FzL2luZGV4LmpzIiwibGliL2V2bS9zYWdhcy9pbmRleC5qcyIsImxpYi93ZWIzL3NhZ2FzL2luZGV4LmpzIiwibGliL3dlYjMvYWN0aW9ucy9pbmRleC5qcyIsImxpYi93ZWIzL2FkYXB0ZXIuanMiLCJsaWIvc2Vzc2lvbi9yZWR1Y2Vycy5qcyIsImxpYi9kYXRhL3JlZHVjZXJzLmpzIiwibGliL2V2bS9yZWR1Y2Vycy5qcyIsImV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2FycmF5L2Zyb21cIiIsImxpYi9zb2xpZGl0eS9yZWR1Y2Vycy5qcyIsImxpYi90cmFjZS9yZWR1Y2Vycy5qcyIsImxpYi9zZXNzaW9uL3NlbGVjdG9ycy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIkRlYnVnZ2VyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkRlYnVnZ2VyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkRlYnVnZ2VyXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzNyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNWYyZWVhZWQ4MWM2ZmJhZDljMDIiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImRlYnVnXCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5XCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheVwiXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvcmVnZW5lcmF0b3JcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yXCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9lbnRyaWVzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9lbnRyaWVzXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsga2VjY2FrMjU2IGFzIF9rZWNjYWsyNTYsIHRvSGV4U3RyaW5nIH0gZnJvbSBcImxpYi9kYXRhL2RlY29kZS91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJlZml4TmFtZShwcmVmaXgsIGZuKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ25hbWUnLCB7XG4gICAgdmFsdWU6IGAke3ByZWZpeH0uJHtmbi5uYW1lfWAsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xuXG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBAcmV0dXJuIDB4LXByZWZpeCBzdHJpbmcgb2Yga2VjY2FrMjU2IGhhc2hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGtlY2NhazI1NiguLi5hcmdzKSB7XG4gIHJldHVybiB0b0hleFN0cmluZyhfa2VjY2FrMjU2KC4uLmFyZ3MpKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvaGVscGVycy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvYXNzaWduXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9hc3NpZ25cIlxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZXNlbGVjdC10cmVlXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVzZWxlY3QtdHJlZVwiXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIlxuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWR1eC1zYWdhL2VmZmVjdHNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyZWR1eC1zYWdhL2VmZmVjdHNcIlxuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGRlYnVnTW9kdWxlIGZyb20gXCJkZWJ1Z1wiO1xuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOmV2bTpzZWxlY3RvcnNcIik7XG5cbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yVHJlZSwgY3JlYXRlTGVhZiB9IGZyb20gXCJyZXNlbGVjdC10cmVlXCI7XG5cbmltcG9ydCB0cmFjZSBmcm9tIFwibGliL3RyYWNlL3NlbGVjdG9yc1wiO1xuXG5jb25zdCBXT1JEX1NJWkUgPSAweDIwO1xuXG4vKipcbiAqIGNyZWF0ZSBFVk0tbGV2ZWwgc2VsZWN0b3JzIGZvciBhIGdpdmVuIHRyYWNlIHN0ZXAgc2VsZWN0b3JcbiAqIG1heSBzcGVjaWZ5IGFkZGl0aW9uYWwgc2VsZWN0b3JzIHRvIGluY2x1ZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RlcFNlbGVjdG9ycyhzdGVwLCBzdGF0ZSA9IG51bGwpIHtcbiAgbGV0IGJhc2UgPSB7XG4gICAgLyoqXG4gICAgICogLnRyYWNlXG4gICAgICpcbiAgICAgKiB0cmFjZSBzdGVwIGluZm8gcmVsYXRlZCB0byBvcGVyYXRpb25cbiAgICAgKi9cbiAgICB0cmFjZTogY3JlYXRlTGVhZihcbiAgICAgIFtzdGVwXSwgKHtnYXNDb3N0LCBvcCwgcGN9KSA9PiAoe2dhc0Nvc3QsIG9wLCBwY30pXG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIC5wcm9ncmFtQ291bnRlclxuICAgICAqL1xuICAgIHByb2dyYW1Db3VudGVyOiBjcmVhdGVMZWFmKFxuICAgICAgW1wiLi90cmFjZVwiXSwgKHN0ZXApID0+IHN0ZXAucGNcbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogLmlzSnVtcFxuICAgICAqL1xuICAgIGlzSnVtcDogY3JlYXRlTGVhZihcbiAgICAgIFtcIi4vdHJhY2VcIl0sIChzdGVwKSA9PiAoXG4gICAgICAgIHN0ZXAub3AgIT0gXCJKVU1QREVTVFwiICYmIHN0ZXAub3AuaW5kZXhPZihcIkpVTVBcIikgPT0gMFxuICAgICAgKVxuICAgICksXG5cbiAgICAvKipcbiAgICAgKiAuaXNDYWxsXG4gICAgICpcbiAgICAgKiB3aGV0aGVyIHRoZSBvcGNvZGUgd2lsbCBzd2l0Y2ggdG8gYW5vdGhlciBjYWxsaW5nIGNvbnRleHRcbiAgICAgKi9cbiAgICBpc0NhbGw6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL3RyYWNlXCJdLCAoc3RlcCkgPT4gc3RlcC5vcCA9PSBcIkNBTExcIiB8fCBzdGVwLm9wID09IFwiREVMRUdBVEVDQUxMXCJcbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogLmlzQ3JlYXRlXG4gICAgICovXG4gICAgaXNDcmVhdGU6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL3RyYWNlXCJdLCAoc3RlcCkgPT4gc3RlcC5vcCA9PSBcIkNSRUFURVwiXG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIC5pc0hhbHRpbmdcbiAgICAgKlxuICAgICAqIHdoZXRoZXIgdGhlIGluc3RydWN0aW9uIGhhbHRzIG9yIHJldHVybnMgZnJvbSBhIGNhbGxpbmcgY29udGV4dFxuICAgICAqL1xuICAgIGlzSGFsdGluZzogY3JlYXRlTGVhZihcbiAgICAgIFtcIi4vdHJhY2VcIl0sIChzdGVwKSA9PiBzdGVwLm9wID09IFwiU1RPUFwiIHx8IHN0ZXAub3AgPT0gXCJSRVRVUk5cIlxuICAgIClcbiAgfTtcblxuICBpZiAoc3RhdGUpIHtcbiAgICBjb25zdCBpc1JlbGF0aXZlID0gKHBhdGgpID0+IChcbiAgICAgIHR5cGVvZiBwYXRoID09IFwic3RyaW5nXCIgJiYgKFxuICAgICAgICBwYXRoLnN0YXJ0c1dpdGgoXCIuL1wiKSB8fCBwYXRoLnN0YXJ0c1dpdGgoXCIuLi9cIilcbiAgICAgIClcbiAgICApO1xuXG4gICAgaWYgKGlzUmVsYXRpdmUoc3RhdGUpKSB7XG4gICAgICBzdGF0ZSA9IGAuLi8ke3N0YXRlfWA7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihiYXNlLCB7XG4gICAgICAvKipcbiAgICAgICAqIC5jYWxsQWRkcmVzc1xuICAgICAgICpcbiAgICAgICAqIGFkZHJlc3MgdHJhbnNmZXJyZWQgdG8gYnkgY2FsbCBvcGVyYXRpb25cbiAgICAgICAqL1xuICAgICAgY2FsbEFkZHJlc3M6IGNyZWF0ZUxlYWYoXG4gICAgICAgIFtcIi4vaXNDYWxsXCIsIFwiLi90cmFjZVwiLCBzdGF0ZV0sXG5cbiAgICAgICAgKG1hdGNoZXMsIHN0ZXAsIHtzdGFja30pID0+IHtcbiAgICAgICAgICBpZiAoIW1hdGNoZXMpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgbGV0IGFkZHJlc3MgPSBzdGFja1tzdGFjay5sZW5ndGggLSAyXVxuICAgICAgICAgIGFkZHJlc3MgPSBcIjB4XCIgKyBhZGRyZXNzLnN1YnN0cmluZygyNCk7XG4gICAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgICAgIH1cbiAgICAgICksXG5cbiAgICAgIC8qKlxuICAgICAgICogLmNyZWF0ZUJpbmFyeVxuICAgICAgICpcbiAgICAgICAqIGJpbmFyeSBjb2RlIHRvIGV4ZWN1dGUgdmlhIGNyZWF0ZSBvcGVyYXRpb25cbiAgICAgICAqL1xuICAgICAgY3JlYXRlQmluYXJ5OiBjcmVhdGVMZWFmKFxuICAgICAgICBbXCIuL2lzQ3JlYXRlXCIsIFwiLi90cmFjZVwiLCBzdGF0ZV0sXG5cbiAgICAgICAgKG1hdGNoZXMsIHN0ZXAsIHtzdGFjaywgbWVtb3J5fSkgPT4ge1xuICAgICAgICAgIGlmICghbWF0Y2hlcykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAvLyBHZXQgdGhlIGNvZGUgdGhhdCdzIGdvaW5nIHRvIGJlIGNyZWF0ZWQgZnJvbSBtZW1vcnkuXG4gICAgICAgICAgLy8gTm90ZSB3ZSBtdWx0aXBseSBieSAyIGJlY2F1c2UgdGhlc2Ugb2Zmc2V0cyBhcmUgaW4gYnl0ZXMuXG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFyc2VJbnQoc3RhY2tbc3RhY2subGVuZ3RoIC0gMl0sIDE2KSAqIDI7XG4gICAgICAgICAgY29uc3QgbGVuZ3RoID0gcGFyc2VJbnQoc3RhY2tbc3RhY2subGVuZ3RoIC0gM10sIDE2KSAqIDI7XG5cbiAgICAgICAgICByZXR1cm4gXCIweFwiICsgbWVtb3J5LmpvaW4oXCJcIikuc3Vic3RyaW5nKG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGJhc2U7XG59XG5cbmNvbnN0IGV2bSA9IGNyZWF0ZVNlbGVjdG9yVHJlZSh7XG4gIC8qKlxuICAgKiBldm0uc3RhdGVcbiAgICovXG4gIHN0YXRlOiAoc3RhdGUpID0+IHN0YXRlLmV2bSxcblxuICAvKipcbiAgICogZXZtLmluZm9cbiAgICovXG4gIGluZm86IHtcbiAgICAvKipcbiAgICAgKiBldm0uaW5mby5jb250ZXh0c1xuICAgICAqL1xuICAgIGNvbnRleHRzOiBjcmVhdGVMZWFmKFsnL3N0YXRlJ10sIChzdGF0ZSkgPT4gc3RhdGUuaW5mby5jb250ZXh0cy5ieUNvbnRleHQpLFxuXG4gICAgLyoqXG4gICAgICogZXZtLmluZm8uaW5zdGFuY2VzXG4gICAgICovXG4gICAgaW5zdGFuY2VzOiBjcmVhdGVMZWFmKFsnL3N0YXRlJ10sIChzdGF0ZSkgPT4gc3RhdGUuaW5mby5pbnN0YW5jZXMuYnlBZGRyZXNzKSxcblxuICAgIC8qKlxuICAgICAqIGV2bS5pbmZvLmJpbmFyaWVzXG4gICAgICovXG4gICAgYmluYXJpZXM6IHtcbiAgICAgIF86IGNyZWF0ZUxlYWYoWycvc3RhdGUnXSwgKHN0YXRlKSA9PiBzdGF0ZS5pbmZvLmNvbnRleHRzLmJ5QmluYXJ5KSxcblxuICAgICAgLyoqXG4gICAgICAgKiBldm0uaW5mby5iaW5hcmllcy5zZWFyY2hcbiAgICAgICAqXG4gICAgICAgKiByZXR1cm5zIGZ1bmN0aW9uIChiaW5hcnkpID0+IGNvbnRleHRcbiAgICAgICAqL1xuICAgICAgc2VhcmNoOiBjcmVhdGVMZWFmKFsnLi9fJ10sIChiaW5hcmllcykgPT4ge1xuICAgICAgICAvLyBIQUNLIGlnbm9yZSBsaW5rIHJlZmVyZW5jZXMgZm9yIHNlYXJjaFxuICAgICAgICAvLyBsaW5rIHJlZmVyZW5jZXMgY29tZSBpbiB0d28gZm9ybXM6IHdpdGggdW5kZXJzY29yZXMgb3IgYWxsIHplcm9lc1xuICAgICAgICAvLyB0aGUgdW5kZXJzY29yZSBmb3JtYXQgaXMgdXNlZCBieSBUcnVmZmxlIHRvIHJlZmVyZW5jZSBsaW5rcyBieSBuYW1lXG4gICAgICAgIC8vIHplcm9lcyBhcmUgdXNlZCBieSBzb2xjIGRpcmVjdGx5LCBhcyBsaWJyYXJpZXMgaW5qZWN0IHRoZWlyIG93blxuICAgICAgICAvLyBhZGRyZXNzIGF0IENSRUFURS10aW1lXG4gICAgICAgIGNvbnN0IHRvUmVnRXhwID0gKGJpbmFyeSkgPT5cbiAgICAgICAgICBuZXcgUmVnRXhwKGBeJHtiaW5hcnkucmVwbGFjZSgvX18uezM4fXwwezQwfS9nLCBcIi57NDB9XCIpfWApXG5cbiAgICAgICAgbGV0IG1hdGNoZXJzID0gT2JqZWN0LmVudHJpZXMoYmluYXJpZXMpXG4gICAgICAgICAgLm1hcCggKFtiaW5hcnksIHtjb250ZXh0fV0pID0+ICh7XG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgcmVnZXg6IHRvUmVnRXhwKGJpbmFyeSlcbiAgICAgICAgICB9KSlcblxuICAgICAgICByZXR1cm4gKGJpbmFyeSkgPT4gbWF0Y2hlcnNcbiAgICAgICAgICAuZmlsdGVyKCAoeyBjb250ZXh0LCByZWdleCB9KSA9PiBiaW5hcnkubWF0Y2gocmVnZXgpIClcbiAgICAgICAgICAubWFwKCAoeyBjb250ZXh0IH0pID0+ICh7IGNvbnRleHQgfSkgKVxuICAgICAgICAgIFswXSB8fCBudWxsO1xuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIGV2bS5jdXJyZW50XG4gICAqL1xuICBjdXJyZW50OiB7XG5cbiAgICAvKipcbiAgICAgKiBldm0uY3VycmVudC5jYWxsc3RhY2tcbiAgICAgKi9cbiAgICBjYWxsc3RhY2s6IChzdGF0ZSkgPT4gc3RhdGUuZXZtLnByb2MuY2FsbHN0YWNrLFxuXG4gICAgLyoqXG4gICAgICogZXZtLmN1cnJlbnQuY2FsbFxuICAgICAqL1xuICAgIGNhbGw6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL2NhbGxzdGFja1wiXSxcblxuICAgICAgKHN0YWNrKSA9PiBzdGFjay5sZW5ndGggPyBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA6IHt9XG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIGV2bS5jdXJyZW50LmNvbnRleHRcbiAgICAgKi9cbiAgICBjb250ZXh0OiBjcmVhdGVMZWFmKFxuICAgICAgW1wiLi9jYWxsXCIsIFwiL2luZm8vaW5zdGFuY2VzXCIsIFwiL2luZm8vYmluYXJpZXMvc2VhcmNoXCIsIFwiL2luZm8vY29udGV4dHNcIl0sXG5cbiAgICAgICh7YWRkcmVzcywgYmluYXJ5fSwgaW5zdGFuY2VzLCBzZWFyY2gsIGNvbnRleHRzKSA9PiB7XG4gICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgIGlmIChhZGRyZXNzKSB7XG4gICAgICAgICAgcmVjb3JkID0gaW5zdGFuY2VzW2FkZHJlc3NdO1xuICAgICAgICAgIGJpbmFyeSA9IHJlY29yZC5iaW5hcnlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWNvcmQgPSBzZWFyY2goYmluYXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb250ZXh0ID0gY29udGV4dHNbKHJlY29yZCB8fCB7fSkuY29udGV4dF07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICAgIGJpbmFyeVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIGV2bS5jdXJyZW50LnN0YXRlXG4gICAgICpcbiAgICAgKiBldm0gc3RhdGUgaW5mbzogYXMgb2YgbGFzdCBvcGVyYXRpb24sIGJlZm9yZSBvcCBkZWZpbmVkIGluIHN0ZXBcbiAgICAgKi9cbiAgICBzdGF0ZTogT2JqZWN0LmFzc2lnbih7fSwgLi4uKFxuICAgICAgW1xuICAgICAgICBcImRlcHRoXCIsXG4gICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgXCJnYXNcIixcbiAgICAgICAgXCJtZW1vcnlcIixcbiAgICAgICAgXCJzdGFja1wiLFxuICAgICAgICBcInN0b3JhZ2VcIlxuICAgICAgXS5tYXAoIChwYXJhbSkgPT4gKHtcbiAgICAgICAgW3BhcmFtXTogY3JlYXRlTGVhZihbdHJhY2Uuc3RlcF0sIChzdGVwKSA9PiBzdGVwW3BhcmFtXSlcbiAgICAgIH0pKVxuICAgICkpLFxuXG4gICAgLyoqXG4gICAgICogZXZtLmN1cnJlbnQuc3RlcFxuICAgICAqL1xuICAgIHN0ZXA6IGNyZWF0ZVN0ZXBTZWxlY3RvcnModHJhY2Uuc3RlcCwgXCIuL3N0YXRlXCIpXG4gIH0sXG5cbiAgLyoqXG4gICAqIGV2bS5uZXh0XG4gICAqL1xuICBuZXh0OiB7XG5cbiAgICAvKipcbiAgICAgKiBldm0ubmV4dC5zdGF0ZVxuICAgICAqXG4gICAgICogZXZtIHN0YXRlIGFzIGEgcmVzdWx0IG9mIG5leHQgc3RlcCBvcGVyYXRpb25cbiAgICAgKi9cbiAgICBzdGF0ZTogT2JqZWN0LmFzc2lnbih7fSwgLi4uKFxuICAgICAgW1xuICAgICAgICBcImRlcHRoXCIsXG4gICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgXCJnYXNcIixcbiAgICAgICAgXCJtZW1vcnlcIixcbiAgICAgICAgXCJzdGFja1wiLFxuICAgICAgICBcInN0b3JhZ2VcIlxuICAgICAgXS5tYXAoIChwYXJhbSkgPT4gKHtcbiAgICAgICAgW3BhcmFtXTogY3JlYXRlTGVhZihbdHJhY2UubmV4dF0sIChzdGVwKSA9PiBzdGVwW3BhcmFtXSlcbiAgICAgIH0pKVxuICAgICkpLFxuXG4gICAgc3RlcDogY3JlYXRlU3RlcFNlbGVjdG9ycyh0cmFjZS5uZXh0LCBcIi4vc3RhdGVcIilcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGV2bTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZXZtL3NlbGVjdG9ycy9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpzb2xpZGl0eTpzZWxlY3RvcnNcIik7XG5cbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yVHJlZSwgY3JlYXRlTGVhZiB9IGZyb20gXCJyZXNlbGVjdC10cmVlXCI7XG5pbXBvcnQgU29saWRpdHlVdGlscyBmcm9tIFwidHJ1ZmZsZS1zb2xpZGl0eS11dGlsc1wiO1xuaW1wb3J0IENvZGVVdGlscyBmcm9tIFwidHJ1ZmZsZS1jb2RlLXV0aWxzXCI7XG5cbmltcG9ydCBldm0gZnJvbSBcImxpYi9ldm0vc2VsZWN0b3JzXCI7XG5cbmZ1bmN0aW9uIGdldFNvdXJjZVJhbmdlKGluc3RydWN0aW9uID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogaW5zdHJ1Y3Rpb24uc3RhcnQgfHwgMCxcbiAgICBsZW5ndGg6IGluc3RydWN0aW9uLmxlbmd0aCB8fCAwLFxuICAgIGxpbmVzOiBpbnN0cnVjdGlvbi5yYW5nZSB8fCB7XG4gICAgICBzdGFydDoge1xuICAgICAgICBsaW5lOiAwLCBjb2x1bW46IDBcbiAgICAgIH0sXG4gICAgICBlbmQ6IHtcbiAgICAgICAgbGluZTogMCwgY29sdW1uOiAwXG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5sZXQgc29saWRpdHkgPSBjcmVhdGVTZWxlY3RvclRyZWUoe1xuICAvKipcbiAgICogc29saWRpdHkuc3RhdGVcbiAgICovXG4gIHN0YXRlOiAoc3RhdGUpID0+IHN0YXRlLnNvbGlkaXR5LFxuXG4gIC8qKlxuICAgKiBzb2xpZGl0eS5pbmZvXG4gICAqL1xuICBpbmZvOiB7XG4gICAgLyoqXG4gICAgICogc29saWRpdHkuaW5mby5zb3VyY2VzXG4gICAgICovXG4gICAgc291cmNlczogY3JlYXRlTGVhZihbJy9zdGF0ZSddLCAoc3RhdGUpID0+IHN0YXRlLmluZm8uc291cmNlcy5ieUlkKSxcblxuICAgIC8qKlxuICAgICAqIHNvbGlkaXR5LmluZm8uc291cmNlTWFwc1xuICAgICAqL1xuICAgIHNvdXJjZU1hcHM6IGNyZWF0ZUxlYWYoWycvc3RhdGUnXSwgKHN0YXRlKSA9PiBzdGF0ZS5pbmZvLnNvdXJjZU1hcHMuYnlDb250ZXh0KVxuICB9LFxuXG4gIC8qKlxuICAgKiBzb2xpZGl0eS5jdXJyZW50XG4gICAqL1xuICBjdXJyZW50OiB7XG5cbiAgICAvKipcbiAgICAgKiBzb2xpZGl0eS5jdXJyZW50LnNvdXJjZU1hcFxuICAgICAqL1xuICAgIHNvdXJjZU1hcDogY3JlYXRlTGVhZihcbiAgICAgIFtldm0uY3VycmVudC5jb250ZXh0LCBcIi9pbmZvL3NvdXJjZU1hcHNcIl0sXG5cbiAgICAgICh7Y29udGV4dH0sIHNvdXJjZU1hcHMpID0+IHNvdXJjZU1hcHNbY29udGV4dF0gfHwge31cbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogc29saWRpdHkuY3VycmVudC5mdW5jdGlvbkRlcHRoXG4gICAgICovXG4gICAgZnVuY3Rpb25EZXB0aDogKHN0YXRlKSA9PiBzdGF0ZS5zb2xpZGl0eS5wcm9jLmZ1bmN0aW9uRGVwdGgsXG5cbiAgICAvKipcbiAgICAgKiBzb2xpZGl0eS5jdXJyZW50Lmluc3RydWN0aW9uc1xuICAgICAqL1xuICAgIGluc3RydWN0aW9uczogY3JlYXRlTGVhZihcbiAgICAgIFtcIi9pbmZvL3NvdXJjZXNcIiwgZXZtLmN1cnJlbnQuY29udGV4dCwgXCIuL3NvdXJjZU1hcFwiXSxcblxuICAgICAgKHNvdXJjZXMsIHtiaW5hcnl9LCB7c291cmNlTWFwfSkgPT4ge1xuICAgICAgICBsZXQgaW5zdHJ1Y3Rpb25zID0gQ29kZVV0aWxzLnBhcnNlQ29kZShiaW5hcnkpO1xuXG4gICAgICAgIGlmICghc291cmNlTWFwKSB7XG4gICAgICAgICAgLy8gTGV0J3MgY3JlYXRlIGEgc291cmNlIG1hcCB0byB1c2Ugc2luY2Ugbm9uZSBleGlzdHMuIFRoaXMgc291cmNlIG1hcFxuICAgICAgICAgIC8vIG1hcHMganVzdCBhcyBtYW55IHJhbmdlcyBhcyB0aGVyZSBhcmUgaW5zdHJ1Y3Rpb25zLCBhbmQgZW5zdXJlcyBldmVyeVxuICAgICAgICAgIC8vIGluc3RydWN0aW9uIGlzIG1hcmtlZCBhcyBcImp1bXBpbmcgb3V0XCIuIFRoaXMgd2lsbCBlbnN1cmUgYWxsXG4gICAgICAgICAgLy8gYXZhaWxhYmxlIGRlYnVnZ2VyIGNvbW1hbmRzIHN0ZXAgb25lIGluc3RydWN0aW9uIGF0IGEgdGltZS5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFRoaXMgaXMga2luZG9mIGEgaGFjazsgcGVyaGFwcyB0aGlzIHNob3VsZCBiZSBicm9rZW4gb3V0IGludG8gc2VwYXJhdGVcbiAgICAgICAgICAvLyBjb250ZXh0IHR5cGVzLiBUT0RPXG4gICAgICAgICAgc291cmNlTWFwID0gXCJcIjtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3RydWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc291cmNlTWFwICs9IGkgKyBcIjpcIiArIGkgKyBcIjoxOi0xO1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsaW5lQW5kQ29sdW1uTWFwcGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICAgIC4uLk9iamVjdC5lbnRyaWVzKHNvdXJjZXMpLm1hcChcbiAgICAgICAgICAgIChbaWQsIHtzb3VyY2V9XSkgPT4gKHtcbiAgICAgICAgICAgICAgW2lkXTogU29saWRpdHlVdGlscy5nZXRDaGFyYWN0ZXJPZmZzZXRUb0xpbmVBbmRDb2x1bW5NYXBwaW5nKHNvdXJjZSB8fCBcIlwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHZhciBodW1hblJlYWRhYmxlU291cmNlTWFwID0gU29saWRpdHlVdGlscy5nZXRIdW1hblJlYWRhYmxlU291cmNlTWFwKHNvdXJjZU1hcCk7XG5cbiAgICAgICAgbGV0IHByaW1hcnlGaWxlID0gaHVtYW5SZWFkYWJsZVNvdXJjZU1hcFswXS5maWxlO1xuICAgICAgICBkZWJ1ZyhcInByaW1hcnlGaWxlICVvXCIsIHByaW1hcnlGaWxlKTtcblxuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgLm1hcCggKGluc3RydWN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gbG9va3VwIHNvdXJjZSBtYXAgYnkgaW5kZXggYW5kIGFkZCBgaW5kZXhgIHByb3BlcnR5IHRvXG4gICAgICAgICAgICAvLyBpbnN0cnVjdGlvblxuICAgICAgICAgICAgLy9cblxuICAgICAgICAgICAgY29uc3Qgc291cmNlTWFwID0gaHVtYW5SZWFkYWJsZVNvdXJjZU1hcFtpbmRleF0gfHwge307XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGluc3RydWN0aW9uOiB7IC4uLmluc3RydWN0aW9uLCBpbmRleCB9LFxuICAgICAgICAgICAgICBzb3VyY2VNYXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLm1hcCggKHsgaW5zdHJ1Y3Rpb24sIHNvdXJjZU1hcH0pID0+IHtcbiAgICAgICAgICAgIC8vIGFkZCBzb3VyY2UgbWFwIGluZm9ybWF0aW9uIHRvIGluc3RydWN0aW9uLCBvciBkZWZhdWx0c1xuICAgICAgICAgICAgLy9cblxuICAgICAgICAgICAgY29uc3QgeyBqdW1wLCBzdGFydCA9IDAsIGxlbmd0aCA9IDAsIGZpbGUgPSBwcmltYXJ5RmlsZSB9ID0gc291cmNlTWFwO1xuICAgICAgICAgICAgY29uc3QgbGluZUFuZENvbHVtbk1hcHBpbmcgPSBsaW5lQW5kQ29sdW1uTWFwcGluZ3NbZmlsZV0gfHwge307XG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IHtcbiAgICAgICAgICAgICAgc3RhcnQ6IGxpbmVBbmRDb2x1bW5NYXBwaW5nW3N0YXJ0XSB8fFxuICAgICAgICAgICAgICAgIHsgbGluZTogbnVsbCwgY29sdW1uOiBudWxsIH0sXG4gICAgICAgICAgICAgIGVuZDogbGluZUFuZENvbHVtbk1hcHBpbmdbc3RhcnQgKyBsZW5ndGhdIHx8XG4gICAgICAgICAgICAgICAgeyBsaW5lOiBudWxsLCBjb2x1bW46IG51bGwgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LmxpbmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZGVidWcoXCJzb3VyY2VNYXAgJW9cIiwgc291cmNlTWFwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uaW5zdHJ1Y3Rpb24sXG5cbiAgICAgICAgICAgICAganVtcCxcbiAgICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgcmFuZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogc29saWRpdHkuY3VycmVudC5pbnN0cnVjdGlvbkF0UHJvZ3JhbUNvdW50ZXJcbiAgICAgKi9cbiAgICBpbnN0cnVjdGlvbkF0UHJvZ3JhbUNvdW50ZXI6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL2luc3RydWN0aW9uc1wiXSxcblxuICAgICAgKGluc3RydWN0aW9ucykgPT4ge1xuICAgICAgICBsZXQgbWFwID0gW107XG4gICAgICAgIGluc3RydWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGluc3RydWN0aW9uKSB7XG4gICAgICAgICAgbWFwW2luc3RydWN0aW9uLnBjXSA9IGluc3RydWN0aW9uO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaWxsIGluIGdhcHMgaW4gbWFwIGJ5IGRlZmF1bHRpbmcgdG8gdGhlIGxhc3Qga25vd24gaW5zdHJ1Y3Rpb25cbiAgICAgICAgbGV0IGxhc3RTZWVuID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgW3BjLCBpbnN0cnVjdGlvbl0gb2YgbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChpbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgbGFzdFNlZW4gPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFwW3BjXSA9IGxhc3RTZWVuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFwO1xuICAgICAgfVxuICAgICksXG5cbiAgICAvKipcbiAgICAgKiBzb2xpZGl0eS5jdXJyZW50Lmluc3RydWN0aW9uXG4gICAgICovXG4gICAgaW5zdHJ1Y3Rpb246IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL2luc3RydWN0aW9uQXRQcm9ncmFtQ291bnRlclwiLCBldm0uY3VycmVudC5zdGVwLnByb2dyYW1Db3VudGVyXSxcblxuICAgICAgKG1hcCwgcGMpID0+IG1hcFtwY10gfHwge31cbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogc29saWRpdHkuY3VycmVudC5zb3VyY2VcbiAgICAgKi9cbiAgICBzb3VyY2U6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIvaW5mby9zb3VyY2VzXCIsIFwiLi9pbnN0cnVjdGlvblwiXSxcblxuICAgICAgKHNvdXJjZXMsIHtmaWxlOiBpZH0pID0+IHNvdXJjZXNbaWRdIHx8IHt9XG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIHNvbGlkaXR5LmN1cnJlbnQuc291cmNlUmFuZ2VcbiAgICAgKi9cbiAgICBzb3VyY2VSYW5nZTogY3JlYXRlTGVhZihbXCIuL2luc3RydWN0aW9uXCJdLCBnZXRTb3VyY2VSYW5nZSksXG5cbiAgICAvKipcbiAgICAgKiBzb2xpZGl0eS5jdXJyZW50LmlzU291cmNlUmFuZ2VGaW5hbFxuICAgICAqL1xuICAgIGlzU291cmNlUmFuZ2VGaW5hbDogY3JlYXRlTGVhZihcbiAgICAgIFtcbiAgICAgICAgXCIuL2luc3RydWN0aW9uQXRQcm9ncmFtQ291bnRlclwiLFxuICAgICAgICBldm0uY3VycmVudC5zdGVwLnByb2dyYW1Db3VudGVyLFxuICAgICAgICBldm0ubmV4dC5zdGVwLnByb2dyYW1Db3VudGVyXG4gICAgICBdLFxuXG4gICAgICAobWFwLCBjdXJyZW50LCBuZXh0KSA9PiB7XG4gICAgICAgIGlmICghbWFwW25leHRdKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50ID0gbWFwW2N1cnJlbnRdO1xuICAgICAgICBuZXh0ID0gbWFwW25leHRdO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgY3VycmVudC5zdGFydCAhPSBuZXh0LnN0YXJ0IHx8XG4gICAgICAgICAgY3VycmVudC5sZW5ndGggIT0gbmV4dC5sZW5ndGggfHxcbiAgICAgICAgICBjdXJyZW50LmZpbGUgIT0gbmV4dC5maWxlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIHNvbGlkaXR5LmN1cnJlbnQuaXNNdWx0aWxpbmVcbiAgICAgKi9cbiAgICBpc011bHRpbGluZTogY3JlYXRlTGVhZihcbiAgICAgIFtcIi4vc291cmNlUmFuZ2VcIl0sXG5cbiAgICAgICgge2xpbmVzfSApID0+IGxpbmVzLnN0YXJ0LmxpbmUgIT0gbGluZXMuZW5kLmxpbmVcbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogc29saWRpdHkuY3VycmVudC53aWxsSnVtcFxuICAgICAqL1xuICAgIHdpbGxKdW1wOiBjcmVhdGVMZWFmKFtldm0uY3VycmVudC5zdGVwLmlzSnVtcF0sIChpc0p1bXApID0+IGlzSnVtcCksXG5cbiAgICAvKipcbiAgICAgKiBzb2xpZGl0eS5jdXJyZW50Lmp1bXBEaXJlY3Rpb25cbiAgICAgKi9cbiAgICBqdW1wRGlyZWN0aW9uOiBjcmVhdGVMZWFmKFxuICAgICAgW1wiLi9pbnN0cnVjdGlvblwiXSwgKGkgPSB7fSkgPT4gKGkuanVtcCB8fCBcIi1cIilcbiAgICApXG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzb2xpZGl0eTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc29saWRpdHkvc2VsZWN0b3JzL2luZGV4LmpzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVkdXhcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyZWR1eFwiXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6ZGF0YTpkZWNvZGU6dXRpbHNcIik7XG5cbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gXCJiaWdudW1iZXIuanNcIjtcbmltcG9ydCBXZWIzIGZyb20gXCJ3ZWIzXCI7XG5cbmV4cG9ydCBjb25zdCBXT1JEX1NJWkUgPSAweDIwO1xuZXhwb3J0IGNvbnN0IE1BWF9XT1JEID0gbmV3IEJpZ051bWJlcigyKS5wb3coMjU2KS5taW51cygxKTtcblxuLyoqXG4gKiByZWN1cnNpdmVseSBjb252ZXJ0cyBiaWcgbnVtYmVycyBpbnRvIHNvbWV0aGluZyBuaWNlciB0byBsb29rIGF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkJpZ051bWJlcnModmFsdWUpIHtcbiAgaWYgKEJpZ051bWJlci5pc0JpZ051bWJlcih2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUudG9OdW1iZXIoKTtcblxuICB9IGVsc2UgaWYgKHZhbHVlICYmIHZhbHVlLm1hcCAhPSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdmFsdWUubWFwKCAoaW5uZXIpID0+IGNsZWFuQmlnTnVtYmVycyhpbm5lcikgKTtcblxuICB9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSwgLi4uT2JqZWN0LmVudHJpZXModmFsdWUpXG4gICAgICAgIC5tYXAoIChba2V5LCBpbm5lcl0pID0+ICh7IFtrZXldOiBjbGVhbkJpZ051bWJlcnMoaW5uZXIpIH0pIClcbiAgICApO1xuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKSB7XG4gIHJldHVybiBkZWZpbml0aW9uLnR5cGVEZXNjcmlwdGlvbnMudHlwZUlkZW50aWZpZXI7XG59XG5cbi8qKlxuICogcmV0dXJucyBiYXNpYyB0eXBlIGNsYXNzIGZvciBhIHZhcmlhYmxlIGRlZmluaXRpb24gbm9kZVxuICogZS5nLjpcbiAqICBgdF91aW50MjU2YCBiZWNvbWVzIGB1aW50YFxuICogIGB0X3N0cnVjdCRfVGhpbmdfJDIwX21lbW9yeV9wdHJgIGJlY29tZXMgYHN0cnVjdGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHR5cGVDbGFzcyhkZWZpbml0aW9uKSB7XG4gIHJldHVybiB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKS5tYXRjaCgvdF8oW14kXzAtOV0rKS8pWzFdO1xufVxuXG4vKipcbiAqIEFsbG9jYXRlIHN0b3JhZ2UgZm9yIGdpdmVuIHZhcmlhYmxlIGRlY2xhcmF0aW9uc1xuICpcbiAqIFBvc3Rjb25kaXRpb246IHN0YXJ0cyBhIG5ldyBzbG90IGFuZCBvY2N1cGllcyB3aG9sZSBzbG90c1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsb2NhdGVEZWNsYXJhdGlvbnMoXG4gIGRlY2xhcmF0aW9ucyxcbiAgcmVmcyxcbiAgc2xvdCA9IDAsXG4gIGluZGV4ID0gV09SRF9TSVpFIC0gMSxcbiAgcGF0aCA9IFtdXG4pIHtcbiAgaWYgKGluZGV4IDwgV09SRF9TSVpFIC0gMSkgeyAgLy8gc3RhcnRzIGEgbmV3IHNsb3RcbiAgICBzbG90Kys7XG4gICAgaW5kZXggPSBXT1JEX1NJWkUgLSAxO1xuICB9XG5cbiAgbGV0IHBhcmVudEZyb20gPSB7IHNsb3QsIGluZGV4OiAwIH07XG4gIHZhciBwYXJlbnRUbyA9IHsgc2xvdCwgaW5kZXg6IFdPUkRfU0laRSAtIDEgfTtcbiAgbGV0IG1hcHBpbmcgPSB7fTtcblxuICBmb3IgKGxldCBkZWNsYXJhdGlvbiBvZiBkZWNsYXJhdGlvbnMpIHtcbiAgICBsZXQgeyBmcm9tLCB0bywgbmV4dCwgY2hpbGRyZW4gfSA9XG4gICAgICBhbGxvY2F0ZURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uLCByZWZzLCBzbG90LCBpbmRleCk7XG5cbiAgICBtYXBwaW5nW2RlY2xhcmF0aW9uLmlkXSA9IHsgZnJvbSwgdG8sIG5hbWU6IGRlY2xhcmF0aW9uLm5hbWUgfTtcbiAgICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWFwcGluZ1tkZWNsYXJhdGlvbi5pZF0uY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB9XG5cbiAgICBzbG90ID0gbmV4dC5zbG90O1xuICAgIGluZGV4ID0gbmV4dC5pbmRleDtcblxuICAgIHBhcmVudFRvID0geyBzbG90OiB0by5zbG90LCBpbmRleDogV09SRF9TSVpFIC0gMSB9O1xuICB9XG5cbiAgaWYgKGluZGV4IDwgV09SRF9TSVpFIC0gMSkge1xuICAgIHNsb3QrKztcbiAgICBpbmRleCA9IFdPUkRfU0laRSAtIDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZyb206IHBhcmVudEZyb20sXG4gICAgdG86IHBhcmVudFRvLFxuICAgIG5leHQ6IHsgc2xvdCwgaW5kZXggfSxcbiAgICBjaGlsZHJlbjogbWFwcGluZ1xuICB9O1xufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZVZhbHVlKHNsb3QsIGluZGV4LCBieXRlcykge1xuICBsZXQgZnJvbSA9IGluZGV4IC0gYnl0ZXMgKyAxID49IDAgP1xuICAgIHsgc2xvdCwgaW5kZXg6IGluZGV4IC0gYnl0ZXMgKyAxIH0gOlxuICAgIHsgc2xvdDogc2xvdCArIDEsIGluZGV4OiBXT1JEX1NJWkUgLSBieXRlcyB9O1xuXG4gIGxldCB0byA9IHsgc2xvdDogZnJvbS5zbG90LCBpbmRleDogZnJvbS5pbmRleCArIGJ5dGVzIC0gMSB9O1xuXG4gIGxldCBuZXh0ID0gZnJvbS5pbmRleCA9PSAwID9cbiAgICB7IHNsb3Q6IGZyb20uc2xvdCArIDEsIGluZGV4OiBXT1JEX1NJWkUgLSAxIH0gOlxuICAgIHsgc2xvdDogZnJvbS5zbG90LCBpbmRleDogZnJvbS5pbmRleCAtIDEgfTtcblxuICByZXR1cm4geyBmcm9tLCB0bywgbmV4dCB9O1xufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uLCByZWZzLCBzbG90LCBpbmRleCkge1xuICBsZXQgZGVmaW5pdGlvbiA9IHJlZnNbZGVjbGFyYXRpb24uaWRdLmRlZmluaXRpb247XG4gIHZhciBieXRlU2l6ZSA9IHN0b3JhZ2VTaXplKGRlZmluaXRpb24pOyAgLy8geXVtXG5cbiAgaWYgKHR5cGVDbGFzcyhkZWZpbml0aW9uKSAhPSBcInN0cnVjdFwiKSB7XG4gICAgcmV0dXJuIGFsbG9jYXRlVmFsdWUoc2xvdCwgaW5kZXgsIGJ5dGVTaXplKTtcbiAgfVxuXG4gIGxldCBzdHJ1Y3QgPSByZWZzW2RlZmluaXRpb24udHlwZU5hbWUucmVmZXJlbmNlZERlY2xhcmF0aW9uXTtcbiAgZGVidWcoXCJzdHJ1Y3Q6ICVPXCIsIHN0cnVjdCk7XG5cbiAgbGV0IHJlc3VsdCA9ICBhbGxvY2F0ZURlY2xhcmF0aW9ucyhzdHJ1Y3QudmFyaWFibGVzIHx8IFtdLCByZWZzLCBzbG90LCBpbmRleCk7XG4gIGRlYnVnKFwic3RydWN0IHJlc3VsdCAlb1wiLCByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIGUuZy4gdWludDQ4IC0+IDZcbiAqIEByZXR1cm4gc2l6ZSBpbiBieXRlcyBmb3IgZXhwbGljaXQgdHlwZSBzaXplLCBvciBgbnVsbGAgaWYgbm90IHN0YXRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BlY2lmaWVkU2l6ZShkZWZpbml0aW9uKSB7XG4gIGxldCBzcGVjaWZpZWQgPSB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKS5tYXRjaCgvdF9bYS16XSsoWzAtOV0rKS8pO1xuXG4gIGlmICghc3BlY2lmaWVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgbnVtID0gc3BlY2lmaWVkWzFdO1xuXG4gIHN3aXRjaCAodHlwZUNsYXNzKGRlZmluaXRpb24pKSB7XG4gICAgY2FzZSBcImludFwiOlxuICAgIGNhc2UgXCJ1aW50XCI6XG4gICAgICByZXR1cm4gbnVtIC8gODtcblxuICAgIGNhc2UgXCJieXRlc1wiOlxuICAgICAgcmV0dXJuIG51bTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICBkZWJ1ZyhcIlVua25vd24gdHlwZSBmb3Igc2l6ZSBzcGVjaWZpY2F0aW9uOiAlc1wiLCB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JhZ2VTaXplKGRlZmluaXRpb24pIHtcbiAgc3dpdGNoICh0eXBlQ2xhc3MoZGVmaW5pdGlvbikpIHtcbiAgICBjYXNlIFwiYm9vbFwiOlxuICAgICAgcmV0dXJuIDE7XG5cbiAgICBjYXNlIFwiYWRkcmVzc1wiOlxuICAgICAgcmV0dXJuIDIwO1xuXG4gICAgY2FzZSBcImludFwiOlxuICAgIGNhc2UgXCJ1aW50XCI6XG4gICAgICAvLyBpcyB0aGlzIGEgSEFDSz8gKFwiMjU2XCIgLyA4KVxuICAgICAgcmV0dXJuIHR5cGVJZGVudGlmaWVyKGRlZmluaXRpb24pLm1hdGNoKC90X1thLXpdKyhbMC05XSspLylbMV0gLyA4O1xuXG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgIGNhc2UgXCJieXRlc1wiOlxuICAgIGNhc2UgXCJhcnJheVwiOlxuICAgICAgcmV0dXJuIFdPUkRfU0laRTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWZlcmVuY2UoZGVmaW5pdGlvbikge1xuICByZXR1cm4gdHlwZUlkZW50aWZpZXIoZGVmaW5pdGlvbikubWF0Y2goL18obWVtb3J5fHN0b3JhZ2UpKF9wdHIpPyQvKSAhPSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVmZXJlbmNlVHlwZShkZWZpbml0aW9uKSB7XG4gIHJldHVybiB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKS5tYXRjaCgvXyhbXl9dKykoX3B0cik/JC8pWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZURlZmluaXRpb24oZGVmaW5pdGlvbikge1xuICBsZXQgYmFzZUlkZW50aWZpZXIgPSB0eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKVxuICAgIC8vIGZpcnN0IGRvbGxhciBzaWduICAgICBsYXN0IGRvbGxhciBzaWduXG4gICAgLy8gICBgLS0tLS0tLS0tLiAgICAgICAsLS0tJ1xuICAgIC5tYXRjaCgvXlteJF0rXFwkXyguKylfXFwkW14kXSskLylbMV1cbiAgICAvLyAgICAgICAgICAgICAgYC0tLS0nIGdyZWVkeSBtYXRjaFxuXG4gIC8vIEhBQ0sgLSBpbnRlcm5hbCB0eXBlcyBmb3IgbWVtb3J5IG9yIHN0b3JhZ2UgYWxzbyBzZWVtIHRvIGJlIHBvaW50ZXJzXG4gIGlmIChiYXNlSWRlbnRpZmllci5tYXRjaCgvXyhtZW1vcnl8c3RvcmFnZSkkLykgIT0gbnVsbCkge1xuICAgIGJhc2VJZGVudGlmaWVyID0gYCR7YmFzZUlkZW50aWZpZXJ9X3B0cmA7XG4gIH1cblxuICAvLyBhbm90aGVyIEhBQ0sgLSB3ZSBnZXQgYXdheSB3aXRoIGl0IGJlY2F1c2V3ZSdyZSBvbmx5IHVzaW5nIHRoYXQgb25lIHByb3BlcnR5XG4gIHJldHVybiB7XG4gICAgdHlwZURlc2NyaXB0aW9uczoge1xuICAgICAgdHlwZUlkZW50aWZpZXI6IGJhc2VJZGVudGlmaWVyXG4gICAgfVxuICB9O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB0b0JpZ051bWJlcihieXRlcykge1xuICBpZiAoYnl0ZXMgPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYnl0ZXMgPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKGJ5dGVzLCAxNik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGJ5dGVzID09IFwibnVtYmVyXCIgfHwgQmlnTnVtYmVyLmlzQmlnTnVtYmVyKGJ5dGVzKSkge1xuICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKGJ5dGVzKTtcbiAgfSBlbHNlIGlmIChieXRlcy5yZWR1Y2UpIHtcbiAgICByZXR1cm4gYnl0ZXMucmVkdWNlKFxuICAgICAgKG51bSwgYnl0ZSkgPT4gbnVtLnRpbWVzKDB4MTAwKS5wbHVzKGJ5dGUpLFxuICAgICAgbmV3IEJpZ051bWJlcigwKVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvU2lnbmVkQmlnTnVtYmVyKGJ5dGVzKSB7XG4gIGlmIChieXRlc1swXSA8IDBiMTAwMDAwMDApIHsgIC8vIGZpcnN0IGJpdCBpcyAwXG4gICAgcmV0dXJuIHRvQmlnTnVtYmVyKGJ5dGVzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdG9CaWdOdW1iZXIoYnl0ZXMubWFwKCAoYikgPT4gMHhmZiAtIGIgKSkucGx1cygxKS5uZWdhdGVkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gYnl0ZXMgLSBVaW50OEFycmF5XG4gKiBAcGFyYW0gbGVuZ3RoIC0gZGVzaXJlZCBieXRlIGxlbmd0aCAocGFkIHdpdGggemVyb2VzKVxuICogQHBhcmFtIHRyaW0gLSBvbWl0IGxlYWRpbmcgemVyb2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0hleFN0cmluZyhieXRlcywgbGVuZ3RoID0gMCwgdHJpbSA9IGZhbHNlKSB7XG4gIGlmICh0eXBlb2YgbGVuZ3RoID09IFwiYm9vbGVhblwiKSB7XG4gICAgdHJpbSA9IGxlbmd0aDtcbiAgICBsZW5ndGggPSAwO1xuICB9XG5cbiAgaWYgKEJpZ051bWJlci5pc0JpZ051bWJlcihieXRlcykpIHtcbiAgICBieXRlcyA9IHRvQnl0ZXMoYnl0ZXMpO1xuICB9XG5cbiAgY29uc3QgcGFkID0gKHMpID0+IGAke1wiMDBcIi5zbGljZSgwLCAyIC0gcy5sZW5ndGgpfSR7c31gXG5cbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwICAxICAyICAzICA0XG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCAgMSAgMiAgMyAgNCAgNSAgNiAgN1xuICAvLyBieXRlcy5sZW5ndGg6ICAgICAgICA1ICAtICAweCggICAgICAgICAgZTUgYzIgYWEgMDkgMTEgKVxuICAvLyBsZW5ndGggKHByZWZlcnJlZCk6ICA4ICAtICAweCggMDAgMDAgMDAgZTUgYzIgYWEgMDkgMTEgKVxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYC0tLi0tLSdcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0IDNcbiAgaWYgKGJ5dGVzLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgIGxldCBwcmlvciA9IGJ5dGVzO1xuICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcblxuICAgIGJ5dGVzLnNldChwcmlvciwgbGVuZ3RoIC0gcHJpb3IubGVuZ3RoKTtcbiAgfVxuXG4gIGRlYnVnKFwiYnl0ZXM6ICVvXCIsIGJ5dGVzKTtcblxuICBsZXQgc3RyaW5nID0gYnl0ZXMucmVkdWNlKFxuICAgIChzdHIsIGJ5dGUpID0+IGAke3N0cn0ke3BhZChieXRlLnRvU3RyaW5nKDE2KSl9YCwgXCJcIlxuICApO1xuXG4gIGlmICh0cmltKSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL14oMDApKy8sIFwiXCIpO1xuICB9XG5cbiAgaWYgKHN0cmluZy5sZW5ndGggPT0gMCkge1xuICAgIHN0cmluZyA9IFwiMDBcIjtcbiAgfVxuXG4gIHJldHVybiBgMHgke3N0cmluZ31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9CeXRlcyhudW1iZXIsIGxlbmd0aCA9IDApIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBsZXQgaGV4ID0gbnVtYmVyLnRvU3RyaW5nKDE2KTtcbiAgaWYgKGhleC5sZW5ndGggJSAyID09IDEpIHtcbiAgICBoZXggPSBgMCR7aGV4fWA7XG4gIH1cblxuICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShcbiAgICBoZXgubWF0Y2goLy57Mn0vZylcbiAgICAgIC5tYXAoIChieXRlKSA9PiBwYXJzZUludChieXRlLCAxNikgKVxuICApO1xuXG4gIGlmIChieXRlcy5sZW5ndGggPCBsZW5ndGgpIHtcbiAgICBsZXQgcHJpb3IgPSBieXRlcztcbiAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgYnl0ZXMuc2V0KHByaW9yLCBsZW5ndGggLSBwcmlvci5sZW5ndGgpO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24ga2VjY2FrMjU2KC4uLmFyZ3MpIHtcbiAgbGV0IHdlYjMgPSBuZXcgV2ViMygpO1xuXG4gIGFyZ3MgPSBhcmdzLm1hcCggKGFyZykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09IFwibnVtYmVyXCIgfHwgQmlnTnVtYmVyLmlzQmlnTnVtYmVyKGFyZykpIHtcbiAgICAgIHJldHVybiB0b0hleFN0cmluZyh0b0J5dGVzKGFyZywgV09SRF9TSVpFKSkuc2xpY2UoMilcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHdlYjMudG9IZXgoYXJnKS5zbGljZSgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICB9KTtcblxuICBsZXQgc2hhID0gd2ViMy5zaGEzKGFyZ3Muam9pbignJyksIHsgZW5jb2Rpbmc6ICdoZXgnIH0pO1xuICBkZWJ1ZyhcInNoYSAlb1wiLCBzaGEpO1xuICByZXR1cm4gdG9CaWdOdW1iZXIoc2hhKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZGF0YS9kZWNvZGUvdXRpbHMuanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvZ2V0LWl0ZXJhdG9yXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2dldC1pdGVyYXRvclwiXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6YXN0OnNlbGVjdG9yc1wiKTtcblxuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3JUcmVlLCBjcmVhdGVMZWFmIH0gZnJvbSBcInJlc2VsZWN0LXRyZWVcIjtcbmltcG9ydCBqc29ucG9pbnRlciBmcm9tIFwianNvbi1wb2ludGVyXCI7XG5cbmltcG9ydCBzb2xpZGl0eSBmcm9tIFwibGliL3NvbGlkaXR5L3NlbGVjdG9yc1wiO1xuXG5pbXBvcnQgeyBmaW5kUmFuZ2UgfSBmcm9tIFwiLi4vbWFwXCI7XG5cblxuLyoqXG4gKiBhc3RcbiAqL1xuY29uc3QgYXN0ID0gY3JlYXRlU2VsZWN0b3JUcmVlKHtcbiAgLyoqXG4gICAqIGFzdC52aWV3c1xuICAgKi9cbiAgdmlld3M6IHtcbiAgICAvKipcbiAgICAgKiBhc3Qudmlld3Muc291cmNlc1xuICAgICAqL1xuICAgIHNvdXJjZXM6IGNyZWF0ZUxlYWYoW3NvbGlkaXR5LmluZm8uc291cmNlc10sIHNvdXJjZXMgPT4gc291cmNlcylcbiAgfSxcblxuICAvKipcbiAgICogYXN0LmN1cnJlbnRcbiAgICovXG4gIGN1cnJlbnQ6IHtcblxuICAgIC8qKlxuICAgICAqIGFzdC5jdXJyZW50LnRyZWVcbiAgICAgKlxuICAgICAqIGFzdCBmb3IgY3VycmVudCBzb3VyY2VcbiAgICAgKi9cbiAgICB0cmVlOiBjcmVhdGVMZWFmKFxuICAgICAgW3NvbGlkaXR5LmN1cnJlbnQuc291cmNlXSwgKHthc3R9KSA9PiBhc3RcbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogYXN0LmN1cnJlbnQuaW5kZXhcbiAgICAgKlxuICAgICAqIHNvdXJjZSBJRFxuICAgICAqL1xuICAgIGluZGV4OiBjcmVhdGVMZWFmKFxuICAgICAgW3NvbGlkaXR5LmN1cnJlbnQuc291cmNlXSwgKHtpZH0pID0+IGlkXG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIGFzdC5jdXJyZW50LnBvaW50ZXJcbiAgICAgKlxuICAgICAqIGpzb25wb2ludGVyIGZvciBjdXJyZW50IGFzdCBub2RlXG4gICAgICovXG4gICAgcG9pbnRlcjogY3JlYXRlTGVhZihcbiAgICAgIFtcIi4vdHJlZVwiLCBzb2xpZGl0eS5jdXJyZW50LnNvdXJjZVJhbmdlXSxcblxuICAgICAgKGFzdCwgcmFuZ2UpID0+IGZpbmRSYW5nZShhc3QsIHJhbmdlLnN0YXJ0LCByYW5nZS5sZW5ndGgpXG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIGFzdC5jdXJyZW50Lm5vZGVcbiAgICAgKlxuICAgICAqIGN1cnJlbnQgYXN0IG5vZGUgdG8gZXhlY3V0ZVxuICAgICAqL1xuICAgIG5vZGU6IGNyZWF0ZUxlYWYoXG4gICAgICBbXCIuL3RyZWVcIiwgXCIuL3BvaW50ZXJcIl0sIChhc3QsIHBvaW50ZXIpID0+XG4gICAgICAgIChwb2ludGVyKVxuICAgICAgICAgID8ganNvbnBvaW50ZXIuZ2V0KGFzdCwgcG9pbnRlcilcbiAgICAgICAgICA6IGpzb25wb2ludGVyLmdldChhc3QsIFwiXCIpXG4gICAgKSxcblxuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXN0O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9hc3Qvc2VsZWN0b3JzL2luZGV4LmpzIiwiZXhwb3J0IGNvbnN0IFNBVkVfU1RFUFMgPSBcIlNBVkVfU1RFUFNcIjtcbmV4cG9ydCBmdW5jdGlvbiBzYXZlU3RlcHMoc3RlcHMpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBTQVZFX1NURVBTLFxuICAgIHN0ZXBzXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBSRUNFSVZFX0FERFJFU1NFUyA9IFwiUkVDRUlWRV9BRERSRVNTRVNcIjtcbmV4cG9ydCBmdW5jdGlvbiByZWNlaXZlQWRkcmVzc2VzKGFkZHJlc3Nlcykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFJFQ0VJVkVfQUREUkVTU0VTLFxuICAgIGFkZHJlc3Nlc1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgTkVYVCA9IFwiTkVYVFwiO1xuZXhwb3J0IGZ1bmN0aW9uIG5leHQoKSB7XG4gIHJldHVybiB7dHlwZTogTkVYVH07XG59XG5cbmV4cG9ydCBjb25zdCBUSUNLID0gXCJUSUNLXCI7XG5leHBvcnQgZnVuY3Rpb24gdGljaygpIHtcbiAgcmV0dXJuIHt0eXBlOiBUSUNLfTtcbn1cblxuZXhwb3J0IGNvbnN0IFRPQ0sgPSBcIlRPQ0tcIjtcbmV4cG9ydCBmdW5jdGlvbiB0b2NrKCkge1xuICByZXR1cm4ge3R5cGU6IFRPQ0t9O1xufVxuXG5leHBvcnQgY29uc3QgRU5EX09GX1RSQUNFID0gXCJFT1RcIjtcbmV4cG9ydCBmdW5jdGlvbiBlbmRUcmFjZSgpIHtcbiAgcmV0dXJuIHt0eXBlOiBFTkRfT0ZfVFJBQ0V9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi90cmFjZS9hY3Rpb25zL2luZGV4LmpzIiwiaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3JUcmVlLCBjcmVhdGVMZWFmIH0gZnJvbSBcInJlc2VsZWN0LXRyZWVcIjtcblxubGV0IHRyYWNlID0gY3JlYXRlU2VsZWN0b3JUcmVlKHtcbiAgLyoqXG4gICAqIHRyYWNlLmluZGV4XG4gICAqXG4gICAqIGN1cnJlbnQgc3RlcCBpbmRleFxuICAgKi9cbiAgaW5kZXg6IChzdGF0ZSkgPT4gc3RhdGUudHJhY2UucHJvYy5pbmRleCxcblxuICAvKipcbiAgICogdHJhY2Uuc3RlcHNcbiAgICpcbiAgICogYWxsIHRyYWNlIHN0ZXBzXG4gICAqL1xuICBzdGVwczogKHN0YXRlKSA9PiBzdGF0ZS50cmFjZS5pbmZvLnN0ZXBzLFxuXG4gIC8qKlxuICAgKiB0cmFjZS5zdGVwc1JlbWFpbmluZ1xuICAgKlxuICAgKiBudW1iZXIgb2Ygc3RlcHMgcmVtYWluaW5nIGluIHRyYWNlXG4gICAqL1xuICBzdGVwc1JlbWFpbmluZzogY3JlYXRlTGVhZihcbiAgICBbXCIuL3N0ZXBzXCIsIFwiLi9pbmRleFwiXSwgKHN0ZXBzLCBpbmRleCkgPT4gc3RlcHMubGVuZ3RoIC0gaW5kZXhcbiAgKSxcblxuICAvKipcbiAgICogdHJhY2Uuc3RlcFxuICAgKlxuICAgKiBjdXJyZW50IHRyYWNlIHN0ZXBcbiAgICovXG4gIHN0ZXA6IGNyZWF0ZUxlYWYoXG4gICAgW1wiLi9zdGVwc1wiLCBcIi4vaW5kZXhcIl0sIChzdGVwcywgaW5kZXgpID0+IHN0ZXBzW2luZGV4XVxuICApLFxuXG4gIC8qKlxuICAgKiB0cmFjZS5uZXh0XG4gICAqXG4gICAqIG5leHQgdHJhY2Ugc3RlcCBvciB7fVxuICAgKi9cbiAgbmV4dDogY3JlYXRlTGVhZihcbiAgICBbXCIuL3N0ZXBzXCIsIFwiLi9pbmRleFwiXSwgKHN0ZXBzLCBpbmRleCkgPT5cbiAgICAgIGluZGV4IDwgc3RlcHMubGVuZ3RoIC0gMSA/IHN0ZXBzW2luZGV4ICsgMV0gOiB7fVxuICApXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgdHJhY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3RyYWNlL3NlbGVjdG9ycy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJpZ251bWJlci5qc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJpZ251bWJlci5qc1wiXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIlxuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzXCJcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImpzb24tcG9pbnRlclwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImpzb24tcG9pbnRlclwiXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXNcIlxuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0IGNvbnN0IFNUQVJUID0gXCJTRVNTSU9OX1NUQVJUXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RhcnQodHhIYXNoLCBwcm92aWRlcikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFNUQVJULFxuICAgIHR4SGFzaCwgcHJvdmlkZXJcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IFJFQURZID0gXCJTRVNTSU9OX1JFQURZXCI7XG5leHBvcnQgZnVuY3Rpb24gcmVhZHkoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogUkVBRFksXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBFUlJPUiA9IFwiU0VTU0lPTl9FUlJPUlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKGVycm9yKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogRVJST1IsXG4gICAgZXJyb3JcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IEZJTklTSCA9IFwiU0VTU0lPTl9GSU5JU0hcIjtcbmV4cG9ydCBmdW5jdGlvbiBmaW5pc2goKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogRklOSVNILFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgUkVDT1JEX0NPTlRSQUNUUyA9IFwiUkVDT1JEX0NPTlRSQUNUU1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZENvbnRyYWN0cyhjb250ZXh0cywgc291cmNlcykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFJFQ09SRF9DT05UUkFDVFMsXG4gICAgY29udGV4dHMsIHNvdXJjZXNcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9zZXNzaW9uL2FjdGlvbnMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc2V0XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3NldFwiXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJhYmVsLXJ1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCJcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2ZcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvdHlwZW9mXCJcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2VcIlxuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0IGNvbnN0IEJFR0lOX1NURVAgPSBcIkJFR0lOX1NURVBcIjtcbmV4cG9ydCBmdW5jdGlvbiBiZWdpblN0ZXAodHlwZSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEJFR0lOX1NURVAsXG4gICAgc3RlcFR5cGU6IHR5cGVcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IEFEVkFOQ0UgPSBcIkFEVkFOQ0VcIjtcbmV4cG9ydCBmdW5jdGlvbiBhZHZhbmNlKCkge1xuICByZXR1cm4ge3R5cGU6IEFEVkFOQ0V9O1xufVxuXG5leHBvcnQgY29uc3QgU1RFUF9ORVhUID0gXCJTVEVQX05FWFRcIjtcbmV4cG9ydCBmdW5jdGlvbiBzdGVwTmV4dCgpIHtcbiAgcmV0dXJuIHt0eXBlOiBTVEVQX05FWFR9O1xufVxuXG5leHBvcnQgY29uc3QgU1RFUF9PVkVSID0gXCJTVEVQX09WRVJcIjtcbmV4cG9ydCBmdW5jdGlvbiBzdGVwT3ZlcigpIHtcbiAgcmV0dXJuIHt0eXBlOiBTVEVQX09WRVJ9O1xufVxuXG5leHBvcnQgY29uc3QgU1RFUF9JTlRPID0gXCJTVEVQX0lOVE9cIjtcbmV4cG9ydCBmdW5jdGlvbiBzdGVwSW50bygpIHtcbiAgcmV0dXJuIHt0eXBlOiBTVEVQX0lOVE99O1xufVxuXG5leHBvcnQgY29uc3QgU1RFUF9PVVQgPSBcIlNURVBfT1VUXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RlcE91dCgpIHtcbiAgcmV0dXJuIHt0eXBlOiBTVEVQX09VVH07XG59XG5cbmV4cG9ydCBjb25zdCBJTlRFUlJVUFQgPSBcIklOVEVSUlVQVFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGludGVycnVwdCAoKSB7XG4gIHJldHVybiB7dHlwZTogSU5URVJSVVBUfTtcbn1cblxuXG5leHBvcnQgY29uc3QgQ09OVElOVUVfVU5USUwgPSBcIkNPTlRJTlVFX1VOVElMXCI7XG5leHBvcnQgZnVuY3Rpb24gY29udGludWVVbnRpbCguLi5icmVha3BvaW50cykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IENPTlRJTlVFX1VOVElMLFxuICAgIGJyZWFrcG9pbnRzXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2NvbnRyb2xsZXIvYWN0aW9ucy9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIndlYjNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJ3ZWIzXCJcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpkYXRhOnNhZ2FzXCIpO1xuXG5pbXBvcnQgeyBwdXQsIHRha2VFdmVyeSwgc2VsZWN0IH0gZnJvbSBcInJlZHV4LXNhZ2EvZWZmZWN0c1wiO1xuaW1wb3J0IGpzb25wb2ludGVyIGZyb20gXCJqc29uLXBvaW50ZXJcIjtcblxuaW1wb3J0IHsgcHJlZml4TmFtZSB9IGZyb20gXCJsaWIvaGVscGVyc1wiO1xuXG5pbXBvcnQgeyBUSUNLIH0gZnJvbSBcImxpYi90cmFjZS9hY3Rpb25zXCI7XG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuLi9hY3Rpb25zXCI7XG5cbmltcG9ydCBkYXRhIGZyb20gXCIuLi9zZWxlY3RvcnNcIjtcblxuaW1wb3J0IHsgV09SRF9TSVpFIH0gZnJvbSBcImxpYi9kYXRhL2RlY29kZS91dGlsc1wiO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSBcImxpYi9kYXRhL2RlY29kZS91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gKnNjb3BlKG5vZGVJZCwgcG9pbnRlciwgcGFyZW50SWQsIHNvdXJjZUlkKSB7XG4gIHlpZWxkIHB1dChhY3Rpb25zLnNjb3BlKG5vZGVJZCwgcG9pbnRlciwgcGFyZW50SWQsIHNvdXJjZUlkKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiAqZGVjbGFyZShub2RlKSB7XG4gIHlpZWxkIHB1dChhY3Rpb25zLmRlY2xhcmUobm9kZSkpO1xufVxuXG5mdW5jdGlvbiAqdGlja1NhZ2EoKSB7XG4gIGxldCB7XG4gICAgdHJlZSxcbiAgICBpZDogdHJlZUlkLFxuICAgIG5vZGUsXG4gICAgcG9pbnRlclxuICB9ID0geWllbGQgc2VsZWN0KGRhdGEudmlld3MuYXN0KTtcblxuICBsZXQgc2NvcGVzID0geWllbGQgc2VsZWN0KGRhdGEuaW5mby5zY29wZXMpO1xuICBsZXQgZGVmaW5pdGlvbnMgPSB5aWVsZCBzZWxlY3QoZGF0YS52aWV3cy5zY29wZXMuaW5saW5lZCk7XG5cbiAgbGV0IHN0YWNrID0geWllbGQgc2VsZWN0KGRhdGEubmV4dC5zdGF0ZS5zdGFjayk7XG4gIGlmICghc3RhY2spIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgdG9wID0gc3RhY2subGVuZ3RoIC0gMTtcbiAgdmFyIHBhcmFtZXRlcnMsIHJldHVyblBhcmFtZXRlcnMsIGFzc2lnbm1lbnRzLCBzdG9yYWdlVmFycztcblxuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHtcblxuICAgIGNhc2UgXCJGdW5jdGlvbkRlZmluaXRpb25cIjpcbiAgICAgIC8vIHN0YWNrIGlzIG9ubHkgcmVhZHkgZm9yIGludGVycHJldGF0aW9uIGFmdGVyIHRoZSBsYXN0IHN0ZXAgb2YgZWFjaFxuICAgICAgLy8gc291cmNlIHJhbmdlXG4gICAgICAvL1xuICAgICAgLy8gdGhlIGRhdGEgbW9kdWxlIGFsd2F5cyBsb29rcyBhdCB0aGUgcmVzdWx0IG9mIGEgcGFydGljdWxhciBvcGNvZGVcbiAgICAgIC8vIChpLmUuLCB0aGUgZm9sbG93aW5nIHRyYWNlIHN0ZXAncyBzdGFjay9tZW1vcnkvc3RvcmFnZSksIHNvIHRoaXNcbiAgICAgIC8vIGFzc2VydHMgdGhhdCB0aGUgX2N1cnJlbnRfIG9wZXJhdGlvbiBpcyB0aGUgZmluYWwgb25lIGJlZm9yZVxuICAgICAgLy8gcHJvY2VlZGluZ1xuICAgICAgaWYgKCEoeWllbGQgc2VsZWN0KGRhdGEudmlld3MuYXRMYXN0SW5zdHJ1Y3Rpb25Gb3JTb3VyY2VSYW5nZSkpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBwYXJhbWV0ZXJzID0gbm9kZS5wYXJhbWV0ZXJzLnBhcmFtZXRlcnNcbiAgICAgICAgLm1hcCggKHAsIGkpID0+IGAke3BvaW50ZXJ9L3BhcmFtZXRlcnMvcGFyYW1ldGVycy8ke2l9YCApO1xuXG4gICAgICByZXR1cm5QYXJhbWV0ZXJzID0gbm9kZS5yZXR1cm5QYXJhbWV0ZXJzLnBhcmFtZXRlcnNcbiAgICAgICAgLm1hcCggKHAsIGkpID0+IGAke3BvaW50ZXJ9L3JldHVyblBhcmFtZXRlcnMvcGFyYW1ldGVycy8ke2l9YCApO1xuXG4gICAgICBhc3NpZ25tZW50cyA9IHJldHVyblBhcmFtZXRlcnMuY29uY2F0KHBhcmFtZXRlcnMpLnJldmVyc2UoKVxuICAgICAgICAubWFwKCAocG9pbnRlcikgPT4ganNvbnBvaW50ZXIuZ2V0KHRyZWUsIHBvaW50ZXIpLmlkIClcbiAgICAgICAgLm1hcCggKGlkLCBpKSA9PiAoeyBbaWRdOiB7XCJzdGFja1wiOiB0b3AgLSBpfSB9KSApXG4gICAgICAgIC5yZWR1Y2UoIChhY2MsIGFzc2lnbm1lbnQpID0+IE9iamVjdC5hc3NpZ24oYWNjLCBhc3NpZ25tZW50KSwge30gKTtcblxuICAgICAgeWllbGQgcHV0KGFjdGlvbnMuYXNzaWduKHRyZWVJZCwgYXNzaWdubWVudHMpKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcIkNvbnRyYWN0RGVmaW5pdGlvblwiOlxuICAgICAgbGV0IHN0b3JhZ2VWYXJzID0gc2NvcGVzW25vZGUuaWRdLnZhcmlhYmxlcyB8fCBbXTtcbiAgICAgIGxldCBzbG90ID0gMDtcbiAgICAgIGxldCBpbmRleCA9IFdPUkRfU0laRSAtIDE7ICAvLyBjYXVzZSBsb3dlci1vcmRlclxuICAgICAgZGVidWcoXCJzdG9yYWdlIHZhcnMgJW9cIiwgc3RvcmFnZVZhcnMpO1xuXG4gICAgICBsZXQgYWxsb2NhdGlvbiA9IHV0aWxzLmFsbG9jYXRlRGVjbGFyYXRpb25zKHN0b3JhZ2VWYXJzLCBkZWZpbml0aW9ucyk7XG4gICAgICBhc3NpZ25tZW50cyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHt9LCAuLi5PYmplY3QuZW50cmllcyhhbGxvY2F0aW9uLmNoaWxkcmVuKVxuICAgICAgICAgIC5tYXAoIChbaWQsIHN0b3JhZ2VdKSA9PiAoeyBbaWRdOiB7c3RvcmFnZX0gfSkgKVxuICAgICAgKTtcbiAgICAgIGRlYnVnKFwiYXNzaWdubWVudHMgJU9cIiwgYXNzaWdubWVudHMpO1xuXG4gICAgICB5aWVsZCBwdXQoYWN0aW9ucy5hc3NpZ24odHJlZUlkLCBhc3NpZ25tZW50cykpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiVmFyaWFibGVEZWNsYXJhdGlvblwiOlxuICAgICAgeWllbGQgcHV0KGFjdGlvbnMuYXNzaWduKHRyZWVJZCwge1xuICAgICAgICBbanNvbnBvaW50ZXIuZ2V0KHRyZWUsIHBvaW50ZXIpLmlkXToge1wic3RhY2tcIjogdG9wfVxuICAgICAgfSkpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogc2FnYSAoKSB7XG4gIHlpZWxkIHRha2VFdmVyeShUSUNLLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCAqdGlja1NhZ2EoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkZWJ1ZyhlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhOYW1lKFwiZGF0YVwiLCBzYWdhKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZGF0YS9zYWdhcy9pbmRleC5qcyIsImV4cG9ydCBjb25zdCBTQ09QRSA9IFwiU0NPUEVcIjtcbmV4cG9ydCBmdW5jdGlvbiBzY29wZShpZCwgcG9pbnRlciwgcGFyZW50SWQsIHNvdXJjZUlkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogU0NPUEUsXG4gICAgaWQsIHBvaW50ZXIsIHBhcmVudElkLCBzb3VyY2VJZFxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBERUNMQVJFID0gXCJERUNMQVJFX1ZBUklBQkxFXCI7XG5leHBvcnQgZnVuY3Rpb24gZGVjbGFyZShub2RlKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogREVDTEFSRSxcbiAgICBub2RlXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEFTU0lHTiA9IFwiQVNTSUdOXCI7XG5leHBvcnQgZnVuY3Rpb24gYXNzaWduKGNvbnRleHQsIGFzc2lnbm1lbnRzKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQVNTSUdOLFxuICAgIGNvbnRleHQsIGFzc2lnbm1lbnRzXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2RhdGEvYWN0aW9ucy9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpkYXRhOnNlbGVjdG9yc1wiKTtcblxuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3JUcmVlLCBjcmVhdGVMZWFmIH0gZnJvbSBcInJlc2VsZWN0LXRyZWVcIjtcbmltcG9ydCBqc29ucG9pbnRlciBmcm9tIFwianNvbi1wb2ludGVyXCI7XG5cbmltcG9ydCBhc3QgZnJvbSBcImxpYi9hc3Qvc2VsZWN0b3JzXCI7XG5pbXBvcnQgZXZtIGZyb20gXCJsaWIvZXZtL3NlbGVjdG9yc1wiO1xuaW1wb3J0IHNvbGlkaXR5IGZyb20gXCJsaWIvc29saWRpdHkvc2VsZWN0b3JzXCI7XG5cbmltcG9ydCBkZWNvZGUgZnJvbSBcIi4uL2RlY29kZVwiO1xuaW1wb3J0ICogYXMgZGVjb2RlVXRpbHMgZnJvbSBcIi4uL2RlY29kZS91dGlsc1wiO1xuXG5pbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlU2VsZWN0b3JzKHsgc3RhY2ssIG1lbW9yeSwgc3RvcmFnZSB9KSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogLnN0YWNrXG4gICAgICovXG4gICAgc3RhY2s6IGNyZWF0ZUxlYWYoXG4gICAgICBbc3RhY2tdLFxuXG4gICAgICAod29yZHMpID0+ICh3b3JkcyB8fCBbXSkubWFwKFxuICAgICAgICAod29yZCkgPT4gZGVjb2RlVXRpbHMudG9CeXRlcyhkZWNvZGVVdGlscy50b0JpZ051bWJlcih3b3JkLCBkZWNvZGVVdGlscy5XT1JEX1NJWkUpKVxuICAgICAgKVxuICAgICksXG5cbiAgICAvKipcbiAgICAgKiAubWVtb3J5XG4gICAgICovXG4gICAgbWVtb3J5OiBjcmVhdGVMZWFmKFxuICAgICAgW21lbW9yeV0sXG5cbiAgICAgICh3b3JkcykgPT4gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICAgICh3b3Jkcy5qb2luKFwiXCIpLm1hdGNoKC8uezEsMn0vZykgfHwgW10pXG4gICAgICAgICAgLm1hcCggKGJ5dGUpID0+IHBhcnNlSW50KGJ5dGUsIDE2KSApXG4gICAgICApXG4gICAgKSxcblxuICAgIC8qKlxuICAgICAqIC5zdG9yYWdlXG4gICAgICovXG4gICAgc3RvcmFnZTogY3JlYXRlTGVhZihcbiAgICAgIFtzdG9yYWdlXSxcblxuICAgICAgKG1hcHBpbmcpID0+IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHt9LCAuLi5PYmplY3QuZW50cmllcyhtYXBwaW5nKS5tYXAoIChbIGFkZHJlc3MsIHdvcmQgXSkgPT5cbiAgICAgICAgICAoe1xuICAgICAgICAgICAgW2AweCR7YWRkcmVzc31gXTogbmV3IFVpbnQ4QXJyYXkoXG4gICAgICAgICAgICAgICh3b3JkLm1hdGNoKC8uezEsMn0vZykgfHwgW10pXG4gICAgICAgICAgICAgICAgLm1hcCggKGJ5dGUpID0+IHBhcnNlSW50KGJ5dGUsIDE2KSApXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfTtcbn1cblxuY29uc3QgZGF0YSA9IGNyZWF0ZVNlbGVjdG9yVHJlZSh7XG4gIHN0YXRlOiAoc3RhdGUpID0+IHN0YXRlLmRhdGEsXG5cbiAgLyoqXG4gICAqIGRhdGEudmlld3NcbiAgICovXG4gIHZpZXdzOiB7XG4gICAgYXN0OiBjcmVhdGVMZWFmKFxuICAgICAgW2FzdC5jdXJyZW50XSwgKHRyZWUpID0+IHRyZWVcbiAgICApLFxuXG4gICAgYXRMYXN0SW5zdHJ1Y3Rpb25Gb3JTb3VyY2VSYW5nZTogY3JlYXRlTGVhZihcbiAgICAgIFtzb2xpZGl0eS5jdXJyZW50LmlzU291cmNlUmFuZ2VGaW5hbF0sIChmaW5hbCkgPT4gZmluYWxcbiAgICApLFxuXG4gICAgLyoqXG4gICAgICogZGF0YS52aWV3cy5zY29wZXNcbiAgICAgKi9cbiAgICBzY29wZXM6IHtcblxuICAgICAgLyoqXG4gICAgICAgKiBkYXRhLnZpZXdzLnNjb3Blcy5pbmxpbmVkXG4gICAgICAgKi9cbiAgICAgIGlubGluZWQ6IGNyZWF0ZUxlYWYoXG4gICAgICAgIFtcIi9pbmZvL3Njb3Blc1wiLCBzb2xpZGl0eS5pbmZvLnNvdXJjZXNdLFxuXG4gICAgICAgIChzY29wZXMsIHNvdXJjZXMpID0+IE9iamVjdC5hc3NpZ24oe30sXG4gICAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMoc2NvcGVzKS5tYXAoXG4gICAgICAgICAgICAoW2lkLCBlbnRyeV0pID0+ICh7XG4gICAgICAgICAgICAgIFtpZF06IHtcbiAgICAgICAgICAgICAgICAuLi5lbnRyeSxcblxuICAgICAgICAgICAgICAgIGRlZmluaXRpb246IGpzb25wb2ludGVyLmdldChcbiAgICAgICAgICAgICAgICAgIHNvdXJjZXNbZW50cnkuc291cmNlSWRdLmFzdCwgZW50cnkucG9pbnRlclxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGF0YS52aWV3cy5kZWNvZGVyXG4gICAgICpcbiAgICAgKiBzZWxlY3RvciByZXR1cm5zIChhc3Qgbm9kZSBkZWZpbml0aW9uLCBkYXRhIHJlZmVyZW5jZSkgPT4gdmFsdWVcbiAgICAgKi9cbiAgICBkZWNvZGVyOiBjcmVhdGVMZWFmKFxuICAgICAgW1wiL3ZpZXdzL3Njb3Blcy9pbmxpbmVkXCIsIFwiL2N1cnJlbnQvc3RhdGVcIl0sXG5cbiAgICAgIChzY29wZXMsIHN0YXRlKSA9PiB7XG4gICAgICAgIHJldHVybiAoZGVmaW5pdGlvbiwgcmVmKSA9PiBkZWNvZGUoZGVmaW5pdGlvbiwgcmVmLCBzdGF0ZSwgc2NvcGVzKVxuICAgICAgfVxuICAgIClcbiAgfSxcblxuICAvKipcbiAgICogZGF0YS5pbmZvXG4gICAqL1xuICBpbmZvOiB7XG5cbiAgICAvKipcbiAgICAgKiBkYXRhLmluZm8uc2NvcGVzXG4gICAgICovXG4gICAgc2NvcGVzOiBjcmVhdGVMZWFmKFtcIi9zdGF0ZVwiXSwgKHN0YXRlKSA9PiBzdGF0ZS5pbmZvLnNjb3Blcy5ieUlkKVxuICB9LFxuXG4gIC8qKlxuICAgKiBkYXRhLnByb2NcbiAgICovXG4gIHByb2M6IHtcblxuICAgIC8qKlxuICAgICAqIGRhdGEucHJvYy5hc3NpZ25tZW50c1xuICAgICAqL1xuICAgIGFzc2lnbm1lbnRzOiBjcmVhdGVMZWFmKFtcIi9zdGF0ZVwiXSwgKHN0YXRlKSA9PiBzdGF0ZS5wcm9jLmFzc2lnbm1lbnRzLmJ5SWQpXG4gIH0sXG5cbiAgLyoqXG4gICAqIGRhdGEuY3VycmVudFxuICAgKi9cbiAgY3VycmVudDoge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogZGF0YS5jdXJyZW50LnNjb3BlXG4gICAgICovXG4gICAgc2NvcGU6IHtcblxuICAgICAgLyoqXG4gICAgICAgKiBkYXRhLmN1cnJlbnQuc2NvcGUuaWRcbiAgICAgICAqL1xuICAgICAgaWQ6IGNyZWF0ZUxlYWYoXG4gICAgICAgIFthc3QuY3VycmVudC5ub2RlXSwgKG5vZGUpID0+IG5vZGUuaWRcbiAgICAgIClcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGF0YS5jdXJyZW50LnN0YXRlXG4gICAgICovXG4gICAgc3RhdGU6IGNyZWF0ZVN0YXRlU2VsZWN0b3JzKGV2bS5jdXJyZW50LnN0YXRlKSxcblxuICAgIC8qKlxuICAgICAqIGRhdGEuY3VycmVudC5pZGVudGlmaWVycyAobmFtZXNwYWNlKVxuICAgICAqL1xuICAgIGlkZW50aWZpZXJzOiB7XG5cbiAgICAgIC8qKlxuICAgICAgICogZGF0YS5jdXJyZW50LmlkZW50aWZpZXJzIChzZWxlY3RvcilcbiAgICAgICAqXG4gICAgICAgKiByZXR1cm5zIGlkZW50aWZlcnMgYW5kIGNvcnJlc3BvbmRpbmcgZGVmaW5pdGlvbiBub2RlIElEXG4gICAgICAgKi9cbiAgICAgIF86IGNyZWF0ZUxlYWYoXG4gICAgICAgIFtcbiAgICAgICAgICBcIi92aWV3cy9zY29wZXMvaW5saW5lZFwiLFxuICAgICAgICAgIFwiL2N1cnJlbnQvc2NvcGVcIixcbiAgICAgICAgXSxcblxuICAgICAgICAoc2NvcGVzLCBzY29wZSkgPT4ge1xuICAgICAgICAgIGxldCBjdXIgPSBzY29wZS5pZDtcbiAgICAgICAgICBsZXQgdmFyaWFibGVzID0ge307XG5cbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICB2YXJpYWJsZXMgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgIC4uLihzY29wZXNbY3VyXS52YXJpYWJsZXMgfHwgW10pXG4gICAgICAgICAgICAgICAgLmZpbHRlciggKHYpID0+IHZhcmlhYmxlc1t2Lm5hbWVdID09IHVuZGVmaW5lZCApXG4gICAgICAgICAgICAgICAgLm1hcCggKHYpID0+ICh7IFt2Lm5hbWVdOiB2LmlkIH0pIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGN1ciA9IHNjb3Blc1tjdXJdLnBhcmVudElkO1xuICAgICAgICAgIH0gd2hpbGUgKGN1ciAhPSBudWxsKTtcblxuICAgICAgICAgIHJldHVybiB2YXJpYWJsZXM7XG4gICAgICAgIH1cbiAgICAgICksXG5cbiAgICAgIC8qKlxuICAgICAgICogZGF0YS5jdXJyZW50LmlkZW50aWZpZXJzLmRlZmluaXRpb25zXG4gICAgICAgKlxuICAgICAgICogY3VycmVudCB2YXJpYWJsZSBkZWZpbml0aW9uc1xuICAgICAgICovXG4gICAgICBkZWZpbml0aW9uczogY3JlYXRlTGVhZihcbiAgICAgICAgW1xuICAgICAgICAgIFwiL3ZpZXdzL3Njb3Blcy9pbmxpbmVkXCIsXG4gICAgICAgICAgXCIuL19cIlxuICAgICAgICBdLFxuXG4gICAgICAgIChzY29wZXMsIGlkZW50aWZpZXJzKSA9PiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICAgIC4uLk9iamVjdC5lbnRyaWVzKGlkZW50aWZpZXJzKVxuICAgICAgICAgICAgLm1hcCggKFtpZGVudGlmaWVyLCBpZF0pID0+IHtcbiAgICAgICAgICAgICAgbGV0IHsgZGVmaW5pdGlvbiB9ID0gc2NvcGVzW2lkXTtcblxuICAgICAgICAgICAgICByZXR1cm4geyBbaWRlbnRpZmllcl06IGRlZmluaXRpb24gfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICksXG5cbiAgICAgIC8qKlxuICAgICAgICogZGF0YS5jdXJyZW50LmlkZW50aWZpZXJzLnJlZnNcbiAgICAgICAqXG4gICAgICAgKiBjdXJyZW50IHZhcmlhYmxlcycgdmFsdWUgcmVmc1xuICAgICAgICovXG4gICAgICByZWZzOiBjcmVhdGVMZWFmKFxuICAgICAgICBbXG4gICAgICAgICAgXCIvcHJvYy9hc3NpZ25tZW50c1wiLFxuICAgICAgICAgIFwiLi9fXCJcbiAgICAgICAgXSxcblxuICAgICAgICAoYXNzaWdubWVudHMsIGlkZW50aWZpZXJzKSA9PiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICAgIC4uLk9iamVjdC5lbnRyaWVzKGlkZW50aWZpZXJzKVxuICAgICAgICAgICAgLm1hcCggKFtpZGVudGlmaWVyLCBpZF0pID0+IHtcbiAgICAgICAgICAgICAgbGV0IHsgcmVmIH0gPSAoYXNzaWdubWVudHNbaWRdIHx8IHt9KVxuICAgICAgICAgICAgICBpZiAoIXJlZikgeyByZXR1cm4gdW5kZWZpbmVkIH07XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBbaWRlbnRpZmllcl06IHJlZlxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKSxcblxuICAgICAgZGVjb2RlZDogY3JlYXRlTGVhZihcbiAgICAgICAgW1xuICAgICAgICAgIFwiL3ZpZXdzL2RlY29kZXJcIixcbiAgICAgICAgICBcIi4vZGVmaW5pdGlvbnNcIixcbiAgICAgICAgICBcIi4vcmVmc1wiLFxuICAgICAgICBdLFxuXG4gICAgICAgIChkZWNvZGUsIGRlZmluaXRpb25zLCByZWZzKSA9PiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICAgIC4uLk9iamVjdC5lbnRyaWVzKHJlZnMpXG4gICAgICAgICAgICAubWFwKCAoW2lkZW50aWZpZXIsIHJlZl0pID0+ICh7XG4gICAgICAgICAgICAgIFtpZGVudGlmaWVyXTogZGVjb2RlKGRlZmluaXRpb25zW2lkZW50aWZpZXJdLCByZWYpXG4gICAgICAgICAgICB9KSApXG4gICAgICAgIClcbiAgICAgICksXG5cbiAgICAgIG5hdGl2ZTogY3JlYXRlTGVhZihbJy4vZGVjb2RlZCddLCBkZWNvZGVVdGlscy5jbGVhbkJpZ051bWJlcnMpXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBkYXRhLm5leHRcbiAgICovXG4gIG5leHQ6IHtcblxuICAgIC8qKlxuICAgICAqIGRhdGEubmV4dC5zdGF0ZVxuICAgICAqL1xuICAgIHN0YXRlOiBjcmVhdGVTdGF0ZVNlbGVjdG9ycyhldm0ubmV4dC5zdGF0ZSlcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGRhdGE7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2RhdGEvc2VsZWN0b3JzL2luZGV4LmpzIiwiaW1wb3J0IGRlYnVnTW9kdWxlIGZyb20gXCJkZWJ1Z1wiO1xuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOnRyYWNlOnNhZ2FzXCIpO1xuXG5pbXBvcnQgeyB0YWtlLCB0YWtlRXZlcnksIHB1dCwgc2VsZWN0IH0gZnJvbSBcInJlZHV4LXNhZ2EvZWZmZWN0c1wiO1xuaW1wb3J0IHsgcHJlZml4TmFtZSB9IGZyb20gXCJsaWIvaGVscGVyc1wiO1xuXG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuLi9hY3Rpb25zXCI7XG5cbmltcG9ydCB0cmFjZSBmcm9tIFwiLi4vc2VsZWN0b3JzXCI7XG5cbmZ1bmN0aW9uICp3YWl0Rm9yVHJhY2UoKSB7XG4gIGxldCB7c3RlcHN9ID0geWllbGQgdGFrZShhY3Rpb25zLlNBVkVfU1RFUFMpO1xuXG4gIGxldCBhZGRyZXNzZXMgPSBbXG4gICAgLi4ubmV3IFNldChcbiAgICAgIHN0ZXBzXG4gICAgICAgIC5maWx0ZXIoICh7b3B9KSA9PiBvcCA9PSBcIkNBTExcIiB8fCBvcCA9PSBcIkRFTEVHQVRFQ0FMTFwiIClcbiAgICAgICAgLm1hcCggKHtzdGFja30pID0+IFwiMHhcIiArIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDJdLnN1YnN0cmluZygyNCkgKVxuICAgIClcbiAgXTtcblxuICB5aWVsZCBwdXQoYWN0aW9ucy5yZWNlaXZlQWRkcmVzc2VzKGFkZHJlc3NlcykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gKmFkdmFuY2UoKSB7XG4gIHlpZWxkIHB1dChhY3Rpb25zLm5leHQoKSk7XG5cbiAgeWllbGQgdGFrZShhY3Rpb25zLlRPQ0spO1xufVxuXG5mdW5jdGlvbiogbmV4dCgpIHtcbiAgbGV0IHJlbWFpbmluZyA9IHlpZWxkIHNlbGVjdCh0cmFjZS5zdGVwc1JlbWFpbmluZyk7XG4gIGRlYnVnKFwicmVtYWluaW5nOiAlb1wiLCByZW1haW5pbmcpO1xuICBsZXQgc3RlcHMgPSB5aWVsZCBzZWxlY3QodHJhY2Uuc3RlcHMpO1xuICBkZWJ1ZyhcInRvdGFsIHN0ZXBzOiAlb1wiLCBzdGVwcy5sZW5ndGgpO1xuXG4gIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgZGVidWcoXCJwdXR0aW5nIFRJQ0tcIik7XG4gICAgLy8gdXBkYXRlcyBzdGF0ZSBmb3IgY3VycmVudCBzdGVwXG4gICAgeWllbGQgcHV0KGFjdGlvbnMudGljaygpKTtcbiAgICBkZWJ1ZyhcInB1dCBUSUNLXCIpO1xuXG4gICAgcmVtYWluaW5nLS07IC8vIGxvY2FsIHVwZGF0ZSwganVzdCBmb3IgY29udmVuaWVuY2VcbiAgfVxuXG4gIGlmIChyZW1haW5pbmcpIHtcbiAgICBkZWJ1ZyhcInB1dHRpbmcgVE9DS1wiKTtcbiAgICAvLyB1cGRhdGVzIHN0ZXAgdG8gbmV4dCBzdGVwIGluIHRyYWNlXG4gICAgeWllbGQgcHV0KGFjdGlvbnMudG9jaygpKTtcbiAgICBkZWJ1ZyhcInB1dCBUT0NLXCIpO1xuXG4gIH0gZWxzZSB7XG5cbiAgICB5aWVsZCBwdXQoYWN0aW9ucy5lbmRUcmFjZSgpKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24qIHdhaXQoKSB7XG4gIHlpZWxkIHRha2UoYWN0aW9ucy5FTkRfT0ZfVFJBQ0UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gKnByb2Nlc3NUcmFjZSh0cmFjZSkge1xuICB5aWVsZCBwdXQoYWN0aW9ucy5zYXZlU3RlcHModHJhY2UpKTtcblxuICBsZXQge2FkZHJlc3Nlc30gPSB5aWVsZCB0YWtlKGFjdGlvbnMuUkVDRUlWRV9BRERSRVNTRVMpO1xuICBkZWJ1ZyhcInJlY2VpdmVkIGFkZHJlc3Nlc1wiKTtcblxuICByZXR1cm4gYWRkcmVzc2VzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIHNhZ2EoKSB7XG4gIC8vIHdhaXQgZm9yIHRyYWNlIHRvIGJlIGRlZmluZWRcbiAgeWllbGQgKndhaXRGb3JUcmFjZSgpO1xuXG4gIHlpZWxkIHRha2VFdmVyeShhY3Rpb25zLk5FWFQsIG5leHQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhOYW1lKFwidHJhY2VcIiwgc2FnYSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3RyYWNlL3NhZ2FzL2luZGV4LmpzIiwiZXhwb3J0IGNvbnN0IEFERF9TT1VSQ0UgPSBcIlNPTElESVRZX0FERF9TT1VSQ0VcIjtcbmV4cG9ydCBmdW5jdGlvbiBhZGRTb3VyY2Uoc291cmNlLCBzb3VyY2VQYXRoLCBhc3QpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBRERfU09VUkNFLFxuICAgIHNvdXJjZSwgc291cmNlUGF0aCwgYXN0XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBBRERfU09VUkNFTUFQID0gXCJTT0xJRElUWV9BRERfU09VUkNFTUFQXCI7XG5leHBvcnQgZnVuY3Rpb24gYWRkU291cmNlTWFwKGJpbmFyeSwgc291cmNlTWFwKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUREX1NPVVJDRU1BUCxcbiAgICBiaW5hcnksIHNvdXJjZU1hcFxuICB9O1xufVxuXG5cbmV4cG9ydCBjb25zdCBKVU1QID0gXCJKVU1QXCI7XG5leHBvcnQgZnVuY3Rpb24ganVtcChqdW1wRGlyZWN0aW9uKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogSlVNUCxcbiAgICBqdW1wRGlyZWN0aW9uXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3NvbGlkaXR5L2FjdGlvbnMvaW5kZXguanMiLCJleHBvcnQgY29uc3QgQUREX0NPTlRFWFQgPSBcIkVWTV9BRERfQ09OVEVYVFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnRleHQoY29udHJhY3ROYW1lLCBiaW5hcnkpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBRERfQ09OVEVYVCxcbiAgICBjb250cmFjdE5hbWUsIGJpbmFyeVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBBRERfSU5TVEFOQ0UgPSBcIkVWTV9BRERfSU5TVEFOQ0VcIjtcbmV4cG9ydCBmdW5jdGlvbiBhZGRJbnN0YW5jZShhZGRyZXNzLCBjb250ZXh0LCBiaW5hcnkpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBRERfSU5TVEFOQ0UsXG4gICAgYWRkcmVzcywgY29udGV4dCwgYmluYXJ5XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IENBTEwgPSBcIkNBTExcIjtcbmV4cG9ydCBmdW5jdGlvbiBjYWxsKGFkZHJlc3MpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBDQUxMLFxuICAgIGFkZHJlc3NcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IENSRUFURSA9IFwiQ1JFQVRFXCI7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKGJpbmFyeSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IENSRUFURSxcbiAgICBiaW5hcnlcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IFJFVFVSTiA9IFwiUkVUVVJOXCI7XG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuQ2FsbCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBSRVRVUk5cbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9ldm0vYWN0aW9ucy9pbmRleC5qcyIsInZhciBEZWJ1Z2dlciA9IHJlcXVpcmUoXCIuL2xpYi9kZWJ1Z2dlclwiKS5kZWZhdWx0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERlYnVnZ2VyO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RlYnVnZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGV4cGVjdCBmcm9tIFwidHJ1ZmZsZS1leHBlY3RcIjtcblxuaW1wb3J0IFNlc3Npb24gZnJvbSBcIi4vc2Vzc2lvblwiO1xuXG5pbXBvcnQgeyBjcmVhdGVOZXN0ZWRTZWxlY3RvciB9IGZyb20gXCJyZXNlbGVjdC10cmVlXCI7XG5cbmltcG9ydCBkYXRhU2VsZWN0b3IgZnJvbSBcIi4vZGF0YS9zZWxlY3RvcnNcIjtcbmltcG9ydCBhc3RTZWxlY3RvciBmcm9tIFwiLi9hc3Qvc2VsZWN0b3JzXCI7XG5pbXBvcnQgdHJhY2VTZWxlY3RvciBmcm9tIFwiLi90cmFjZS9zZWxlY3RvcnNcIjtcbmltcG9ydCBldm1TZWxlY3RvciBmcm9tIFwiLi9ldm0vc2VsZWN0b3JzXCI7XG5pbXBvcnQgc29saWRpdHlTZWxlY3RvciBmcm9tIFwiLi9zb2xpZGl0eS9zZWxlY3RvcnNcIjtcbmltcG9ydCBzZXNzaW9uU2VsZWN0b3IgZnJvbSBcIi4vc2Vzc2lvbi9zZWxlY3RvcnNcIjtcblxuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyXCIpO1xuXG4vKipcbiAqIEBleGFtcGxlXG4gKiBsZXQgc2Vzc2lvbiA9IERlYnVnZ2VyXG4gKiAgIC5mb3JUeCg8dHhIYXNoPiwge1xuICogICAgIGNvbnRyYWN0czogWzxjb250cmFjdCBvYmo+LCAuLi5dLFxuICogICAgIHByb3ZpZGVyOiA8cHJvdmlkZXIgaW5zdGFuY2U+XG4gKiAgIH0pXG4gKiAgIC5jb25uZWN0KCk7XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlYnVnZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7U2Vzc2lvbn0gc2Vzc2lvbiAtIGRlYnVnZ2VyIHNlc3Npb25cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNlc3Npb24pIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3Nlc3Npb24gPSBzZXNzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc3RhbnRpYXRlcyBhIERlYnVnZ2VyIGZvciBhIGdpdmVuIHRyYW5zYWN0aW9uIGhhc2guXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eEhhc2ggLSB0cmFuc2FjdGlvbiBoYXNoIHdpdGggbGVhZGluZyBcIjB4XCJcbiAgICogQHBhcmFtIHt7Y29udHJhY3RzOiBBcnJheTxDb250cmFjdD4sIGZpbGVzOiBBcnJheTxTdHJpbmc+LCBwcm92aWRlcjogV2ViM1Byb3ZpZGVyfX0gb3B0aW9ucyAtXG4gICAqIEByZXR1cm4ge0RlYnVnZ2VyfSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZvclR4KHR4SGFzaCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXhwZWN0Lm9wdGlvbnMob3B0aW9ucywgW1xuICAgICAgXCJjb250cmFjdHNcIixcbiAgICAgIFwicHJvdmlkZXJcIlxuICAgIF0pO1xuXG4gICAgbGV0IHNlc3Npb24gPSBuZXcgU2Vzc2lvbihcbiAgICAgIG9wdGlvbnMuY29udHJhY3RzLCBvcHRpb25zLmZpbGVzLFxuICAgICAgdHhIYXNoLCBvcHRpb25zLnByb3ZpZGVyXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXNzaW9uLnJlYWR5KCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHRoaXMoc2Vzc2lvbik7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDb25uZWN0cyB0byB0aGUgaW5zdGFudGlhdGVkIERlYnVnZ2VyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTZXNzaW9ufSBzZXNzaW9uIGluc3RhbmNlXG4gICAqL1xuICBjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLl9zZXNzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydGVkIHNlbGVjdG9yc1xuICAgKlxuICAgKiBTZWUgaW5kaXZpZHVhbCBzZWxlY3RvciBkb2NzIGZvciBmdWxsIGxpc3RpbmdcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogRGVidWdnZXIuc2VsZWN0b3JzLmFzdC5jdXJyZW50LnRyZWVcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogRGVidWdnZXIuc2VsZWN0b3JzLnNvbGlkaXR5LmN1cnJlbnQuaW5zdHJ1Y3Rpb25cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogRGVidWdnZXIuc2VsZWN0b3JzLnRyYWNlLnN0ZXBzXG4gICAqL1xuICBzdGF0aWMgZ2V0IHNlbGVjdG9ycygpIHtcbiAgICByZXR1cm4gY3JlYXRlTmVzdGVkU2VsZWN0b3Ioe1xuICAgICAgYXN0OiBhc3RTZWxlY3RvcixcbiAgICAgIGRhdGE6IGRhdGFTZWxlY3RvcixcbiAgICAgIHRyYWNlOiB0cmFjZVNlbGVjdG9yLFxuICAgICAgZXZtOiBldm1TZWxlY3RvcixcbiAgICAgIHNvbGlkaXR5OiBzb2xpZGl0eVNlbGVjdG9yLFxuICAgICAgc2Vzc2lvbjogc2Vzc2lvblNlbGVjdG9yLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ29udHJhY3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb250cmFjdE5hbWUgY29udHJhY3QgbmFtZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNvdXJjZSBzb2xpZGl0eSBzb3VyY2UgY29kZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNvdXJjZVBhdGggcGF0aCB0byBzb3VyY2UgZmlsZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGJpbmFyeSAweC1wcmVmaXhlZCBoZXggc3RyaW5nIHdpdGggY3JlYXRlIGJ5dGVjb2RlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc291cmNlTWFwIHNvbGlkaXR5IHNvdXJjZSBtYXAgZm9yIGNyZWF0ZSBieXRlY29kZVxuICogQHByb3BlcnR5IHtPYmplY3R9IGFzdCBBYnN0cmFjdCBTeW50YXggVHJlZSBmcm9tIFNvbGlkaXR5XG4gKiBAcHJvcGVydHkge3N0cmluZ30gZGVwbG95ZWRCaW5hcnkgMHgtcHJlZml4ZWQgY29tcGlsZWQgYmluYXJ5IChvbiBjaGFpbilcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkZXBsb3llZFNvdXJjZU1hcCBzb2xpZGl0eSBzb3VyY2UgbWFwIGZvciBvbi1jaGFpbiBieXRlY29kZVxuICovXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2RlYnVnZ2VyLmpzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHJ1ZmZsZS1leHBlY3RcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJ0cnVmZmxlLWV4cGVjdFwiXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6c2Vzc2lvblwiKTtcblxuaW1wb3J0IHRyYWNlIGZyb20gXCJsaWIvdHJhY2Uvc2VsZWN0b3JzXCI7XG5pbXBvcnQgZXZtIGZyb20gXCJsaWIvZXZtL3NlbGVjdG9yc1wiO1xuaW1wb3J0IGFzdCBmcm9tIFwibGliL2FzdC9zZWxlY3RvcnNcIjtcbmltcG9ydCBzb2xpZGl0eSBmcm9tIFwibGliL3NvbGlkaXR5L3NlbGVjdG9yc1wiO1xuXG5pbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSBcImxpYi9zdG9yZVwiO1xuXG5pbXBvcnQgKiBhcyBjb250cm9sbGVyIGZyb20gXCJsaWIvY29udHJvbGxlci9hY3Rpb25zXCI7XG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuL2FjdGlvbnNcIjtcblxuaW1wb3J0IHJvb3RTYWdhIGZyb20gXCIuL3NhZ2FzXCI7XG5pbXBvcnQgcmVkdWNlciBmcm9tIFwiLi9yZWR1Y2Vyc1wiO1xuXG4vKipcbiAqIERlYnVnZ2VyIFNlc3Npb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Vzc2lvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PENvbnRyYWN0Pn0gY29udHJhY3RzIC0gY29udHJhY3QgZGVmaW5pdGlvbnNcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBmaWxlcyAtIGFycmF5IG9mIGZpbGVuYW1lcyBmb3Igc291cmNlTWFwIGluZGV4ZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR4SGFzaCAtIHRyYW5zYWN0aW9uIGhhc2hcbiAgICogQHBhcmFtIHtXZWIzUHJvdmlkZXJ9IHByb3ZpZGVyIC0gd2ViMyBwcm92aWRlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29udHJhY3RzLCBmaWxlcywgdHhIYXNoLCBwcm92aWRlcikge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fc3RvcmUgPSBjb25maWd1cmVTdG9yZShyZWR1Y2VyLCByb290U2FnYSk7XG5cbiAgICBsZXQgeyBjb250ZXh0cywgc291cmNlcyB9ID0gU2Vzc2lvbi5ub3JtYWxpemUoY29udHJhY3RzLCBmaWxlcyk7XG5cbiAgICAvLyByZWNvcmQgY29udHJhY3RzXG4gICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5yZWNvcmRDb250cmFjdHMoY29udGV4dHMsIHNvdXJjZXMpKTtcblxuICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKGFjdGlvbnMuc3RhcnQodHhIYXNoLCBwcm92aWRlcikpO1xuICB9XG5cbiAgcmVhZHkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKCAoYWNjZXB0LCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3N0b3JlLnN1YnNjcmliZSggKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZXNzaW9uID09IFwiQUNUSVZFXCIpIHtcbiAgICAgICAgICBhY2NlcHQoKVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLnN0YXRlLnNlc3Npb24gPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHJlamVjdCh0aGlzLnN0YXRlLnNlc3Npb24uZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB1cCBhcnRpZmFjdHMgaW50byBcImNvbnRleHRzXCIgYW5kIFwic291cmNlc1wiLCBkaXZpZGluZyBhcnRpZmFjdFxuICAgKiBkYXRhIGludG8gYXBwcm9wcmlhdGUgYnVja2V0cy5cbiAgICpcbiAgICogTXVsdGlwbGUgY29udHJhY3RzIGNhbiBiZSBkZWZpbmVkIGluIHRoZSBzYW1lIHNvdXJjZSBmaWxlLCBidXQgaGF2ZVxuICAgKiBkaWZmZXJlbnQgYnl0ZWNvZGVzLlxuICAgKlxuICAgKiBUaGlzIGl0ZXJhdGVzIG92ZXIgdGhlIGNvbnRyYWN0cyBhbmQgY29sbGVjdHMgYmluYXJpZXMgc2VwYXJhdGVseVxuICAgKiBmcm9tIHNvdXJjZXMsIHVzaW5nIHRoZSBvcHRpb25hbCBgZmlsZXNgIGFyZ3VtZW50IHRvIGZvcmNlXG4gICAqIHNvdXJjZSBvcmRlcmluZy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemUoY29udHJhY3RzLCBmaWxlcyA9IG51bGwpIHtcbiAgICBsZXQgc291cmNlc0J5UGF0aCA9IHt9O1xuICAgIGxldCBjb250ZXh0cyA9IFtdO1xuICAgIGxldCBzb3VyY2VzO1xuXG4gICAgZm9yIChsZXQgY29udHJhY3Qgb2YgY29udHJhY3RzKSB7XG4gICAgICBsZXQge1xuICAgICAgICBjb250cmFjdE5hbWUsXG4gICAgICAgIGJpbmFyeSxcbiAgICAgICAgc291cmNlTWFwLFxuICAgICAgICBkZXBsb3llZEJpbmFyeSxcbiAgICAgICAgZGVwbG95ZWRTb3VyY2VNYXAsXG4gICAgICAgIHNvdXJjZVBhdGgsXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgYXN0XG4gICAgICB9ID0gY29udHJhY3Q7XG5cbiAgICAgIHNvdXJjZXNCeVBhdGhbc291cmNlUGF0aF0gPSB7IHNvdXJjZVBhdGgsIHNvdXJjZSwgYXN0IH07XG5cbiAgICAgIGlmIChiaW5hcnkgJiYgYmluYXJ5ICE9IFwiMHhcIikge1xuICAgICAgICBjb250ZXh0cy5wdXNoKHtcbiAgICAgICAgICBjb250cmFjdE5hbWUsXG4gICAgICAgICAgYmluYXJ5LFxuICAgICAgICAgIHNvdXJjZU1hcFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlcGxveWVkQmluYXJ5ICYmIGRlcGxveWVkQmluYXJ5ICE9IFwiMHhcIikge1xuICAgICAgICBjb250ZXh0cy5wdXNoKHtcbiAgICAgICAgICBjb250cmFjdE5hbWUsXG4gICAgICAgICAgYmluYXJ5OiBkZXBsb3llZEJpbmFyeSxcbiAgICAgICAgICBzb3VyY2VNYXA6IGRlcGxveWVkU291cmNlTWFwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmlsZXMpIHtcbiAgICAgIHNvdXJjZXMgPSBPYmplY3QudmFsdWVzKHNvdXJjZXNCeVBhdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VyY2VzID0gZmlsZXMubWFwKGZpbGUgPT4gc291cmNlc0J5UGF0aFtmaWxlXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY29udGV4dHMsIHNvdXJjZXMgfTtcbiAgfVxuXG4gIGdldCBzdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtcbiAgfVxuXG4gIHZpZXcoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IodGhpcy5zdGF0ZSk7XG4gIH1cblxuICBnZXQgZmluaXNoZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuc2Vzc2lvbiA9PSBcIkZJTklTSEVEXCI7XG4gIH1cblxuICBnZXQgZmFpbGVkKCkge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkICYmIHRoaXMudmlldyhldm0uY3VycmVudC5jYWxsc3RhY2spLmxlbmd0aFxuICB9XG5cbiAgZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZmluaXNoZWQpIHtcbiAgICAgIGRlYnVnKFwiZmluaXNoZWQ6IGludGVyY2VwdGluZyBhY3Rpb24gJW9cIiwgYWN0aW9uKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGludGVycnVwdCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChjb250cm9sbGVyLmludGVycnVwdCgpKTtcbiAgfVxuXG4gIGFkdmFuY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goY29udHJvbGxlci5hZHZhbmNlKCkpO1xuICB9XG5cbiAgc3RlcE5leHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goY29udHJvbGxlci5zdGVwTmV4dCgpKTtcbiAgfVxuXG4gIHN0ZXBPdmVyKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKGNvbnRyb2xsZXIuc3RlcE92ZXIoKSk7XG4gIH1cblxuICBzdGVwSW50bygpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChjb250cm9sbGVyLnN0ZXBJbnRvKCkpO1xuICB9XG5cbiAgc3RlcE91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChjb250cm9sbGVyLnN0ZXBPdXQoKSk7XG4gIH1cblxuICBjb250aW51ZVVudGlsKC4uLmJyZWFrcG9pbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goY29udHJvbGxlci5jb250aW51ZVVudGlsKC4uLmJyZWFrcG9pbnRzKSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc2Vzc2lvbi9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvdmFsdWVzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC92YWx1ZXNcIlxuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHJ1ZmZsZS1zb2xpZGl0eS11dGlsc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInRydWZmbGUtc29saWRpdHktdXRpbHNcIlxuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHJ1ZmZsZS1jb2RlLXV0aWxzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwidHJ1ZmZsZS1jb2RlLXV0aWxzXCJcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjphc3Q6bWFwXCIpO1xuXG5pbXBvcnQgSW50ZXJ2YWxUcmVlIGZyb20gXCJub2RlLWludGVydmFsLXRyZWVcIjtcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5nZShub2RlKSB7XG4gIC8vIHNyYzogXCI8c3RhcnQ+OjxsZW5ndGg+OjxfPlwiXG4gIC8vIHJldHVybnMgW3N0YXJ0LCBlbmRdXG4gIGxldCBbc3RhcnQsIGxlbmd0aF0gPSBub2RlLnNyY1xuICAgIC5zcGxpdChcIjpcIilcbiAgICAuc2xpY2UoMCwgMilcbiAgICAubWFwKCAoaSkgPT4gcGFyc2VJbnQoaSkgKTtcblxuICByZXR1cm4gW3N0YXJ0LCBzdGFydCArIGxlbmd0aF07XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlTm9kZXMobm9kZSwgcG9pbnRlciA9IFwiXCIpIHtcbiAgaWYgKG5vZGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiBbXS5jb25jYXQoXG4gICAgICAuLi5ub2RlLm1hcCggKHN1YiwgaSkgPT4gcmFuZ2VOb2RlcyhzdWIsIGAke3BvaW50ZXJ9LyR7aX1gKSApXG4gICAgKTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcblxuICAgIGlmIChub2RlLnNyYykge1xuICAgICAgcmVzdWx0cy5wdXNoKHtwb2ludGVyLCByYW5nZTogZ2V0UmFuZ2Uobm9kZSl9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cy5jb25jYXQoXG4gICAgICAuLi5PYmplY3Qua2V5cyhub2RlKS5tYXAoXG4gICAgICAgIChrZXkpID0+IHJhbmdlTm9kZXMobm9kZVtrZXldLCBgJHtwb2ludGVyfS8ke2tleX1gKVxuICAgICAgKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRSYW5nZShub2RlLCBzb3VyY2VTdGFydCwgc291cmNlTGVuZ3RoKSB7XG4gIGxldCByYW5nZXMgPSByYW5nZU5vZGVzKG5vZGUpO1xuICBsZXQgdHJlZSA9IG5ldyBJbnRlcnZhbFRyZWUoKTtcblxuICByYW5nZXMuZm9yRWFjaCggKHtyYW5nZSwgcG9pbnRlcn0pID0+IHtcbiAgICBsZXQgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7XG5cbiAgICB0cmVlLmluc2VydChzdGFydCwgZW5kLCB7cmFuZ2UsIHBvaW50ZXJ9KTtcbiAgfSk7XG5cbiAgbGV0IHNvdXJjZUVuZCA9IHNvdXJjZVN0YXJ0ICsgc291cmNlTGVuZ3RoO1xuXG4gIGxldCBvdmVybGFwcGluZyA9IHRyZWUuc2VhcmNoKHNvdXJjZVN0YXJ0LCBzb3VyY2VFbmQpO1xuXG4gIC8vIGZpbmQgbm9kZXMgdGhhdCBmdWxseSBjb250YWluIHJlcXVlc3RlZCByYW5nZSxcbiAgLy8gcmV0dXJuIGxvbmdlc3QgcG9pbnRlclxuICByZXR1cm4gb3ZlcmxhcHBpbmdcbiAgICAuZmlsdGVyKCAoe3JhbmdlfSkgPT4gc291cmNlU3RhcnQgPj0gcmFuZ2VbMF0gJiYgc291cmNlRW5kIDw9IHJhbmdlWzFdIClcbiAgICAubWFwKCAoe3BvaW50ZXJ9KSA9PiBwb2ludGVyIClcbiAgICAucmVkdWNlKCAoYSwgYikgPT4gYS5sZW5ndGggPiBiLmxlbmd0aCA/IGEgOiBiLCBcIlwiICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2FzdC9tYXAuanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlLWludGVydmFsLXRyZWVcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJub2RlLWludGVydmFsLXRyZWVcIlxuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09IFwicHJvZHVjdGlvblwiKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vcHJvZHVjdGlvblwiKTtcbn0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT0gXCJ0ZXN0XCIpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi90ZXN0XCIpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9kZXZlbG9wbWVudFwiKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc3RvcmUvaW5kZXguanMiLCJpbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSBcIi4vY29tbW9uXCI7XG5leHBvcnQgZGVmYXVsdCBjb25maWd1cmVTdG9yZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc3RvcmUvcHJvZHVjdGlvbi5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpzdG9yZTpjb21tb25cIik7XG5jb25zdCByZWR1eERlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpyZWR1eFwiKTtcblxuaW1wb3J0IHsgY29tcG9zZSwgY3JlYXRlU3RvcmUsIGFwcGx5TWlkZGxld2FyZSB9IGZyb20gXCJyZWR1eFwiO1xuaW1wb3J0IGNyZWF0ZVNhZ2FNaWRkbGV3YXJlIGZyb20gXCJyZWR1eC1zYWdhXCI7XG5pbXBvcnQgY3JlYXRlTG9nZ2VyIGZyb20gXCJyZWR1eC1jbGktbG9nZ2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBhYmJyZXZpYXRlVmFsdWVzKHZhbHVlLCBvcHRpb25zID0ge30sIGRlcHRoID0gMCkge1xuICBvcHRpb25zLnN0cmluZ0xpbWl0ID0gb3B0aW9ucy5zdHJpbmdMaW1pdCB8fCA2NjtcbiAgb3B0aW9ucy5hcnJheUxpbWl0ID0gb3B0aW9ucy5hcnJheUxpbWl0IHx8IDg7XG4gIG9wdGlvbnMucmVjdXJzZUxpbWl0ID0gb3B0aW9ucy5yZWN1cnNlTGltaXQgfHwgNDtcblxuICBpZiAoZGVwdGggPiBvcHRpb25zLnJlY3Vyc2VMaW1pdCkge1xuICAgIHJldHVybiBcIi4uLlwiO1xuICB9XG5cbiAgY29uc3QgcmVjdXJzZSA9IChjaGlsZCkgPT4gYWJicmV2aWF0ZVZhbHVlcyhjaGlsZCwgb3B0aW9ucywgZGVwdGggKyAxKTtcblxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIGlmICh2YWx1ZS5sZW5ndGggPiBvcHRpb25zLmFycmF5TGltaXQpIHtcbiAgICAgIHZhbHVlID0gW1xuICAgICAgICAuLi52YWx1ZS5zbGljZSgwLCBvcHRpb25zLmFycmF5TGltaXQgLyAyKSxcbiAgICAgICAgXCIuLi5cIixcbiAgICAgICAgLi4udmFsdWUuc2xpY2UodmFsdWUubGVuZ3RoIC0gb3B0aW9ucy5hcnJheUxpbWl0IC8gMiArIDEpXG4gICAgICBdO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS5tYXAocmVjdXJzZSk7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgLi4uT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcChcbiAgICAgICAgKFtrLCB2XSkgPT4gKHsgW3JlY3Vyc2UoayldOiByZWN1cnNlKHYpIH0pXG4gICAgICApXG4gICAgKTtcblxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS5sZW5ndGggPiBvcHRpb25zLnN0cmluZ0xpbWl0KSB7XG4gICAgbGV0IGlubmVyID0gXCIuLi5cIjtcbiAgICBsZXQgZXh0cmFjdEFtb3VudCA9IChvcHRpb25zLnN0cmluZ0xpbWl0IC0gaW5uZXIubGVuZ3RoKSAvIDI7XG4gICAgbGV0IGxlYWRpbmcgPSB2YWx1ZS5zbGljZSgwLCBNYXRoLmNlaWwoZXh0cmFjdEFtb3VudCkpO1xuICAgIGxldCB0cmFpbGluZyA9IHZhbHVlLnNsaWNlKHZhbHVlLmxlbmd0aCAtIE1hdGguZmxvb3IoZXh0cmFjdEFtb3VudCkpO1xuICAgIHJldHVybiBgJHtsZWFkaW5nfSR7aW5uZXJ9JHt0cmFpbGluZ31gO1xuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZ3VyZVN0b3JlIChyZWR1Y2VyLCBzYWdhLCBpbml0aWFsU3RhdGUsIGNvbXBvc2VFbmhhbmNlcnMpIHtcbiAgY29uc3Qgc2FnYU1pZGRsZXdhcmUgPSBjcmVhdGVTYWdhTWlkZGxld2FyZSgpO1xuXG4gIGlmICghY29tcG9zZUVuaGFuY2Vycykge1xuICAgIGNvbXBvc2VFbmhhbmNlcnMgPSBjb21wb3NlO1xuICB9XG5cbiAgY29uc3QgbG9nZ2VyTWlkZGxld2FyZSA9IGNyZWF0ZUxvZ2dlcih7XG4gICAgbG9nOiByZWR1eERlYnVnLFxuICAgIHN0YXRlVHJhbnNmb3JtZXI6IChzdGF0ZSkgPT4gYWJicmV2aWF0ZVZhbHVlcyhzdGF0ZSwge1xuICAgICAgYXJyYXlMaW1pdDogNCxcbiAgICAgIHJlY3Vyc2VMaW1pdDogM1xuICAgIH0pLFxuICAgIGFjdGlvblRyYW5zZm9ybWVyOiBhYmJyZXZpYXRlVmFsdWVzLFxuICB9KTtcblxuICBsZXQgc3RvcmUgPSBjcmVhdGVTdG9yZShcbiAgICByZWR1Y2VyLCBpbml0aWFsU3RhdGUsXG5cbiAgICBjb21wb3NlRW5oYW5jZXJzKFxuICAgICAgYXBwbHlNaWRkbGV3YXJlKFxuICAgICAgICBzYWdhTWlkZGxld2FyZSxcbiAgICAgICAgbG9nZ2VyTWlkZGxld2FyZVxuICAgICAgKVxuICAgIClcbiAgKTtcblxuICBzYWdhTWlkZGxld2FyZS5ydW4oc2FnYSk7XG5cbiAgcmV0dXJuIHN0b3JlO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9zdG9yZS9jb21tb24uanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWR1eC1zYWdhXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVkdXgtc2FnYVwiXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWR1eC1jbGktbG9nZ2VyXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVkdXgtY2xpLWxvZ2dlclwiXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6c2Vzc2lvbjpzYWdhc1wiKTtcblxuaW1wb3J0IHsgY2FuY2VsLCBjYWxsLCBhbGwsIGZvcmssIHRha2UsIHB1dCB9IGZyb20gJ3JlZHV4LXNhZ2EvZWZmZWN0cyc7XG5cbmltcG9ydCB7IHByZWZpeE5hbWUgfSBmcm9tIFwibGliL2hlbHBlcnNcIjtcblxuaW1wb3J0ICogYXMgYXN0IGZyb20gXCJsaWIvYXN0L3NhZ2FzXCI7XG5pbXBvcnQgKiBhcyBjb250cm9sbGVyIGZyb20gXCJsaWIvY29udHJvbGxlci9zYWdhc1wiO1xuaW1wb3J0ICogYXMgc29saWRpdHkgZnJvbSBcImxpYi9zb2xpZGl0eS9zYWdhc1wiO1xuaW1wb3J0ICogYXMgZXZtIGZyb20gXCJsaWIvZXZtL3NhZ2FzXCI7XG5pbXBvcnQgKiBhcyB0cmFjZSBmcm9tIFwibGliL3RyYWNlL3NhZ2FzXCI7XG5pbXBvcnQgKiBhcyBkYXRhIGZyb20gXCJsaWIvZGF0YS9zYWdhc1wiO1xuaW1wb3J0ICogYXMgd2ViMyBmcm9tIFwibGliL3dlYjMvc2FnYXNcIjtcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi4vYWN0aW9uc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gKnNhZ2EgKCkge1xuICBkZWJ1ZyhcInN0YXJ0aW5nIGxpc3RlbmVyc1wiKTtcbiAgbGV0IGxpc3RlbmVycyA9IHlpZWxkICpmb3JrTGlzdGVuZXJzKCk7XG5cbiAgLy8gcmVjZWl2aW5nICYgc2F2aW5nIGNvbnRyYWN0cyBpbnRvIHN0YXRlXG4gIGRlYnVnKFwid2FpdGluZyBmb3IgY29udHJhY3QgaW5mb3JtYXRpb25cIik7XG4gIGxldCB7IGNvbnRleHRzLCBzb3VyY2VzIH0gPSB5aWVsZCB0YWtlKGFjdGlvbnMuUkVDT1JEX0NPTlRSQUNUUyk7XG5cbiAgZGVidWcoXCJyZWNvcmRpbmcgY29udHJhY3QgYmluYXJpZXNcIik7XG4gIHlpZWxkICpyZWNvcmRDb250ZXh0cyguLi5jb250ZXh0cyk7XG5cbiAgZGVidWcoXCJyZWNvcmRpbmcgY29udHJhY3Qgc291cmNlc1wiKTtcbiAgeWllbGQgKnJlY29yZFNvdXJjZXMoLi4uc291cmNlcyk7XG5cbiAgZGVidWcoXCJ3YWl0aW5nIGZvciBzdGFydFwiKTtcbiAgLy8gd2FpdCBmb3Igc3RhcnQgc2lnbmFsXG4gIGxldCB7dHhIYXNoLCBwcm92aWRlcn0gPSB5aWVsZCB0YWtlKGFjdGlvbnMuU1RBUlQpO1xuICBkZWJ1ZyhcInN0YXJ0aW5nXCIpO1xuXG4gIC8vIHByb2Nlc3MgdHJhbnNhY3Rpb25cbiAgZGVidWcoXCJmZXRjaGluZyB0cmFuc2FjdGlvbiBpbmZvXCIpO1xuICBsZXQgZXJyID0geWllbGQgKmZldGNoVHgodHhIYXNoLCBwcm92aWRlcik7XG4gIGlmIChlcnIpIHtcbiAgICBkZWJ1ZyhcImVycm9yICVvXCIsIGVycik7XG4gICAgeWllbGQgKmVycm9yKGVycik7XG5cbiAgfSBlbHNlIHtcbiAgICBkZWJ1ZyhcInZpc2l0aW5nIEFTVHNcIik7XG4gICAgLy8gdmlzaXQgYXN0c1xuICAgIHlpZWxkICphc3QudmlzaXRBbGwoKTtcblxuICAgIGRlYnVnKFwicmVhZHlpbmdcIik7XG4gICAgLy8gc2lnbmFsIHRoYXQgc3RlcHBpbmcgY2FuIGJlZ2luXG4gICAgeWllbGQgKnJlYWR5KCk7XG5cbiAgICBkZWJ1ZyhcIndhaXRpbmcgZm9yIHRyYWNlIEVPVFwiKTtcbiAgICAvLyB3YWl0IHVudGlsIHRyYWNlIGhpdHMgRU9UXG4gICAgeWllbGQgKnRyYWNlLndhaXQoKTtcblxuICAgIGRlYnVnKFwiZmluaXNoaW5nXCIpO1xuICAgIC8vIGZpbmlzaFxuICAgIHlpZWxkIHB1dChhY3Rpb25zLmZpbmlzaCgpKTtcbiAgfVxuXG4gIGRlYnVnKFwic3RvcHBpbmcgbGlzdGVuZXJzXCIpO1xuICB5aWVsZCBhbGwoXG4gICAgbGlzdGVuZXJzLm1hcCh0YXNrID0+IGNhbmNlbCh0YXNrKSlcbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlZml4TmFtZShcInNlc3Npb25cIiwgc2FnYSk7XG5cblxuZnVuY3Rpb24gKmZvcmtMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiB5aWVsZCBhbGwoXG4gICAgW2FzdCwgY29udHJvbGxlciwgZGF0YSwgZXZtLCBzb2xpZGl0eSwgdHJhY2UsIHdlYjNdXG4gICAgICAubWFwKCBhcHAgPT4gZm9yayhhcHAuc2FnYSkgKVxuICApO1xufVxuXG5mdW5jdGlvbiogZmV0Y2hUeCh0eEhhc2gsIHByb3ZpZGVyKSB7XG4gIGxldCByZXN1bHQgPSB5aWVsZCAqd2ViMy5pbnNwZWN0VHJhbnNhY3Rpb24odHhIYXNoLCBwcm92aWRlcik7XG5cbiAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgIHJldHVybiByZXN1bHQuZXJyb3I7XG4gIH1cblxuICB5aWVsZCAqZXZtLmJlZ2luKHJlc3VsdCk7XG5cbiAgbGV0IGFkZHJlc3NlcyA9IHlpZWxkICp0cmFjZS5wcm9jZXNzVHJhY2UocmVzdWx0LnRyYWNlKTtcbiAgaWYgKHJlc3VsdC5hZGRyZXNzICYmIGFkZHJlc3Nlcy5pbmRleE9mKHJlc3VsdC5hZGRyZXNzKSA9PSAtMSkge1xuICAgIGFkZHJlc3Nlcy5wdXNoKHJlc3VsdC5hZGRyZXNzKTtcbiAgfVxuXG4gIGxldCBiaW5hcmllcyA9IHlpZWxkICp3ZWIzLm9idGFpbkJpbmFyaWVzKGFkZHJlc3Nlcyk7XG5cbiAgeWllbGQgYWxsKFxuICAgIGFkZHJlc3Nlcy5tYXAoIChhZGRyZXNzLCBpKSA9PiBjYWxsKHJlY29yZEluc3RhbmNlLCBhZGRyZXNzLCBiaW5hcmllc1tpXSkgKVxuICApO1xufVxuXG5mdW5jdGlvbiogcmVjb3JkQ29udGV4dHMoLi4uY29udGV4dHMpIHtcbiAgZm9yIChsZXQgeyBjb250cmFjdE5hbWUsIGJpbmFyeSwgc291cmNlTWFwIH0gb2YgY29udGV4dHMpIHtcbiAgICB5aWVsZCAqZXZtLmFkZENvbnRleHQoY29udHJhY3ROYW1lLCBiaW5hcnkpO1xuXG4gICAgaWYgKHNvdXJjZU1hcCkge1xuICAgICAgeWllbGQgKnNvbGlkaXR5LmFkZFNvdXJjZU1hcChiaW5hcnksIHNvdXJjZU1hcCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uKiByZWNvcmRTb3VyY2VzKC4uLnNvdXJjZXMpIHtcbiAgZm9yIChsZXQgeyBzb3VyY2VQYXRoLCBzb3VyY2UsIGFzdCB9IG9mIHNvdXJjZXMpIHtcbiAgICB5aWVsZCAqc29saWRpdHkuYWRkU291cmNlKHNvdXJjZSwgc291cmNlUGF0aCwgYXN0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiAqcmVjb3JkSW5zdGFuY2UoYWRkcmVzcywgYmluYXJ5KSB7XG4gIHlpZWxkICpldm0uYWRkSW5zdGFuY2UoYWRkcmVzcywgYmluYXJ5KTtcbn1cblxuZnVuY3Rpb24gKnJlYWR5KCkge1xuICB5aWVsZCBwdXQoYWN0aW9ucy5yZWFkeSgpKTtcbn1cblxuZnVuY3Rpb24gKmVycm9yKGVycikge1xuICB5aWVsZCBwdXQoYWN0aW9ucy5lcnJvcihlcnIpKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc2Vzc2lvbi9zYWdhcy9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjphc3Q6c2FnYXNcIik7XG5cbmltcG9ydCB7IGFsbCwgY2FsbCwgcmFjZSwgZm9yaywgam9pbiwgdGFrZSwgdGFrZUV2ZXJ5LCBwdXQsIHNlbGVjdCB9IGZyb20gXCJyZWR1eC1zYWdhL2VmZmVjdHNcIjtcblxuaW1wb3J0IHsgcHJlZml4TmFtZSB9IGZyb20gXCJsaWIvaGVscGVyc1wiO1xuXG5pbXBvcnQgKiBhcyBkYXRhIGZyb20gXCJsaWIvZGF0YS9zYWdhc1wiO1xuXG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuLi9hY3Rpb25zXCI7XG5cbmltcG9ydCBhc3QgZnJvbSBcIi4uL3NlbGVjdG9yc1wiO1xuXG5cbmZ1bmN0aW9uICp3YWxrKHNvdXJjZUlkLCBub2RlLCBwb2ludGVyID0gXCJcIiwgcGFyZW50SWQgPSBudWxsKSB7XG4gIGRlYnVnKFwid2Fsa2luZyAlbyAlb1wiLCBwb2ludGVyLCBub2RlKTtcblxuICB5aWVsZCAqaGFuZGxlRW50ZXIoc291cmNlSWQsIG5vZGUsIHBvaW50ZXIsIHBhcmVudElkKTtcblxuICBpZiAobm9kZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgZm9yIChsZXQgW2ksIGNoaWxkXSBvZiBub2RlLmVudHJpZXMoKSkge1xuICAgICAgeWllbGQgY2FsbCh3YWxrLCBzb3VyY2VJZCwgY2hpbGQsIGAke3BvaW50ZXJ9LyR7aX1gLCBwYXJlbnRJZCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICBmb3IgKGxldCBba2V5LCBjaGlsZF0gb2YgT2JqZWN0LmVudHJpZXMobm9kZSkpIHtcbiAgICAgIHlpZWxkIGNhbGwod2Fsaywgc291cmNlSWQsIGNoaWxkLCBgJHtwb2ludGVyfS8ke2tleX1gLCBub2RlLmlkKTtcbiAgICB9XG4gIH1cblxuICB5aWVsZCAqaGFuZGxlRXhpdChzb3VyY2VJZCwgbm9kZSwgcG9pbnRlcik7XG59XG5cbmZ1bmN0aW9uICpoYW5kbGVFbnRlcihzb3VyY2VJZCwgbm9kZSwgcG9pbnRlciwgcGFyZW50SWQpIHtcbiAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkZWJ1ZyhcImVudGVyaW5nICVzXCIsIHBvaW50ZXIpO1xuXG4gIGlmIChub2RlLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICBkZWJ1ZyhcIiVzIHJlY29yZGluZyBzY29wZSAlc1wiLCBwb2ludGVyLCBub2RlLmlkKTtcbiAgICB5aWVsZCAqZGF0YS5zY29wZShub2RlLmlkLCBwb2ludGVyLCBwYXJlbnRJZCwgc291cmNlSWQpO1xuICB9XG5cbiAgc3dpdGNoIChub2RlLm5vZGVUeXBlKSB7XG4gICAgY2FzZSBcIlZhcmlhYmxlRGVjbGFyYXRpb25cIjpcbiAgICAgIGRlYnVnKFwiJXMgcmVjb3JkaW5nIHZhcmlhYmxlICVvXCIsIHBvaW50ZXIsIG5vZGUpO1xuICAgICAgeWllbGQgKmRhdGEuZGVjbGFyZShub2RlKTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uICpoYW5kbGVFeGl0KHNvdXJjZUlkLCBub2RlLCBwb2ludGVyKSB7XG4gIGRlYnVnKFwiZXhpdGluZyAlc1wiLCBwb2ludGVyKTtcblxuICAvLyBuby1vcCByaWdodCBub3dcbn1cblxuZnVuY3Rpb24gKndhbGtTYWdhKHtzb3VyY2VJZCwgYXN0fSkge1xuICB5aWVsZCB3YWxrKHNvdXJjZUlkLCBhc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gKnZpc2l0QWxsKGlkeCkge1xuICBsZXQgc291cmNlcyA9IHlpZWxkIHNlbGVjdChhc3Qudmlld3Muc291cmNlcyk7XG5cbiAgbGV0IHRhc2tzID0geWllbGQgYWxsKFxuICAgIE9iamVjdC5lbnRyaWVzKHNvdXJjZXMpXG4gICAgICAuZmlsdGVyKCAoW2lkLCB7YXN0fV0pID0+ICEhYXN0IClcbiAgICAgIC5tYXAoIChbaWQsIHthc3R9XSkgPT4gZm9yayggKCkgPT4gcHV0KGFjdGlvbnMudmlzaXQoaWQsIGFzdCkpKSApXG4gIClcblxuICBpZiAodGFza3MubGVuZ3RoID4gMCkge1xuICAgIHlpZWxkIGpvaW4oLi4udGFza3MpO1xuICB9XG5cbiAgeWllbGQgcHV0KGFjdGlvbnMuZG9uZVZpc2l0aW5nKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIHNhZ2EoKSB7XG4gIHlpZWxkIHJhY2Uoe1xuICAgIHZpc2l0b3I6IHRha2VFdmVyeShhY3Rpb25zLlZJU0lULCB3YWxrU2FnYSksXG4gICAgZG9uZTogdGFrZShhY3Rpb25zLkRPTkVfVklTSVRJTkcpXG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhOYW1lKFwiYXN0XCIsIHNhZ2EpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9hc3Qvc2FnYXMvaW5kZXguanMiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6ZGF0YTpkZWNvZGVcIik7XG5cbmltcG9ydCB7QmlnTnVtYmVyfSBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XG5cbmltcG9ydCAqIGFzIG1lbW9yeSBmcm9tIFwiLi9tZW1vcnlcIjtcbmltcG9ydCAqIGFzIHN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IFdPUkRfU0laRSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkKHBvaW50ZXIsIHN0YXRlKSB7XG4gIGlmIChwb2ludGVyLnN0YWNrICE9IHVuZGVmaW5lZCAmJiBzdGF0ZS5zdGFjayAmJiBwb2ludGVyLnN0YWNrIDwgc3RhdGUuc3RhY2subGVuZ3RoKSB7XG4gICAgcmV0dXJuIHN0YXRlLnN0YWNrW3BvaW50ZXIuc3RhY2tdO1xuICB9IGVsc2UgaWYgKHBvaW50ZXIuc3RvcmFnZSAhPSB1bmRlZmluZWQgJiYgc3RhdGUuc3RvcmFnZSkge1xuICAgIHJldHVybiBzdG9yYWdlLnJlYWRSYW5nZShzdGF0ZS5zdG9yYWdlLCBwb2ludGVyLnN0b3JhZ2UpO1xuICB9IGVsc2UgaWYgKHBvaW50ZXIubWVtb3J5ICE9IHVuZGVmaW5lZCAmJiBzdGF0ZS5tZW1vcnkpIHtcbiAgICByZXR1cm4gbWVtb3J5LnJlYWRCeXRlcyhzdGF0ZS5tZW1vcnksIHBvaW50ZXIubWVtb3J5LnN0YXJ0LCBwb2ludGVyLm1lbW9yeS5sZW5ndGgpO1xuICB9IGVsc2UgaWYgKHBvaW50ZXIubGl0ZXJhbCkge1xuICAgIHJldHVybiBwb2ludGVyLmxpdGVyYWw7XG4gIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlVmFsdWUoZGVmaW5pdGlvbiwgcG9pbnRlciwgc3RhdGUsIC4uLmFyZ3MpIHtcbiAgbGV0IGJ5dGVzID0gcmVhZChwb2ludGVyLCBzdGF0ZSk7XG4gIGlmICghYnl0ZXMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc3dpdGNoICh1dGlscy50eXBlQ2xhc3MoZGVmaW5pdGlvbikpIHtcbiAgICBjYXNlIFwiYm9vbFwiOlxuICAgICAgcmV0dXJuICF1dGlscy50b0JpZ051bWJlcihieXRlcykuaXNaZXJvKCk7XG5cbiAgICBjYXNlIFwidWludFwiOlxuICAgICAgcmV0dXJuIHV0aWxzLnRvQmlnTnVtYmVyKGJ5dGVzKTtcblxuICAgIGNhc2UgXCJpbnRcIjpcbiAgICAgIHJldHVybiB1dGlscy50b1NpZ25lZEJpZ051bWJlcihieXRlcyk7XG5cbiAgICBjYXNlIFwiYWRkcmVzc1wiOlxuICAgICAgcmV0dXJuIHV0aWxzLnRvSGV4U3RyaW5nKGJ5dGVzLCB0cnVlKTtcblxuICAgIGNhc2UgXCJieXRlc1wiOlxuICAgICAgZGVidWcoXCJ0eXBlSWRlbnRpZmllciAlcyAlb1wiLCB1dGlscy50eXBlSWRlbnRpZmllcihkZWZpbml0aW9uKSwgYnl0ZXMpO1xuICAgICAgbGV0IGxlbmd0aCA9IHV0aWxzLnNwZWNpZmllZFNpemUoZGVmaW5pdGlvbik7XG4gICAgICByZXR1cm4gdXRpbHMudG9IZXhTdHJpbmcoYnl0ZXMsIGxlbmd0aCk7XG5cbiAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICBkZWJ1ZyhcInR5cGVJZGVudGlmaWVyICVzICVvXCIsIHV0aWxzLnR5cGVJZGVudGlmaWVyKGRlZmluaXRpb24pLCBieXRlcyk7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBieXRlcyk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgZGVidWcoXCJVbmtub3duIHZhbHVlIHR5cGU6ICVzXCIsIHV0aWxzLnR5cGVJZGVudGlmaWVyKGRlZmluaXRpb24pKTtcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVNZW1vcnlSZWZlcmVuY2UoZGVmaW5pdGlvbiwgcG9pbnRlciwgc3RhdGUsIC4uLmFyZ3MpIHtcbiAgbGV0IHJhd1ZhbHVlID0gdXRpbHMudG9CaWdOdW1iZXIocmVhZChwb2ludGVyLCBzdGF0ZSkpLnRvTnVtYmVyKCk7XG5cbiAgdmFyIGJ5dGVzO1xuICBzd2l0Y2ggKHV0aWxzLnR5cGVDbGFzcyhkZWZpbml0aW9uKSkge1xuXG4gICAgY2FzZSBcImJ5dGVzXCI6XG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgYnl0ZXMgPSByZWFkKHtcbiAgICAgICAgbWVtb3J5OiB7IHN0YXJ0OiByYXdWYWx1ZSwgbGVuZ3RoOiBXT1JEX1NJWkV9XG4gICAgICB9LCBzdGF0ZSk7IC8vIGJ5dGVzIGNvbnRhaW4gbGVuZ3RoXG5cbiAgICAgIHJldHVybiBkZWNvZGVWYWx1ZShkZWZpbml0aW9uLCB7XG4gICAgICAgIG1lbW9yeTogeyBzdGFydDogcmF3VmFsdWUgKyBXT1JEX1NJWkUsIGxlbmd0aDogYnl0ZXMgfVxuICAgICAgfSwgc3RhdGUsIC4uLmFyZ3MpO1xuXG4gICAgY2FzZSBcImFycmF5XCI6XG4gICAgICBieXRlcyA9IHV0aWxzLnRvQmlnTnVtYmVyKHJlYWQoe1xuICAgICAgICBtZW1vcnk6IHsgc3RhcnQ6IHJhd1ZhbHVlLCBsZW5ndGg6IFdPUkRfU0laRSB9LFxuICAgICAgfSwgc3RhdGUpKS50b051bWJlcigpOyAgLy8gYnl0ZXMgY29udGFpbiBhcnJheSBsZW5ndGhcblxuICAgICAgYnl0ZXMgPSByZWFkKHsgbWVtb3J5OiB7XG4gICAgICAgIHN0YXJ0OiByYXdWYWx1ZSArIFdPUkRfU0laRSwgbGVuZ3RoOiBieXRlcyAqIFdPUkRfU0laRVxuICAgICAgfX0sIHN0YXRlKTsgLy8gbm93IGJ5dGVzIGNvbnRhaW4gaXRlbXNcblxuICAgICAgcmV0dXJuIG1lbW9yeS5jaHVuayhieXRlcywgV09SRF9TSVpFKVxuICAgICAgICAubWFwKFxuICAgICAgICAgIChjaHVuaykgPT4gZGVjb2RlKHV0aWxzLmJhc2VEZWZpbml0aW9uKGRlZmluaXRpb24pLCB7XG4gICAgICAgICAgICBsaXRlcmFsOiBjaHVua1xuICAgICAgICAgIH0sIHN0YXRlLCAuLi5hcmdzKVxuICAgICAgICApXG5cbiAgICBjYXNlIFwic3RydWN0XCI6XG4gICAgICBsZXQgW3JlZnNdID0gYXJncztcbiAgICAgIGxldCBzdHJ1Y3REZWZpbml0aW9uID0gcmVmc1tkZWZpbml0aW9uLnR5cGVOYW1lLnJlZmVyZW5jZWREZWNsYXJhdGlvbl07XG4gICAgICBsZXQgc3RydWN0VmFyaWFibGVzID0gc3RydWN0RGVmaW5pdGlvbi52YXJpYWJsZXMgfHwgW107XG5cbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFxuICAgICAgICB7fSwgLi4uc3RydWN0VmFyaWFibGVzXG4gICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICh7bmFtZSwgaWR9LCBpKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBtZW1iZXJEZWZpbml0aW9uID0gcmVmc1tpZF0uZGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgbGV0IG1lbWJlclBvaW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgbWVtb3J5OiB7IHN0YXJ0OiByYXdWYWx1ZSArIGkgKiBXT1JEX1NJWkUsIGxlbmd0aDogV09SRF9TSVpFIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgLy8gbGV0IG1lbWJlclBvaW50ZXIgPSBtZW1vcnkucmVhZChzdGF0ZS5tZW1vcnksIHBvaW50ZXIgKyBpICogV09SRF9TSVpFKTtcblxuICAgICAgICAgICAgICAvLyBIQUNLXG4gICAgICAgICAgICAgIG1lbWJlckRlZmluaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgLi4ubWVtYmVyRGVmaW5pdGlvbixcblxuICAgICAgICAgICAgICAgIHR5cGVEZXNjcmlwdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgIC4uLm1lbWJlckRlZmluaXRpb24udHlwZURlc2NyaXB0aW9ucyxcblxuICAgICAgICAgICAgICAgICAgdHlwZUlkZW50aWZpZXI6XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRlZmluaXRpb24udHlwZURlc2NyaXB0aW9ucy50eXBlSWRlbnRpZmllclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fc3RvcmFnZV8vZywgXCJfbWVtb3J5X1wiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFtuYW1lXTogZGVjb2RlKFxuICAgICAgICAgICAgICAgICAgbWVtYmVyRGVmaW5pdGlvbiwgbWVtYmVyUG9pbnRlciwgc3RhdGUsIC4uLmFyZ3NcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgKTtcblxuXG4gICAgZGVmYXVsdDpcbiAgICAgIGRlYnVnKFwiVW5rbm93biBtZW1vcnkgcmVmZXJlbmNlIHR5cGU6ICVzXCIsIHV0aWxzLnR5cGVJZGVudGlmaWVyKGRlZmluaXRpb24pKTtcbiAgICAgIHJldHVybiBudWxsO1xuXG4gIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlU3RvcmFnZVJlZmVyZW5jZShkZWZpbml0aW9uLCBwb2ludGVyLCBzdGF0ZSwgLi4uYXJncykge1xuICB2YXIgZGF0YTtcbiAgdmFyIGJ5dGVzO1xuICB2YXIgbGVuZ3RoO1xuICB2YXIgc2xvdDtcblxuICBzd2l0Y2ggKHV0aWxzLnR5cGVDbGFzcyhkZWZpbml0aW9uKSkge1xuICAgIGNhc2UgXCJhcnJheVwiOlxuICAgICAgZGVidWcoXCJzdG9yYWdlIGFycmF5ISAlb1wiLCBwb2ludGVyKTtcbiAgICAgIGRhdGEgPSByZWFkKHBvaW50ZXIsIHN0YXRlKTtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgbGVuZ3RoID0gdXRpbHMudG9CaWdOdW1iZXIoZGF0YSkudG9OdW1iZXIoKTtcbiAgICAgIGRlYnVnKFwibGVuZ3RoICVvXCIsIGxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IGJhc2VTaXplID0gdXRpbHMuc3RvcmFnZVNpemUodXRpbHMuYmFzZURlZmluaXRpb24oZGVmaW5pdGlvbikpO1xuICAgICAgY29uc3QgcGVyV29yZCA9IE1hdGguZmxvb3IoV09SRF9TSVpFIC8gYmFzZVNpemUpO1xuICAgICAgZGVidWcoXCJiYXNlU2l6ZSAlb1wiLCBiYXNlU2l6ZSk7XG4gICAgICBkZWJ1ZyhcInBlcldvcmQgJWRcIiwgcGVyV29yZCk7XG5cbiAgICAgIGNvbnN0IG9mZnNldCA9IChpKSA9PiB7XG4gICAgICAgIGlmIChwZXJXb3JkID09IDEpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKGkgKiBiYXNlU2l6ZSAvIFdPUkRfU0laRSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluZGV4ID0gKGkpID0+IHtcbiAgICAgICAgaWYgKHBlcldvcmQgPT0gMSkge1xuICAgICAgICAgIHJldHVybiBXT1JEX1NJWkUgLSBiYXNlU2l6ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcGVyV29yZCAtIGkgJSBwZXJXb3JkIC0gMTtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uICogYmFzZVNpemU7XG4gICAgICB9XG5cbiAgICAgIGRlYnVnKFwicG9pbnRlcjogJW9cIiwgcG9pbnRlcik7XG4gICAgICByZXR1cm4gWy4uLkFycmF5KGxlbmd0aCkua2V5cygpXVxuICAgICAgICAubWFwKCAoaSkgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZEZyb20gPSBwb2ludGVyLnN0b3JhZ2UuZnJvbS5vZmZzZXQgIT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2xvdDogW1wiMHhcIiArIHV0aWxzLnRvQmlnTnVtYmVyKFxuICAgICAgICAgICAgICAgIHV0aWxzLmtlY2NhazI1NiguLi5wb2ludGVyLnN0b3JhZ2UuZnJvbS5zbG90KVxuICAgICAgICAgICAgICApLnBsdXMocG9pbnRlci5zdG9yYWdlLmZyb20ub2Zmc2V0KS50b1N0cmluZygxNildLFxuICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldChpKSxcbiAgICAgICAgICAgICAgaW5kZXg6IGluZGV4KGkpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICBzbG90OiBbcG9pbnRlci5zdG9yYWdlLmZyb20uc2xvdF0sXG4gICAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0KGkpLFxuICAgICAgICAgICAgICBpbmRleDogaW5kZXgoaSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGNoaWxkRnJvbTtcbiAgICAgICAgfSlcbiAgICAgICAgLm1hcCggKGNoaWxkRnJvbSwgaWR4KSA9PiB7XG4gICAgICAgICAgZGVidWcoXCJjaGlsZEZyb20gJWQsICVvXCIsIGlkeCwgY2hpbGRGcm9tKTtcbiAgICAgICAgICByZXR1cm4gZGVjb2RlKHV0aWxzLmJhc2VEZWZpbml0aW9uKGRlZmluaXRpb24pLCB7IHN0b3JhZ2U6IHtcbiAgICAgICAgICAgIGZyb206IGNoaWxkRnJvbSxcbiAgICAgICAgICAgIGxlbmd0aDogYmFzZVNpemVcbiAgICAgICAgICB9fSwgc3RhdGUsIC4uLmFyZ3MpO1xuICAgICAgICB9KTtcblxuICAgIGNhc2UgXCJieXRlc1wiOlxuICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGRhdGEgPSByZWFkKHBvaW50ZXIsIHN0YXRlKTtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGFbV09SRF9TSVpFIC0gMV0gJSAyID09IDApIHtcbiAgICAgICAgLy8gc3RyaW5nIGxpdmVzIGluIHdvcmQsIGxlbmd0aCBpcyBsYXN0IGJ5dGUgLyAyXG4gICAgICAgIGxlbmd0aCA9IGRhdGFbV09SRF9TSVpFIC0gMV0gLyAyO1xuICAgICAgICBkZWJ1ZyhcImluLXdvcmQ7IGxlbmd0aCAlb1wiLCBsZW5ndGgpO1xuICAgICAgICBpZiAobGVuZ3RoID09IDApIHtcbiAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZWNvZGVWYWx1ZShkZWZpbml0aW9uLCB7IHN0b3JhZ2U6IHtcbiAgICAgICAgICBmcm9tOiB7IHNsb3Q6IHBvaW50ZXIuc3RvcmFnZS5mcm9tLnNsb3QsIGluZGV4OiAwIH0sXG4gICAgICAgICAgdG86IHsgc2xvdDogcG9pbnRlci5zdG9yYWdlLmZyb20uc2xvdCwgaW5kZXg6IGxlbmd0aCAtIDF9XG4gICAgICAgIH19LCBzdGF0ZSwgLi4uYXJncyk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlbmd0aCA9IHV0aWxzLnRvQmlnTnVtYmVyKGRhdGEpLm1pbnVzKDEpLmRpdigyKS50b051bWJlcigpO1xuICAgICAgICBkZWJ1ZyhcIm5ldy13b3JkLCBsZW5ndGggJW9cIiwgbGVuZ3RoKTtcblxuICAgICAgICByZXR1cm4gZGVjb2RlVmFsdWUoZGVmaW5pdGlvbiwgeyBzdG9yYWdlOiB7XG4gICAgICAgICAgZnJvbTogeyBzbG90OiBbcG9pbnRlci5zdG9yYWdlLmZyb20uc2xvdF0sIGluZGV4OiAwIH0sXG4gICAgICAgICAgbGVuZ3RoXG4gICAgICAgIH19LCBzdGF0ZSwgLi4uYXJncyk7XG4gICAgICB9XG5cbiAgICBjYXNlIFwic3RydWN0XCI6XG4gICAgICBsZXQgW3JlZnNdID0gYXJncztcblxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHt9LCAuLi5PYmplY3QuZW50cmllcyhwb2ludGVyLnN0b3JhZ2UuY2hpbGRyZW4pXG4gICAgICAgICAgLm1hcCggKFtpZCwgY2hpbGRQb2ludGVyXSkgPT4gKHtcbiAgICAgICAgICAgIFtjaGlsZFBvaW50ZXIubmFtZV06IGRlY29kZShcbiAgICAgICAgICAgICAgcmVmc1tpZF0uZGVmaW5pdGlvbiwgeyBzdG9yYWdlOiBjaGlsZFBvaW50ZXIgfSwgc3RhdGUsIC4uLmFyZ3NcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KSlcbiAgICAgICk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgZGVidWcoXCJVbmtub3duIHN0b3JhZ2UgcmVmZXJlbmNlIHR5cGU6ICVzXCIsIHV0aWxzLnR5cGVJZGVudGlmaWVyKGRlZmluaXRpb24pKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlY29kZShkZWZpbml0aW9uLCAuLi5hcmdzKSB7XG4gIGlmICghdXRpbHMuaXNSZWZlcmVuY2UoZGVmaW5pdGlvbikpIHtcbiAgICByZXR1cm4gZGVjb2RlVmFsdWUoZGVmaW5pdGlvbiwgLi4uYXJncyk7XG4gIH1cblxuICBzd2l0Y2ggKHV0aWxzLnJlZmVyZW5jZVR5cGUoZGVmaW5pdGlvbikpIHtcbiAgICBjYXNlIFwibWVtb3J5XCI6XG4gICAgICByZXR1cm4gZGVjb2RlTWVtb3J5UmVmZXJlbmNlKGRlZmluaXRpb24sIC4uLmFyZ3MpO1xuICAgIGNhc2UgXCJzdG9yYWdlXCI6XG4gICAgICByZXR1cm4gZGVjb2RlU3RvcmFnZVJlZmVyZW5jZShkZWZpbml0aW9uLCAuLi5hcmdzKTtcbiAgICBkZWZhdWx0OlxuICAgICAgZGVidWcoXCJVbmtub3duIHJlZmVyZW5jZSBjYXRlZ29yeTogJXNcIiwgdXRpbHMudHlwZUlkZW50aWZpZXIoZGVmaW5pdGlvbikpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9kYXRhL2RlY29kZS9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpkYXRhOmRlY29kZTptZW1vcnlcIik7XG5cbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gXCJiaWdudW1iZXIuanNcIjtcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IFdPUkRfU0laRSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbi8qKlxuICogcmVhZCB3b3JkIGZyb20gbWVtb3J5XG4gKlxuICogcmVxdWlyZXMgYGJ5dGVgIHRvIGJlIGEgbXVsdGlwbGUgb2YgV09SRF9TSVpFICgzMilcbiAqXG4gKiBAcGFyYW0gbWVtb3J5IC0gVWludDhBcnJheVxuICogQHJldHVybiB7QmlnTnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZChtZW1vcnksIGJ5dGUpIHtcbiAgcmV0dXJuIHJlYWRCeXRlcyhtZW1vcnksIGJ5dGUsIFdPUkRfU0laRSk7XG59XG5cbi8qKlxuICogcmVhZCA8Ynl0ZXM+IGFtb3VudCBvZiBieXRlcyBmcm9tIG1lbW9yeSwgc3RhcnRpbmcgYXQgYnl0ZSA8c3RhcnQ+XG4gKlxuICogQHBhcmFtIG1lbW9yeSAtIFVpbnQ4QXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRCeXRlcyhtZW1vcnksIGJ5dGUsIGxlbmd0aCkge1xuICBieXRlID0gdXRpbHMudG9CaWdOdW1iZXIoYnl0ZSk7XG4gIGxlbmd0aCA9IHV0aWxzLnRvQmlnTnVtYmVyKGxlbmd0aCk7XG5cbiAgaWYgKGJ5dGUudG9OdW1iZXIoKSA+PSBtZW1vcnkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGxlbmd0aCA/IGxlbmd0aC50b051bWJlcigpIDogMCk7XG4gIH1cblxuICBpZiAobGVuZ3RoID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheShtZW1vcnkuYnVmZmVyLCBieXRlLnRvTnVtYmVyKCkpO1xuICB9XG5cbiAgLy8gZ3JhYiBgbGVuZ3RoYCBieXRlcyBubyBtYXR0ZXIgd2hhdCwgaGVyZSBmaWxsIHRoaXMgYXJyYXlcbiAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoLnRvTnVtYmVyKCkpO1xuXG4gIC8vIGlmIHdlJ3JlIHJlYWRpbmcgcGFzdCB0aGUgZW5kIG9mIG1lbW9yeSwgdHJ1bmNhdGUgdGhlIGxlbmd0aCB0byByZWFkXG4gIGxldCBleGNlc3MgPSBieXRlLnBsdXMobGVuZ3RoKS5taW51cyhtZW1vcnkubGVuZ3RoKS50b051bWJlcigpO1xuICBpZiAoZXhjZXNzID4gMCkge1xuICAgIGxlbmd0aCA9IG5ldyBCaWdOdW1iZXIobWVtb3J5Lmxlbmd0aCkubWludXMoYnl0ZSk7XG4gIH1cblxuICBsZXQgZXhpc3RpbmcgPSBuZXcgVWludDhBcnJheShtZW1vcnkuYnVmZmVyLCBieXRlLnRvTnVtYmVyKCksIGxlbmd0aC50b051bWJlcigpKTtcblxuICBieXRlcy5zZXQoZXhpc3RpbmcpO1xuXG4gIHJldHVybiBieXRlcztcbn1cblxuLyoqXG4gKiBTcGxpdCBtZW1vcnkgaW50byBjaHVua3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNodW5rKG1lbW9yeSwgc2l6ZSA9IFdPUkRfU0laRSkge1xuICBsZXQgY2h1bmtzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZW1vcnkubGVuZ3RoOyBpICs9IHNpemUpIHtcbiAgICBsZXQgY2h1bmsgPSByZWFkQnl0ZXMobWVtb3J5LCBpLCBzaXplKTtcbiAgICBjaHVua3MucHVzaChjaHVuayk7XG4gIH1cblxuICByZXR1cm4gY2h1bmtzO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9kYXRhL2RlY29kZS9tZW1vcnkuanMiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6ZGF0YTpkZWNvZGU6c3RvcmFnZVwiKTtcblxuaW1wb3J0IHsgV09SRF9TSVpFIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gXCIuL3V0aWxzXCI7XG5cblxuLyoqXG4gKiByZWFkIHNsb3QgZnJvbSBzdG9yYWdlXG4gKlxuICogQHBhcmFtIHNsb3QgLSBiaWcgbnVtYmVyIG9yIGFycmF5IG9mIHJlZ3VsYXIgbnVtYmVyc1xuICogQHBhcmFtIG9mZnNldCAtIGZvciBhcnJheSwgb2Zmc2V0IGZyb20gdGhlIGtlY2NhayBkZXRlcm1pbmVkIGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkKHN0b3JhZ2UsIHNsb3QsIG9mZnNldCA9IDApIHtcbiAgaWYgKHNsb3QgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHNsb3QgPSB1dGlscy5rZWNjYWsyNTYoLi4uc2xvdC5tYXAodXRpbHMudG9CaWdOdW1iZXIpKTtcbiAgfVxuXG4gIHNsb3QgPSB1dGlscy50b0JpZ051bWJlcihzbG90KS5wbHVzKG9mZnNldCk7XG5cbiAgZGVidWcoXCJyZWFkaW5nIHNsb3Q6ICVvXCIsIHV0aWxzLnRvSGV4U3RyaW5nKHNsb3QpKTtcblxuICBsZXQgd29yZCA9IHN0b3JhZ2VbdXRpbHMudG9IZXhTdHJpbmcoc2xvdCwgV09SRF9TSVpFKV0gfHxcbiAgICBuZXcgVWludDhBcnJheShXT1JEX1NJWkUpO1xuXG4gIGRlYnVnKFwid29yZCAlb1wiLCB3b3JkKTtcbiAgcmV0dXJuIHdvcmRcbn1cblxuLyoqXG4gKiByZWFkIGFsbCBieXRlcyBpbiBzb21lIHJhbmdlLlxuICpcbiAqIHBhcmFtZXRlcnMgYGZyb21gIGFuZCBgdG9gIGFyZSBvYmplY3RzIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgc2xvdCAtIChyZXF1aXJlZCkgZWl0aGVyIGEgYmlnbnVtYmVyIG9yIGEgXCJwYXRoXCIgYXJyYXkgb2YgaW50ZWdlciBvZmZzZXRzXG4gKlxuICogICAgIHBhdGggYXJyYXkgdmFsdWVzIGdldCBjb252ZXJ0ZWQgaW50byBrZWNjYWsyNTYgaGFzaCBhcyBwZXIgc29saWRpdHlcbiAqICAgICBzdG9yYWdlIGFsbG9jYXRpb24gbWV0aG9kXG4gKlxuICogICAgIHJlZjogaHR0cHM6Ly9zb2xpZGl0eS5yZWFkdGhlZG9jcy5pby9lbi92MC40LjIzL21pc2NlbGxhbmVvdXMuaHRtbCNsYXlvdXQtb2Ytc3RhdGUtdmFyaWFibGVzLWluLXN0b3JhZ2VcbiAqICAgICAoc2VhcmNoIFwiY29uY2F0ZW5hdGlvblwiKVxuICpcbiAqICBvZmZzZXQgLSAoZGVmYXVsdDogMCkgc2xvdCBvZmZzZXRcbiAqXG4gKiAgaW5kZXggLSAoZGVmYXVsdDogMCkgYnl0ZSBpbmRleCBpbiB3b3JkXG4gKlxuICogQHBhcmFtIGZyb20gLSBsb2NhdGlvbiAoc2VlIF4pXG4gKiBAcGFyYW0gdG8gLSBsb2NhdGlvbiAoc2VlIF4pLiBpbmNsdXNpdmUuXG4gKiBAcGFyYW0gbGVuZ3RoIC0gaW5zdGVhZCBvZiBgdG9gLCBudW1iZXIgb2YgYnl0ZXMgYWZ0ZXIgYGZyb21gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkUmFuZ2Uoc3RvcmFnZSwge2Zyb20sIHRvLCBsZW5ndGh9KSB7XG4gIGlmICghbGVuZ3RoICYmICF0byB8fCBsZW5ndGggJiYgdG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtdXN0IHNwZWNpZnkgZXhhY3RseSBvbmUgYHRvYHxgbGVuZ3RoYFwiKTtcbiAgfVxuXG4gIGZyb20gPSB7XG4gICAgLi4uZnJvbSxcbiAgICBvZmZzZXQ6IGZyb20ub2Zmc2V0IHx8IDBcbiAgfTtcblxuICBpZiAobGVuZ3RoKSB7XG4gICAgdG8gPSB7XG4gICAgICBzbG90OiBmcm9tLnNsb3QsXG4gICAgICBvZmZzZXQ6IGZyb20ub2Zmc2V0ICsgTWF0aC5mbG9vcigoZnJvbS5pbmRleCArIGxlbmd0aCAtIDEpIC8gV09SRF9TSVpFKSxcbiAgICAgIGluZGV4OiAoZnJvbS5pbmRleCArIGxlbmd0aCAtIDEpICUgV09SRF9TSVpFXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0byA9IHtcbiAgICAgIC4uLnRvLFxuICAgICAgb2Zmc2V0OiB0by5vZmZzZXQgfHwgMFxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKFwicmVhZFJhbmdlICVvXCIsIHtmcm9tLHRvfSk7XG5cbiAgY29uc3QgdG90YWxXb3JkcyA9IHRvLm9mZnNldCAtIGZyb20ub2Zmc2V0ICsgMTtcbiAgZGVidWcoXCJ0b3RhbFdvcmRzICVvXCIsIHRvdGFsV29yZHMpO1xuXG4gIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkodG90YWxXb3JkcyAqIFdPUkRfU0laRSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFdvcmRzOyBpKyspIHtcbiAgICBsZXQgb2Zmc2V0ID0gaSArIGZyb20ub2Zmc2V0O1xuICAgIGRhdGEuc2V0KHJlYWQoc3RvcmFnZSwgZnJvbS5zbG90LCBvZmZzZXQpLCBpICogV09SRF9TSVpFKTtcbiAgfVxuICBkZWJ1ZyhcIndvcmRzICVvXCIsIGRhdGEpO1xuXG4gIGRhdGEgPSBkYXRhLnNsaWNlKGZyb20uaW5kZXgsICh0b3RhbFdvcmRzIC0gMSkgKiBXT1JEX1NJWkUgKyB0by5pbmRleCArIDEpO1xuXG4gIGRlYnVnKFwiZGF0YTogJW9cIiwgZGF0YSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZGF0YS9kZWNvZGUvc3RvcmFnZS5qcyIsImV4cG9ydCBjb25zdCBWSVNJVCA9IFwiVklTSVRcIjtcbmV4cG9ydCBmdW5jdGlvbiB2aXNpdChzb3VyY2VJZCwgYXN0KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogVklTSVQsXG4gICAgc291cmNlSWQsIGFzdFxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBET05FX1ZJU0lUSU5HID0gXCJET05FX1ZJU0lUSU5HXCI7XG5leHBvcnQgZnVuY3Rpb24gZG9uZVZpc2l0aW5nKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IERPTkVfVklTSVRJTkdcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvYXN0L2FjdGlvbnMvaW5kZXguanMiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6Y29udHJvbGxlcjpzYWdhc1wiKTtcblxuaW1wb3J0IHsgcHV0LCBjYWxsLCByYWNlLCB0YWtlLCBzZWxlY3QgfSBmcm9tICdyZWR1eC1zYWdhL2VmZmVjdHMnO1xuXG5pbXBvcnQgeyBwcmVmaXhOYW1lIH0gZnJvbSBcImxpYi9oZWxwZXJzXCI7XG5cbmltcG9ydCAqIGFzIHRyYWNlIGZyb20gXCJsaWIvdHJhY2Uvc2FnYXNcIjtcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi4vYWN0aW9uc1wiO1xuXG5pbXBvcnQgY29udHJvbGxlciBmcm9tIFwiLi4vc2VsZWN0b3JzXCI7XG5cbmNvbnN0IENPTlRST0xfU0FHQVMgPSB7XG4gIFthY3Rpb25zLkFEVkFOQ0VdOiBhZHZhbmNlLFxuICBbYWN0aW9ucy5TVEVQX05FWFRdOiBzdGVwTmV4dCxcbiAgW2FjdGlvbnMuU1RFUF9PVkVSXTogc3RlcE92ZXIsXG4gIFthY3Rpb25zLlNURVBfSU5UT106IHN0ZXBJbnRvLFxuICBbYWN0aW9ucy5TVEVQX09VVF06IHN0ZXBPdXQsXG4gIFthY3Rpb25zLkNPTlRJTlVFX1VOVElMXTogY29udGludWVVbnRpbFxufTtcblxuLyoqIEFTVCBub2RlIHR5cGVzIHRoYXQgYXJlIHNraXBwZWQgdG8gZmlsdGVyIG91dCBzb21lIG5vaXNlICovXG5jb25zdCBTS0lQUEVEX1RZUEVTID0gbmV3IFNldChbXG4gIFwiQ29udHJhY3REZWZpbml0aW9uXCIsXG4gIFwiVmFyaWFibGVEZWNsYXJhdGlvblwiLFxuXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiogc2FnYSgpIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBkZWJ1ZyhcIndhaXRpbmcgZm9yIGNvbnRyb2wgYWN0aW9uXCIpO1xuICAgIGxldCBhY3Rpb24gPSB5aWVsZCB0YWtlKE9iamVjdC5rZXlzKENPTlRST0xfU0FHQVMpKTtcbiAgICBkZWJ1ZyhcImdvdCBjb250cm9sIGFjdGlvblwiKTtcbiAgICBsZXQgc2FnYSA9IENPTlRST0xfU0FHQVNbYWN0aW9uLnR5cGVdO1xuXG4gICAgeWllbGQgcHV0KGFjdGlvbnMuYmVnaW5TdGVwKGFjdGlvbi50eXBlKSk7XG5cbiAgICB5aWVsZCByYWNlKHtcbiAgICAgIGV4ZWM6IGNhbGwoc2FnYSwgYWN0aW9uKSxcbiAgICAgIGludGVycnVwdDogdGFrZShhY3Rpb25zLklOVEVSUlVQVClcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhOYW1lKFwiY29udHJvbGxlclwiLCBzYWdhKTtcblxuLyoqXG4gKiBBZHZhbmNlIHRoZSBzdGF0ZSBieSBvbmUgaW5zdHJ1Y3Rpb25cbiAqL1xuZnVuY3Rpb24qIGFkdmFuY2UoKSB7XG4gIC8vIHNlbmQgYWN0aW9uIHRvIGFkdmFuY2UgdHJhY2VcbiAgeWllbGQgKnRyYWNlLmFkdmFuY2UoKTtcbn1cblxuLyoqXG4gKiBzdGVwTmV4dCAtIHN0ZXAgdG8gdGhlIG5leHQgbG9naWNhbCBjb2RlIHNlZ21lbnRcbiAqXG4gKiBOb3RlOiBJdCBtaWdodCB0YWtlIG11bHRpcGxlIGluc3RydWN0aW9ucyB0byBleHByZXNzIHRoZSBzYW1lIHNlY3Rpb24gb2YgY29kZS5cbiAqIFwiU3RlcHBpbmdcIiwgdGhlbiwgaXMgc3RlcHBpbmcgdG8gdGhlIG5leHQgbG9naWNhbCBpdGVtLCBub3Qgc3RlcHBpbmcgdG8gdGhlIG5leHRcbiAqIGluc3RydWN0aW9uLiBTZWUgYWR2YW5jZSgpIGlmIHlvdSdkIGxpa2UgdG8gYWR2YW5jZSBieSBvbmUgaW5zdHJ1Y3Rpb24uXG4gKi9cbmZ1bmN0aW9uKiBzdGVwTmV4dCAoKSB7XG4gIGNvbnN0IHN0YXJ0aW5nUmFuZ2UgPSB5aWVsZCBzZWxlY3QoY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLnNvdXJjZVJhbmdlKTtcblxuICB2YXIgdXBjb21pbmc7XG5cbiAgZG8ge1xuICAgIC8vIGFkdmFuY2UgYXQgbGVhc3Qgb25jZSBzdGVwXG4gICAgeWllbGQqIGFkdmFuY2UoKTtcblxuICAgIC8vIGFuZCBjaGVjayB0aGUgbmV4dCBzb3VyY2UgcmFuZ2VcbiAgICB1cGNvbWluZyA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQubG9jYXRpb24pO1xuXG4gICAgLy8gaWYgdGhlIG5leHQgc3RlcCdzIHNvdXJjZSByYW5nZSBpcyBzdGlsbCB0aGUgc2FtZSwga2VlcCBnb2luZ1xuICB9IHdoaWxlIChcbiAgICAhdXBjb21pbmcubm9kZSB8fFxuICAgIFNLSVBQRURfVFlQRVMuaGFzKHVwY29taW5nLm5vZGUubm9kZVR5cGUpIHx8XG5cbiAgICB1cGNvbWluZy5zb3VyY2VSYW5nZS5zdGFydCA9PSBzdGFydGluZ1JhbmdlLnN0YXJ0ICYmXG4gICAgdXBjb21pbmcuc291cmNlUmFuZ2UubGVuZ3RoID09IHN0YXJ0aW5nUmFuZ2UubGVuZ3RoXG4gICk7XG59XG5cbi8qKlxuICogc3RlcEludG8gLSBzdGVwIGludG8gdGhlIGN1cnJlbnQgZnVuY3Rpb25cbiAqXG4gKiBDb25jZXB0dWFsbHkgdGhpcyBpcyBlYXN5LCBidXQgZnJvbSBhIHByb2dyYW1taW5nIHN0YW5kcG9pbnQgaXQncyBoYXJkLlxuICogQ29kZSBsaWtlIGBnZXRCYWxhbmNlKG1zZy5zZW5kZXIpYCBtaWdodCBiZSBoaWdobGlnaHRlZCwgYnV0IHRoZXJlIGNvdWxkXG4gKiBiZSBhIG51bWJlciBvZiBkaWZmZXJlbnQgaW50ZXJtZWRpYXRlIHN0ZXBzIChsaWtlIGV2YWx1YXRpbmcgYG1zZy5zZW5kZXJgKVxuICogYmVmb3JlIGBnZXRCYWxhbmNlYCBpcyBzdGVwcGVkIGludG8uIFRoaXMgZnVuY3Rpb24gd2lsbCBzdGVwIGludG8gdGhlIGZpcnN0XG4gKiBmdW5jdGlvbiBhdmFpbGFibGUgKHdoZXJlIGluc3RydWN0aW9uLmp1bXAgPT0gXCJpXCIpLCBpZ25vcmluZyBhbnkgaW50ZXJtZWRpYXRlXG4gKiBzdGVwcyB0aGF0IGZhbGwgd2l0aGluIHRoZSBzYW1lIGNvZGUgcmFuZ2UuIElmIHRoZXJlJ3MgYSBzdGVwIGVuY291bnRlcmVkXG4gKiB0aGF0IGV4aXN0cyBvdXRzaWRlIG9mIHRoZSByYW5nZSwgdGhlbiBzdGVwSW50byB3aWxsIG9ubHkgZXhlY3V0ZSB1bnRpbCB0aGF0XG4gKiBzdGVwLlxuICovXG5mdW5jdGlvbiogc3RlcEludG8gKCkge1xuICBpZiAoeWllbGQgc2VsZWN0KGNvbnRyb2xsZXIuY3VycmVudC53aWxsSnVtcCkpIHtcbiAgICB5aWVsZCogc3RlcE5leHQoKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh5aWVsZCBzZWxlY3QoY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLmlzTXVsdGlsaW5lKSkge1xuICAgIHlpZWxkKiBzdGVwT3ZlcigpO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3RhcnRpbmdEZXB0aCA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQuZnVuY3Rpb25EZXB0aCk7XG4gIGNvbnN0IHN0YXJ0aW5nUmFuZ2UgPSB5aWVsZCBzZWxlY3QoY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLnNvdXJjZVJhbmdlKTtcbiAgdmFyIGN1cnJlbnREZXB0aDtcbiAgdmFyIGN1cnJlbnRSYW5nZTtcblxuICBkbyB7XG4gICAgeWllbGQqIHN0ZXBOZXh0KCk7XG5cbiAgICBjdXJyZW50RGVwdGggPSB5aWVsZCBzZWxlY3QoY29udHJvbGxlci5jdXJyZW50LmZ1bmN0aW9uRGVwdGgpO1xuICAgIGN1cnJlbnRSYW5nZSA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQubG9jYXRpb24uc291cmNlUmFuZ2UpO1xuXG4gIH0gd2hpbGUgKFxuICAgIC8vIHRoZSBmdW5jdGlvbiBzdGFjayBoYXMgbm90IGluY3JlYXNlZCxcbiAgICBjdXJyZW50RGVwdGggPD0gc3RhcnRpbmdEZXB0aCAmJlxuXG4gICAgLy8gdGhlIGN1cnJlbnQgc291cmNlIHJhbmdlIGJlZ2lucyBvbiBvciBhZnRlciB0aGUgc3RhcnRpbmcgcmFuZ2VcbiAgICBjdXJyZW50UmFuZ2Uuc3RhcnQgPj0gc3RhcnRpbmdSYW5nZS5zdGFydCAmJlxuXG4gICAgLy8gYW5kIHRoZSBjdXJyZW50IHJhbmdlIGVuZHMgb24gb3IgYmVmb3JlIHRoZSBzdGFydGluZyByYW5nZSBlbmRzXG4gICAgKGN1cnJlbnRSYW5nZS5zdGFydCArIGN1cnJlbnRSYW5nZS5sZW5ndGgpIDw9XG4gICAgICAoc3RhcnRpbmdSYW5nZS5zdGFydCArIHN0YXJ0aW5nUmFuZ2UubGVuZ3RoKVxuICApO1xufVxuXG4vKipcbiAqIFN0ZXAgb3V0IG9mIHRoZSBjdXJyZW50IGZ1bmN0aW9uXG4gKlxuICogVGhpcyB3aWxsIHJ1biB1bnRpbCB0aGUgZGVidWdnZXIgZW5jb3VudGVycyBhIGRlY3JlYXNlIGluIGZ1bmN0aW9uIGRlcHRoLlxuICovXG5mdW5jdGlvbiogc3RlcE91dCAoKSB7XG4gIGlmICh5aWVsZCBzZWxlY3QoY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLmlzTXVsdGlsaW5lKSkge1xuICAgIHlpZWxkICpzdGVwT3ZlcigpO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3RhcnRpbmdEZXB0aCA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQuZnVuY3Rpb25EZXB0aCk7XG4gIHZhciBjdXJyZW50RGVwdGg7XG5cbiAgZG8ge1xuICAgIHlpZWxkKiBzdGVwTmV4dCgpO1xuXG4gICAgY3VycmVudERlcHRoID0geWllbGQgc2VsZWN0KGNvbnRyb2xsZXIuY3VycmVudC5mdW5jdGlvbkRlcHRoKTtcblxuICB9IHdoaWxlKGN1cnJlbnREZXB0aCA+PSBzdGFydGluZ0RlcHRoKTtcbn1cblxuLyoqXG4gKiBzdGVwT3ZlciAtIHN0ZXAgb3ZlciB0aGUgY3VycmVudCBsaW5lXG4gKlxuICogU3RlcCBvdmVyIHRoZSBjdXJyZW50IGxpbmUuIFRoaXMgd2lsbCBzdGVwIHRvIHRoZSBuZXh0IGluc3RydWN0aW9uIHRoYXRcbiAqIGV4aXN0cyBvbiBhIGRpZmZlcmVudCBsaW5lIG9mIGNvZGUgd2l0aGluIHRoZSBzYW1lIGZ1bmN0aW9uIGRlcHRoLlxuICovXG5mdW5jdGlvbiogc3RlcE92ZXIgKCkge1xuICBjb25zdCBzdGFydGluZ0RlcHRoID0geWllbGQgc2VsZWN0KGNvbnRyb2xsZXIuY3VycmVudC5mdW5jdGlvbkRlcHRoKTtcbiAgY29uc3Qgc3RhcnRpbmdSYW5nZSA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQubG9jYXRpb24uc291cmNlUmFuZ2UpO1xuICB2YXIgY3VycmVudERlcHRoO1xuICB2YXIgY3VycmVudFJhbmdlO1xuXG4gIGRvIHtcbiAgICB5aWVsZCogc3RlcE5leHQoKTtcblxuICAgIGN1cnJlbnREZXB0aCA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQuZnVuY3Rpb25EZXB0aCk7XG4gICAgY3VycmVudFJhbmdlID0geWllbGQgc2VsZWN0KGNvbnRyb2xsZXIuY3VycmVudC5sb2NhdGlvbi5zb3VyY2VSYW5nZSk7XG5cbiAgfSB3aGlsZSAoXG4gICAgLy8ga2VlcCBzdGVwcGluZyBwcm92aWRlZDpcbiAgICAvL1xuICAgIC8vIHdlIGhhdmVuJ3QganVtcGVkIG91dFxuICAgICEoY3VycmVudERlcHRoIDwgc3RhcnRpbmdEZXB0aCkgJiZcblxuICAgIC8vIGVpdGhlcjogZnVuY3Rpb24gZGVwdGggaXMgZ3JlYXRlciB0aGFuIHN0YXJ0aW5nIChpZ25vcmUgZnVuY3Rpb24gY2FsbHMpXG4gICAgLy8gb3IsIGlmIHdlJ3JlIGF0IHRoZSBzYW1lIGRlcHRoLCBrZWVwIHN0ZXBwaW5nIHVudGlsIHdlJ3JlIG9uIGEgbmV3XG4gICAgLy8gbGluZS5cbiAgICAoY3VycmVudERlcHRoID4gc3RhcnRpbmdEZXB0aCB8fFxuICAgICAgY3VycmVudFJhbmdlLmxpbmVzLnN0YXJ0LmxpbmUgPT0gc3RhcnRpbmdSYW5nZS5saW5lcy5zdGFydC5saW5lKVxuICApXG59XG5cbi8qKlxuICogY29udGludWVVbnRpbCAtIHN0ZXAgdGhyb3VnaCBleGVjdXRpb24gdW50aWwgYSBicmVha3BvaW50XG4gKlxuICogQHBhcmFtIGJyZWFrcG9pbnRzIC0gYXJyYXkgb2YgYnJlYWtwb2ludHMgKHsgLi4uY2FsbCwgbGluZSB9KVxuICovXG5mdW5jdGlvbiAqY29udGludWVVbnRpbCAoe2JyZWFrcG9pbnRzfSkge1xuICB2YXIgY3VycmVudENhbGw7XG4gIHZhciBjdXJyZW50TG9jYXRpb247XG5cbiAgbGV0IGJyZWFrcG9pbnRIaXQgPSBmYWxzZTtcblxuICBkbyB7XG4gICAgeWllbGQqIHN0ZXBOZXh0KCk7XG5cbiAgICBjdXJyZW50Q2FsbCA9IHlpZWxkIHNlbGVjdChjb250cm9sbGVyLmN1cnJlbnQuZXhlY3V0aW9uQ29udGV4dCk7XG4gICAgY3VycmVudExvY2F0aW9uID0geWllbGQgc2VsZWN0KGNvbnRyb2xsZXIuY3VycmVudC5sb2NhdGlvbik7XG5cbiAgICBicmVha3BvaW50SGl0ID0gYnJlYWtwb2ludHNcbiAgICAgIC5maWx0ZXIoICh7YWRkcmVzcywgYmluYXJ5LCBsaW5lLCBub2RlfSkgPT5cbiAgICAgICAgKFxuICAgICAgICAgIGFkZHJlc3MgPT0gY3VycmVudENhbGwuYWRkcmVzcyB8fFxuICAgICAgICAgIGJpbmFyeSA9PSBjdXJyZW50Q2FsbC5iaW5hcnlcbiAgICAgICAgKSAmJiAoXG4gICAgICAgICAgbGluZSA9PSBjdXJyZW50TG9jYXRpb24uc291cmNlUmFuZ2UubGluZXMuc3RhcnQubGluZSB8fFxuICAgICAgICAgIG5vZGUgPT0gY3VycmVudExvY2F0aW9uLm5vZGUuaWRcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLmxlbmd0aCA+IDA7XG5cbiAgfSB3aGlsZSAoIWJyZWFrcG9pbnRIaXQpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9jb250cm9sbGVyL3NhZ2FzL2luZGV4LmpzIiwiaW1wb3J0IGRlYnVnTW9kdWxlIGZyb20gXCJkZWJ1Z1wiO1xuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOmNvbnRyb2xsZXI6c2FnYXNcIik7XG5cbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yVHJlZSwgY3JlYXRlTGVhZiB9IGZyb20gXCJyZXNlbGVjdC10cmVlXCI7XG5cbmltcG9ydCBldm0gZnJvbSBcImxpYi9ldm0vc2VsZWN0b3JzXCI7XG5pbXBvcnQgc29saWRpdHkgZnJvbSBcImxpYi9zb2xpZGl0eS9zZWxlY3RvcnNcIjtcbmltcG9ydCBhc3QgZnJvbSBcImxpYi9hc3Qvc2VsZWN0b3JzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgaWRlbnRpdHkgPSAoeCkgPT4geFxuXG4vKipcbiAqIGNvbnRyb2xsZXJcbiAqL1xuY29uc3QgY29udHJvbGxlciA9IGNyZWF0ZVNlbGVjdG9yVHJlZSh7XG5cbiAgLyoqXG4gICAqIGNvbnRyb2xsZXIuY3VycmVudFxuICAgKi9cbiAgY3VycmVudDoge1xuICAgIC8qKlxuICAgICAqIGNvbnRyb2xsZXIuY3VycmVudC5mdW5jdGlvbkRlcHRoXG4gICAgICovXG4gICAgZnVuY3Rpb25EZXB0aDogY3JlYXRlTGVhZihbc29saWRpdHkuY3VycmVudC5mdW5jdGlvbkRlcHRoXSwgaWRlbnRpdHkpLFxuXG4gICAgLyoqXG4gICAgICogY29udHJvbGxlci5jdXJyZW50LmV4ZWN1dGlvbkNvbnRleHRcbiAgICAgKi9cbiAgICBleGVjdXRpb25Db250ZXh0OiBjcmVhdGVMZWFmKFtldm0uY3VycmVudC5jYWxsXSwgaWRlbnRpdHkpLFxuXG4gICAgLyoqXG4gICAgICogY29udHJvbGxlci5jdXJyZW50LndpbGxKdW1wXG4gICAgICovXG4gICAgd2lsbEp1bXA6IGNyZWF0ZUxlYWYoW2V2bS5jdXJyZW50LnN0ZXAuaXNKdW1wXSwgaWRlbnRpdHkpLFxuXG4gICAgLyoqXG4gICAgICogY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uXG4gICAgICovXG4gICAgbG9jYXRpb246IHtcbiAgICAgIC8qKlxuICAgICAgICogY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLnNvdXJjZVJhbmdlXG4gICAgICAgKi9cbiAgICAgIHNvdXJjZVJhbmdlOiBjcmVhdGVMZWFmKFtzb2xpZGl0eS5jdXJyZW50LnNvdXJjZVJhbmdlXSwgaWRlbnRpdHkpLFxuXG4gICAgICAvKipcbiAgICAgICAqIGNvbnRyb2xsZXIuY3VycmVudC5sb2NhdGlvbi5ub2RlXG4gICAgICAgKi9cbiAgICAgIG5vZGU6IGNyZWF0ZUxlYWYoW2FzdC5jdXJyZW50Lm5vZGVdLCBpZGVudGl0eSksXG5cbiAgICAgIC8qKlxuICAgICAgICogY29udHJvbGxlci5jdXJyZW50LmxvY2F0aW9uLmlzTXVsdGlsaW5lXG4gICAgICAgKi9cbiAgICAgIGlzTXVsdGlsaW5lOiBjcmVhdGVMZWFmKFtzb2xpZGl0eS5jdXJyZW50LmlzTXVsdGlsaW5lXSwgaWRlbnRpdHkpLFxuICAgIH1cbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xsZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL2NvbnRyb2xsZXIvc2VsZWN0b3JzL2luZGV4LmpzIiwiaW1wb3J0IGRlYnVnTW9kdWxlIGZyb20gXCJkZWJ1Z1wiO1xuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOnNvbGlkaXR5OnNhZ2FzXCIpO1xuXG5pbXBvcnQgeyBjYWxsLCBwdXQsIHRha2UsIHNlbGVjdCB9IGZyb20gXCJyZWR1eC1zYWdhL2VmZmVjdHNcIjtcbmltcG9ydCB7IHByZWZpeE5hbWUgfSBmcm9tIFwibGliL2hlbHBlcnNcIjtcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi4vYWN0aW9uc1wiO1xuaW1wb3J0IHsgVElDSyB9IGZyb20gXCJsaWIvdHJhY2UvYWN0aW9uc1wiO1xuXG5pbXBvcnQgc29saWRpdHkgZnJvbSBcIi4uL3NlbGVjdG9yc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gKmFkZFNvdXJjZShzb3VyY2UsIHNvdXJjZVBhdGgsIGFzdCkge1xuICB5aWVsZCBwdXQoYWN0aW9ucy5hZGRTb3VyY2Uoc291cmNlLCBzb3VyY2VQYXRoLCBhc3QpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uICphZGRTb3VyY2VNYXAoYmluYXJ5LCBzb3VyY2VNYXApIHtcbiAgeWllbGQgcHV0KGFjdGlvbnMuYWRkU291cmNlTWFwKGJpbmFyeSwgc291cmNlTWFwKSk7XG59XG5cbmZ1bmN0aW9uKiBmdW5jdGlvbkRlcHRoU2FnYSAoKSB7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgeWllbGQgdGFrZShUSUNLKTtcbiAgICBkZWJ1ZyhcImdvdCBUSUNLXCIpO1xuICAgIGxldCBpbnN0cnVjdGlvbiA9IHlpZWxkIHNlbGVjdChzb2xpZGl0eS5jdXJyZW50Lmluc3RydWN0aW9uKTtcbiAgICBkZWJ1ZyhcImluc3RydWN0aW9uOiAlb1wiLCBpbnN0cnVjdGlvbik7XG5cbiAgICBpZiAoeWllbGQgc2VsZWN0KHNvbGlkaXR5LmN1cnJlbnQud2lsbEp1bXApKSB7XG4gICAgICBsZXQganVtcERpcmVjdGlvbiA9IHlpZWxkIHNlbGVjdChzb2xpZGl0eS5jdXJyZW50Lmp1bXBEaXJlY3Rpb24pO1xuXG5cbiAgICAgIHlpZWxkIHB1dChhY3Rpb25zLmp1bXAoanVtcERpcmVjdGlvbikpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24qIHNhZ2EgKCkge1xuICB5aWVsZCBjYWxsKGZ1bmN0aW9uRGVwdGhTYWdhKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlZml4TmFtZShcInNvbGlkaXR5XCIsIHNhZ2EpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9zb2xpZGl0eS9zYWdhcy9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpldm06c2FnYXNcIik7XG5cbmltcG9ydCB7IGNhbGwsIHB1dCwgdGFrZSwgc2VsZWN0IH0gZnJvbSBcInJlZHV4LXNhZ2EvZWZmZWN0c1wiO1xuaW1wb3J0IHsgcHJlZml4TmFtZSwga2VjY2FrMjU2IH0gZnJvbSBcImxpYi9oZWxwZXJzXCI7XG5cbmltcG9ydCB7IFRJQ0sgfSBmcm9tIFwibGliL3RyYWNlL2FjdGlvbnNcIjtcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4uL2FjdGlvbnNcIjtcblxuaW1wb3J0IGV2bSBmcm9tIFwiLi4vc2VsZWN0b3JzXCI7XG5cbi8qKlxuICogQWRkcyBFVk0gYnl0ZWNvZGUgY29udGV4dFxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgKDB4LXByZWZpeGVkIGtlY2NhayBvZiBiaW5hcnkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiAqYWRkQ29udGV4dChjb250cmFjdE5hbWUsIGJpbmFyeSkge1xuICB5aWVsZCBwdXQoYWN0aW9ucy5hZGRDb250ZXh0KGNvbnRyYWN0TmFtZSwgYmluYXJ5KSk7XG5cbiAgcmV0dXJuIGtlY2NhazI1NihiaW5hcnkpO1xufVxuXG4vKipcbiAqIEFkZHMga25vd24gZGVwbG95ZWQgaW5zdGFuY2Ugb2YgYmluYXJ5IGF0IGFkZHJlc3NcbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IElEICgweC1wcmVmaXhlZCBrZWNjYWsgb2YgYmluYXJ5KVxuICovXG5leHBvcnQgZnVuY3Rpb24gKmFkZEluc3RhbmNlKGFkZHJlc3MsIGJpbmFyeSkge1xuICBsZXQgc2VhcmNoID0geWllbGQgc2VsZWN0KGV2bS5pbmZvLmJpbmFyaWVzLnNlYXJjaCk7XG4gIGxldCB7IGNvbnRleHQgfSA9IHNlYXJjaChiaW5hcnkpO1xuXG4gIHlpZWxkIHB1dChhY3Rpb25zLmFkZEluc3RhbmNlKGFkZHJlc3MsIGNvbnRleHQsIGJpbmFyeSkpO1xuXG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIGJlZ2luKHsgYWRkcmVzcywgYmluYXJ5IH0pIHtcbiAgaWYgKGFkZHJlc3MpIHtcbiAgICB5aWVsZCBwdXQoYWN0aW9ucy5jYWxsKGFkZHJlc3MpKTtcbiAgfSBlbHNlIHtcbiAgICB5aWVsZCBwdXQoYWN0aW9ucy5jcmVhdGUoYmluYXJ5KSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBjYWxsc3RhY2tTYWdhICgpIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICB5aWVsZCB0YWtlKFRJQ0spO1xuICAgIGRlYnVnKFwiZ290IFRJQ0tcIik7XG5cbiAgICBpZiAoeWllbGQgc2VsZWN0KGV2bS5jdXJyZW50LnN0ZXAuaXNDYWxsKSkge1xuICAgICAgZGVidWcoXCJnb3QgY2FsbFwiKTtcbiAgICAgIGxldCBhZGRyZXNzID0geWllbGQgc2VsZWN0KGV2bS5jdXJyZW50LnN0ZXAuY2FsbEFkZHJlc3MpO1xuXG4gICAgICB5aWVsZCBwdXQoYWN0aW9ucy5jYWxsKGFkZHJlc3MpKTtcblxuICAgIH0gZWxzZSBpZiAoeWllbGQgc2VsZWN0KGV2bS5jdXJyZW50LnN0ZXAuaXNDcmVhdGUpKSB7XG4gICAgICBkZWJ1ZyhcImdvdCBjcmVhdGVcIik7XG4gICAgICBsZXQgYmluYXJ5ID0geWllbGQgc2VsZWN0KGV2bS5jdXJyZW50LnN0ZXAuY3JlYXRlQmluYXJ5KTtcblxuICAgICAgeWllbGQgcHV0KGFjdGlvbnMuY3JlYXRlKGJpbmFyeSkpO1xuXG4gICAgfSBlbHNlIGlmICh5aWVsZCBzZWxlY3QoZXZtLmN1cnJlbnQuc3RlcC5pc0hhbHRpbmcpKSB7XG4gICAgICBkZWJ1ZyhcImdvdCByZXR1cm5cIik7XG4gICAgICB5aWVsZCBwdXQoYWN0aW9ucy5yZXR1cm5DYWxsKCkpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24qIHNhZ2EgKCkge1xuICB5aWVsZCBjYWxsKGNhbGxzdGFja1NhZ2EpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhOYW1lKFwiZXZtXCIsIHNhZ2EpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9ldm0vc2FnYXMvaW5kZXguanMiLCJpbXBvcnQgZGVidWdNb2R1bGUgZnJvbSBcImRlYnVnXCI7XG5jb25zdCBkZWJ1ZyA9IGRlYnVnTW9kdWxlKFwiZGVidWdnZXI6d2ViMzpzYWdhc1wiKTtcblxuaW1wb3J0IHsgYWxsLCB0YWtlRXZlcnksIGFwcGx5LCBmb3JrLCBqb2luLCB0YWtlLCBwdXQsIHNlbGVjdCB9IGZyb20gJ3JlZHV4LXNhZ2EvZWZmZWN0cyc7XG5pbXBvcnQgeyBwcmVmaXhOYW1lIH0gZnJvbSBcImxpYi9oZWxwZXJzXCI7XG5cbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4uL2FjdGlvbnNcIjtcblxuaW1wb3J0IFdlYjNBZGFwdGVyIGZyb20gXCIuLi9hZGFwdGVyXCI7XG5cbmZ1bmN0aW9uKiBmZXRjaFRyYW5zYWN0aW9uSW5mbyhhZGFwdGVyLCB7dHhIYXNofSkge1xuICBkZWJ1ZyhcImluc3BlY3RpbmcgdHJhbnNhY3Rpb25cIik7XG4gIHZhciB0cmFjZTtcbiAgdHJ5IHtcbiAgICB0cmFjZSA9IHlpZWxkIGFwcGx5KGFkYXB0ZXIsIGFkYXB0ZXIuZ2V0VHJhY2UsIFt0eEhhc2hdKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZGVidWcoXCJwdXR0aW5nIGVycm9yXCIpO1xuICAgIHlpZWxkIHB1dChhY3Rpb25zLmVycm9yKGUpKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBkZWJ1ZyhcImdvdCB0cmFjZVwiKTtcbiAgeWllbGQgcHV0KGFjdGlvbnMucmVjZWl2ZVRyYWNlKHRyYWNlKSk7XG5cbiAgbGV0IHR4ID0geWllbGQgYXBwbHkoYWRhcHRlciwgYWRhcHRlci5nZXRUcmFuc2FjdGlvbiwgW3R4SGFzaF0pO1xuICBpZiAodHgudG8gJiYgdHgudG8gIT0gXCIweDBcIikge1xuICAgIHlpZWxkIHB1dChhY3Rpb25zLnJlY2VpdmVDYWxsKHthZGRyZXNzOiB0eC50b30pKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcmVjZWlwdCA9IHlpZWxkIGFwcGx5KGFkYXB0ZXIsIGFkYXB0ZXIuZ2V0UmVjZWlwdCwgW3R4SGFzaF0pO1xuICBpZiAocmVjZWlwdC5jb250cmFjdEFkZHJlc3MpIHtcbiAgICB5aWVsZCBwdXQoYWN0aW9ucy5yZWNlaXZlQ2FsbCh7YmluYXJ5OiB0eC5pbnB1dH0pKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgXCJDb3VsZCBub3QgZmluZCBjb250cmFjdCBhc3NvY2lhdGVkIHdpdGggdHJhbnNhY3Rpb24uIFwiICtcbiAgICBcIlBsZWFzZSBtYWtlIHN1cmUgeW91J3JlIGRlYnVnZ2luZyBhIHRyYW5zYWN0aW9uIHRoYXQgZXhlY3V0ZXMgYSBcIiArXG4gICAgXCJjb250cmFjdCBmdW5jdGlvbiBvciBjcmVhdGVzIGEgbmV3IGNvbnRyYWN0LlwiXG4gICk7XG59XG5cbmZ1bmN0aW9uKiBmZXRjaEJpbmFyeShhZGFwdGVyLCB7YWRkcmVzc30pIHtcbiAgZGVidWcoXCJmZXRjaGluZyBiaW5hcnkgZm9yICVzXCIsIGFkZHJlc3MpO1xuICBsZXQgYmluYXJ5ID0geWllbGQgYXBwbHkoYWRhcHRlciwgYWRhcHRlci5nZXREZXBsb3llZENvZGUsIFthZGRyZXNzXSk7XG5cbiAgZGVidWcoXCJyZWNlaXZlZCBiaW5hcnkgZm9yICVzXCIsIGFkZHJlc3MpO1xuICB5aWVsZCBwdXQoYWN0aW9ucy5yZWNlaXZlQmluYXJ5KGFkZHJlc3MsIGJpbmFyeSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gKmluc3BlY3RUcmFuc2FjdGlvbih0eEhhc2gsIHByb3ZpZGVyKSB7XG4gIHlpZWxkIHB1dChhY3Rpb25zLmluaXQocHJvdmlkZXIpKTtcbiAgeWllbGQgcHV0KGFjdGlvbnMuaW5zcGVjdCh0eEhhc2gpKTtcblxuICBsZXQgYWN0aW9uID0geWllbGQgdGFrZSggKHt0eXBlfSkgPT5cbiAgICB0eXBlID09IGFjdGlvbnMuUkVDRUlWRV9UUkFDRSB8fCB0eXBlID09IGFjdGlvbnMuRVJST1JfV0VCM1xuICApO1xuICBkZWJ1ZyhcImFjdGlvbiAlb1wiLCBhY3Rpb24pO1xuXG4gIHZhciB0cmFjZTtcbiAgaWYgKGFjdGlvbi50eXBlID09IGFjdGlvbnMuUkVDRUlWRV9UUkFDRSkge1xuICAgIHRyYWNlID0gYWN0aW9uLnRyYWNlO1xuICAgIGRlYnVnKFwicmVjZWl2ZWQgdHJhY2VcIik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IGFjdGlvbi5lcnJvciB9O1xuICB9XG5cbiAgbGV0IHthZGRyZXNzLCBiaW5hcnl9ID0geWllbGQgdGFrZShhY3Rpb25zLlJFQ0VJVkVfQ0FMTCk7XG4gIGRlYnVnKFwicmVjZWl2ZWQgY2FsbFwiKTtcblxuICByZXR1cm4geyB0cmFjZSwgYWRkcmVzcywgYmluYXJ5IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiAqb2J0YWluQmluYXJpZXMoYWRkcmVzc2VzKSB7XG4gIGxldCB0YXNrcyA9IHlpZWxkIGFsbChcbiAgICBhZGRyZXNzZXMubWFwKCAoYWRkcmVzcykgPT4gZm9yayhyZWNlaXZlQmluYXJ5LCBhZGRyZXNzKSApXG4gICk7XG5cbiAgZGVidWcoXCJyZXF1ZXN0aW5nIGJpbmFyaWVzXCIpO1xuICB5aWVsZCBhbGwoXG4gICAgYWRkcmVzc2VzLm1hcCggKGFkZHJlc3MpID0+IHB1dChhY3Rpb25zLmZldGNoQmluYXJ5KGFkZHJlc3MpKSApXG4gICk7XG5cbiAgbGV0IGJpbmFyaWVzID0gW107XG4gIGJpbmFyaWVzID0geWllbGQgYWxsKFxuICAgIHRhc2tzLm1hcCh0YXNrID0+IGpvaW4odGFzaykpXG4gICk7XG5cbiAgZGVidWcoXCJiaW5hcmllcyAlb1wiLCBiaW5hcmllcyk7XG5cbiAgcmV0dXJuIGJpbmFyaWVzO1xufVxuXG5mdW5jdGlvbiAqcmVjZWl2ZUJpbmFyeShhZGRyZXNzKSB7XG4gIGxldCB7YmluYXJ5fSA9IHlpZWxkIHRha2UoKGFjdGlvbikgPT4gKFxuICAgIGFjdGlvbi50eXBlID09IGFjdGlvbnMuUkVDRUlWRV9CSU5BUlkgJiZcbiAgICBhY3Rpb24uYWRkcmVzcyA9PSBhZGRyZXNzXG4gICkpO1xuICBkZWJ1ZyhcImdvdCBiaW5hcnkgZm9yICVzXCIsIGFkZHJlc3MpO1xuXG4gIHJldHVybiBiaW5hcnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogc2FnYSgpIHtcbiAgLy8gd2FpdCBmb3Igd2ViMyBpbml0IHNpZ25hbFxuICBsZXQge3Byb3ZpZGVyfSA9IHlpZWxkIHRha2UoYWN0aW9ucy5JTklUX1dFQjMpO1xuICBsZXQgYWRhcHRlciA9IG5ldyBXZWIzQWRhcHRlcihwcm92aWRlcik7XG5cbiAgeWllbGQgdGFrZUV2ZXJ5KGFjdGlvbnMuSU5TUEVDVCwgZmV0Y2hUcmFuc2FjdGlvbkluZm8sIGFkYXB0ZXIpO1xuICB5aWVsZCB0YWtlRXZlcnkoYWN0aW9ucy5GRVRDSF9CSU5BUlksIGZldGNoQmluYXJ5LCBhZGFwdGVyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlZml4TmFtZShcIndlYjNcIiwgc2FnYSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3dlYjMvc2FnYXMvaW5kZXguanMiLCJleHBvcnQgY29uc3QgSU5JVF9XRUIzID0gXCJJTklUX1dFQjNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpbml0KHByb3ZpZGVyKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogSU5JVF9XRUIzLFxuICAgIHByb3ZpZGVyXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IElOU1BFQ1QgPSBcIklOU1BFQ1RfVFJBTlNBQ1RJT05cIjtcbmV4cG9ydCBmdW5jdGlvbiBpbnNwZWN0KHR4SGFzaCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IElOU1BFQ1QsXG4gICAgdHhIYXNoXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEZFVENIX0JJTkFSWSA9IFwiRkVUQ0hfQklOQVJZXCI7XG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hCaW5hcnkoYWRkcmVzcykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEZFVENIX0JJTkFSWSxcbiAgICBhZGRyZXNzXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBSRUNFSVZFX0JJTkFSWSA9IFwiUkVDRUlWRV9CSU5BUllcIjtcbmV4cG9ydCBmdW5jdGlvbiByZWNlaXZlQmluYXJ5KGFkZHJlc3MsIGJpbmFyeSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFJFQ0VJVkVfQklOQVJZLFxuICAgIGFkZHJlc3MsIGJpbmFyeVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBSRUNFSVZFX1RSQUNFID0gXCJSRUNFSVZFX1RSQUNFXCI7XG5leHBvcnQgZnVuY3Rpb24gcmVjZWl2ZVRyYWNlKHRyYWNlKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogUkVDRUlWRV9UUkFDRSxcbiAgICB0cmFjZVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBSRUNFSVZFX0NBTEwgPSBcIlJFQ0VJVkVfQ0FMTFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHJlY2VpdmVDYWxsKHthZGRyZXNzLCBiaW5hcnl9KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogUkVDRUlWRV9DQUxMLFxuICAgIGFkZHJlc3MsIGJpbmFyeVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBFUlJPUl9XRUIzID0gXCJFUlJPUl9XRUIzXCI7XG5leHBvcnQgZnVuY3Rpb24gZXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBFUlJPUl9XRUIzLFxuICAgIGVycm9yXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3dlYjMvYWN0aW9ucy9pbmRleC5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcblxuaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcblxuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOndlYjM6YWRhcHRlclwiKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViM0FkYXB0ZXIge1xuICBjb25zdHJ1Y3Rvcihwcm92aWRlcikge1xuICAgIHRoaXMud2ViMyA9IG5ldyBXZWIzKHByb3ZpZGVyKTtcbiAgfVxuXG4gIGFzeW5jIGdldFRyYWNlKHR4SGFzaCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSggKGFjY2VwdCwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLndlYjMuY3VycmVudFByb3ZpZGVyLnNlbmRBc3luYyh7XG4gICAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICAgIG1ldGhvZDogXCJkZWJ1Z190cmFjZVRyYW5zYWN0aW9uXCIsXG4gICAgICAgIHBhcmFtczogW3R4SGFzaCwge31dLFxuICAgICAgICBpZDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAgIH0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHJldHVybiByZWplY3QobmV3IEVycm9yKHJlc3VsdC5lcnJvci5tZXNzYWdlKSk7XG4gICAgICAgIGRlYnVnKFwicmVzdWx0OiAlb1wiLCByZXN1bHQpO1xuICAgICAgICBhY2NlcHQocmVzdWx0LnJlc3VsdC5zdHJ1Y3RMb2dzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGFzeW5jIGdldFRyYW5zYWN0aW9uKHR4SGFzaCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSggKGFjY2VwdCwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLndlYjMuZXRoLmdldFRyYW5zYWN0aW9uKHR4SGFzaCwgKGVyciwgdHgpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xuXG4gICAgICAgIHJldHVybiBhY2NlcHQodHgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgYXN5bmMgZ2V0UmVjZWlwdCh0eEhhc2gpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoIChhY2NlcHQsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy53ZWIzLmV0aC5nZXRUcmFuc2FjdGlvblJlY2VpcHQodHhIYXNoLCAoZXJyLCByZWNlaXB0KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKTtcblxuICAgICAgICByZXR1cm4gYWNjZXB0KHJlY2VpcHQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIGdldERlcGxveWVkQ29kZSAtIGdldCB0aGUgZGVwbG95ZWQgY29kZSBmb3IgYW4gYWRkcmVzcyBmcm9tIHRoZSBjbGllbnRcbiAgICogQHBhcmFtICB7U3RyaW5nfSBhZGRyZXNzXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBkZXBsb3llZEJpbmFyeVxuICAgKi9cbiAgYXN5bmMgZ2V0RGVwbG95ZWRDb2RlKGFkZHJlc3MpIHtcbiAgICBkZWJ1ZyhcImdldHRpbmcgZGVwbG95ZWQgY29kZSBmb3IgJXNcIiwgYWRkcmVzcyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChhY2NlcHQsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy53ZWIzLmV0aC5nZXRDb2RlKGFkZHJlc3MsIChlcnIsIGRlcGxveWVkQmluYXJ5KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIGRlYnVnKFwiZXJyb3I6ICVvXCIsIGVycik7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgZGVidWcoXCJnb3QgZGVwbG95ZWQgY29kZSBmb3IgJXNcIiwgYWRkcmVzcyk7XG4gICAgICAgIGFjY2VwdChkZXBsb3llZEJpbmFyeSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvd2ViMy9hZGFwdGVyLmpzIiwiaW1wb3J0IHsgY29tYmluZVJlZHVjZXJzIH0gZnJvbSBcInJlZHV4XCI7XG5cbmltcG9ydCBkYXRhIGZyb20gXCJsaWIvZGF0YS9yZWR1Y2Vyc1wiO1xuaW1wb3J0IGV2bSBmcm9tIFwibGliL2V2bS9yZWR1Y2Vyc1wiO1xuaW1wb3J0IHNvbGlkaXR5IGZyb20gXCJsaWIvc29saWRpdHkvcmVkdWNlcnNcIjtcbmltcG9ydCB0cmFjZSBmcm9tIFwibGliL3RyYWNlL3JlZHVjZXJzXCI7XG5cbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4vYWN0aW9uc1wiO1xuXG5leHBvcnQgY29uc3QgV0FJVElORyA9IFwiV0FJVElOR1wiO1xuZXhwb3J0IGNvbnN0IEFDVElWRSA9IFwiQUNUSVZFXCI7XG5leHBvcnQgY29uc3QgRVJST1IgPSBcIkVSUk9SXCI7XG5leHBvcnQgY29uc3QgRklOSVNIRUQgPSBcIkZJTklTSEVEXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXNzaW9uKHN0YXRlID0gV0FJVElORywgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIGFjdGlvbnMuUkVBRFk6XG4gICAgICByZXR1cm4gQUNUSVZFO1xuXG4gICAgY2FzZSBhY3Rpb25zLkVSUk9SOlxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGFjdGlvbi5lcnJvciB9O1xuXG4gICAgY2FzZSBhY3Rpb25zLkZJTklTSDpcbiAgICAgIHJldHVybiBGSU5JU0hFRDtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cblxuY29uc3QgcmVkdWNlU3RhdGUgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBzZXNzaW9uLFxuICBkYXRhLFxuICBldm0sXG4gIHNvbGlkaXR5LFxuICB0cmFjZSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZWR1Y2VTdGF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc2Vzc2lvbi9yZWR1Y2Vycy5qcyIsImltcG9ydCBkZWJ1Z01vZHVsZSBmcm9tIFwiZGVidWdcIjtcbmNvbnN0IGRlYnVnID0gZGVidWdNb2R1bGUoXCJkZWJ1Z2dlcjpkYXRhOnJlZHVjZXJzXCIpO1xuXG5pbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tIFwicmVkdXhcIjtcblxuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi9hY3Rpb25zXCI7XG5cbmNvbnN0IERFRkFVTFRfU0NPUEVTID0ge1xuICBieUlkOiB7fVxufTtcblxuZnVuY3Rpb24gc2NvcGVzKHN0YXRlID0gREVGQVVMVF9TQ09QRVMsIGFjdGlvbikge1xuICB2YXIgY29udGV4dDtcbiAgdmFyIHNjb3BlO1xuICB2YXIgdmFyaWFibGVzO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIGFjdGlvbnMuU0NPUEU6XG4gICAgICBzY29wZSA9IHN0YXRlLmJ5SWRbYWN0aW9uLmlkXSB8fCB7fTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnlJZDoge1xuICAgICAgICAgIC4uLnN0YXRlLmJ5SWQsXG5cbiAgICAgICAgICBbYWN0aW9uLmlkXToge1xuICAgICAgICAgICAgLi4uc2NvcGUsXG5cbiAgICAgICAgICAgIGlkOiBhY3Rpb24uaWQsXG4gICAgICAgICAgICBzb3VyY2VJZDogYWN0aW9uLnNvdXJjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQ6IGFjdGlvbi5wYXJlbnRJZCxcbiAgICAgICAgICAgIHBvaW50ZXI6IGFjdGlvbi5wb2ludGVyXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICBjYXNlIGFjdGlvbnMuREVDTEFSRTpcbiAgICAgIHNjb3BlID0gc3RhdGUuYnlJZFthY3Rpb24ubm9kZS5zY29wZV0gfHwge307XG4gICAgICB2YXJpYWJsZXMgPSBzY29wZS52YXJpYWJsZXMgfHwgW107XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5SWQ6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5ieUlkLFxuXG4gICAgICAgICAgW2FjdGlvbi5ub2RlLnNjb3BlXToge1xuICAgICAgICAgICAgLi4uc2NvcGUsXG5cbiAgICAgICAgICAgIHZhcmlhYmxlczogW1xuICAgICAgICAgICAgICAuLi52YXJpYWJsZXMsXG5cbiAgICAgICAgICAgICAge25hbWU6IGFjdGlvbi5ub2RlLm5hbWUsIGlkOiBhY3Rpb24ubm9kZS5pZH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cblxuY29uc3QgaW5mbyA9IGNvbWJpbmVSZWR1Y2Vycyh7XG4gIHNjb3Blc1xufSk7XG5cbmNvbnN0IERFRkFVTFRfQVNTSUdOTUVOVFMgPSB7XG4gIGJ5SWQ6IHt9XG59O1xuXG5mdW5jdGlvbiBhc3NpZ25tZW50cyhzdGF0ZSA9IERFRkFVTFRfQVNTSUdOTUVOVFMsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBhY3Rpb25zLkFTU0lHTjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5SWQ6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5ieUlkLFxuXG4gICAgICAgICAgLi4uT2JqZWN0LmFzc2lnbih7fSxcbiAgICAgICAgICAgIC4uLk9iamVjdC5lbnRyaWVzKGFjdGlvbi5hc3NpZ25tZW50cykubWFwKFxuICAgICAgICAgICAgICAoW2lkLCByZWZdKSA9PiAoe1xuICAgICAgICAgICAgICAgIFtpZF06IHtcbiAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLmJ5SWRbaWRdLFxuICAgICAgICAgICAgICAgICAgcmVmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmNvbnN0IHByb2MgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBhc3NpZ25tZW50c1xufSk7XG5cbmNvbnN0IHJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBpbmZvLFxuICBwcm9jXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVkdWNlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZGF0YS9yZWR1Y2Vycy5qcyIsImltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gXCJyZWR1eFwiO1xuXG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuL2FjdGlvbnNcIjtcbmltcG9ydCB7IGtlY2NhazI1NiB9IGZyb20gXCJsaWIvaGVscGVyc1wiO1xuXG5jb25zdCBERUZBVUxUX0NPTlRFWFRTID0ge1xuICBieUNvbnRleHQ6IHt9LFxuICBieUJpbmFyeToge31cbn07XG5cbmZ1bmN0aW9uIGNvbnRleHRzKHN0YXRlID0gREVGQVVMVF9DT05URVhUUywgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAvKlxuICAgICAqIEFkZGluZyBhIG5ldyBjb250ZXh0XG4gICAgICovXG4gICAgY2FzZSBhY3Rpb25zLkFERF9DT05URVhUOlxuICAgICAgbGV0IHsgY29udHJhY3ROYW1lLCBiaW5hcnkgfSA9IGFjdGlvbjtcblxuICAgICAgaWYgKHN0YXRlLmJ5QmluYXJ5W2JpbmFyeV0pIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICBsZXQgY29udGV4dCA9IGtlY2NhazI1NihiaW5hcnkpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBieUNvbnRleHQ6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5ieUNvbnRleHQsXG5cbiAgICAgICAgICBbY29udGV4dF06IHsgY29udGV4dCwgYmluYXJ5LCBjb250cmFjdE5hbWUgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGJ5QmluYXJ5OiB7XG4gICAgICAgICAgLi4uc3RhdGUuYnlCaW5hcnksXG5cbiAgICAgICAgICBbYmluYXJ5XTogeyBjb250ZXh0OiBjb250ZXh0IH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIC8qXG4gICAgICogRGVmYXVsdCBjYXNlXG4gICAgICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG5jb25zdCBERUZBVUxUX0lOU1RBTkNFUyA9IHtcbiAgYnlBZGRyZXNzOiB7fSxcbiAgYnlDb250ZXh0OiB7fVxufVxuXG5mdW5jdGlvbiBpbnN0YW5jZXMoc3RhdGUgPSBERUZBVUxUX0lOU1RBTkNFUywgYWN0aW9uKSB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAvKlxuICAgICAqIEFkZGluZyBhIG5ldyBhZGRyZXNzIGZvciBjb250ZXh0XG4gICAgICovXG4gICAgY2FzZSBhY3Rpb25zLkFERF9JTlNUQU5DRTpcbiAgICAgIGxldCB7IGFkZHJlc3MsIGNvbnRleHQsIGJpbmFyeSB9ID0gYWN0aW9uO1xuXG4gICAgICAvLyBnZXQga25vd24gYWRkcmVzc2VzIGZvciB0aGlzIGNvbnRleHRcbiAgICAgIGxldCBvdGhlckluc3RhbmNlcyA9IHN0YXRlLmJ5Q29udGV4dFtjb250ZXh0XSB8fCBbXTtcbiAgICAgIGxldCBvdGhlckFkZHJlc3NlcyA9IG90aGVySW5zdGFuY2VzLm1hcCgoe2FkZHJlc3N9KSA9PiBhZGRyZXNzKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnlBZGRyZXNzOiB7XG4gICAgICAgICAgLi4uc3RhdGUuYnlBZGRyZXNzLFxuXG4gICAgICAgICAgW2FkZHJlc3NdOiB7IGNvbnRleHQsIGJpbmFyeSB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYnlDb250ZXh0OiB7XG4gICAgICAgICAgLi4uc3RhdGUuYnlDb250ZXh0LFxuXG4gICAgICAgICAgLy8gcmVjb25zdHJ1Y3QgY29udGV4dCBpbnN0YW5jZXMgdG8gaW5jbHVkZSBuZXcgYWRkcmVzc1xuICAgICAgICAgIFtjb250ZXh0XTogQXJyYXkuZnJvbShuZXcgU2V0KG90aGVyQWRkcmVzc2VzKS5hZGQoYWRkcmVzcykpXG4gICAgICAgICAgICAubWFwKChhZGRyZXNzKSA9PiAoe2FkZHJlc3N9KSlcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIC8qXG4gICAgICogRGVmYXVsdCBjYXNlXG4gICAgICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG59XG5cbmNvbnN0IGluZm8gPSBjb21iaW5lUmVkdWNlcnMoe1xuICBjb250ZXh0cyxcbiAgaW5zdGFuY2VzXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGxzdGFjayhzdGF0ZSA9IFtdLCBhY3Rpb24pIHtcbiAgc3dpdGNoKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBhY3Rpb25zLkNBTEw6XG4gICAgICBsZXQgYWRkcmVzcyA9IGFjdGlvbi5hZGRyZXNzO1xuICAgICAgcmV0dXJuIHN0YXRlLmNvbmNhdChbIHthZGRyZXNzfSBdKTtcblxuICAgIGNhc2UgYWN0aW9ucy5DUkVBVEU6XG4gICAgICBjb25zdCBiaW5hcnkgPSBhY3Rpb24uYmluYXJ5O1xuICAgICAgcmV0dXJuIHN0YXRlLmNvbmNhdChbIHtiaW5hcnl9IF0pO1xuXG4gICAgY2FzZSBhY3Rpb25zLlJFVFVSTjpcbiAgICAgIHJldHVybiBzdGF0ZS5zbGljZSgwLCAtMSk7IC8vIHBvcFxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfTtcbn1cblxuY29uc3QgcHJvYyA9IGNvbWJpbmVSZWR1Y2Vycyh7XG4gIGNhbGxzdGFja1xufSk7XG5cbmNvbnN0IHJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBpbmZvLFxuICBwcm9jXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVkdWNlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvZXZtL3JlZHVjZXJzLmpzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2FycmF5L2Zyb21cIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvYXJyYXkvZnJvbVwiXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tIFwicmVkdXhcIjtcblxuaW1wb3J0IHsga2VjY2FrMjU2IH0gZnJvbSBcImxpYi9oZWxwZXJzXCI7XG5cbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4vYWN0aW9uc1wiO1xuXG5jb25zdCBERUZBVUxUX1NPVVJDRVMgPSB7XG4gIGJ5SWQ6IHt9XG59O1xuXG5mdW5jdGlvbiBzb3VyY2VzKHN0YXRlID0gREVGQVVMVF9TT1VSQ0VTLCBhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIC8qXG4gICAgICogQWRkaW5nIGEgbmV3IHNvdXJjZVxuICAgICAqL1xuICAgIGNhc2UgYWN0aW9ucy5BRERfU09VUkNFOlxuICAgICAgbGV0IHsgYXN0LCBzb3VyY2UsIHNvdXJjZVBhdGggfSA9IGFjdGlvbjtcblxuICAgICAgbGV0IGlkID0gT2JqZWN0LmtleXMoc3RhdGUuYnlJZCkubGVuZ3RoO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBieUlkOiB7XG4gICAgICAgICAgLi4uc3RhdGUuYnlJZCxcblxuICAgICAgICAgIFtpZF06IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgYXN0LFxuICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgc291cmNlUGF0aFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgLypcbiAgICAgKiBEZWZhdWx0IGNhc2VcbiAgICAgKi9cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG5cblxuY29uc3QgREVGQVVMVF9TT1VSQ0VNQVBTID0ge1xuICBieUNvbnRleHQ6IHt9XG59O1xuXG5mdW5jdGlvbiBzb3VyY2VNYXBzKHN0YXRlID0gREVGQVVMVF9TT1VSQ0VNQVBTLCBhY3Rpb24pIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIC8qXG4gICAgICogQWRkaW5nIGEgbmV3IHNvdXJjZU1hcFxuICAgICAqL1xuICAgIGNhc2UgYWN0aW9ucy5BRERfU09VUkNFTUFQOlxuICAgICAgbGV0IHsgYmluYXJ5LCBzb3VyY2VNYXAgfSA9IGFjdGlvbjtcbiAgICAgIGxldCBjb250ZXh0ID0ga2VjY2FrMjU2KGJpbmFyeSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5Q29udGV4dDoge1xuICAgICAgICAgIC4uLnN0YXRlLmJ5Q29udGV4dCxcblxuICAgICAgICAgIFtjb250ZXh0XToge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHNvdXJjZU1hcFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIC8qXG4gICAgICogRGVmYXVsdCBDYXNlXG4gICAgICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG5jb25zdCBpbmZvID0gY29tYmluZVJlZHVjZXJzKHtcbiAgc291cmNlcyxcbiAgc291cmNlTWFwc1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jdGlvbkRlcHRoKHN0YXRlID0gMSwgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24udHlwZSA9PT0gYWN0aW9ucy5KVU1QKSB7XG4gICAgY29uc3QgZGVsdGEgPSBzcGVsdW5rKGFjdGlvbi5qdW1wRGlyZWN0aW9uKVxuICAgIHJldHVybiBzdGF0ZSArIGRlbHRhO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzcGVsdW5rKGp1bXApIHtcbiAgaWYgKGp1bXAgPT0gXCJpXCIpIHtcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIGlmIChqdW1wID09IFwib1wiKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbmNvbnN0IHByb2MgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBmdW5jdGlvbkRlcHRoXG59KTtcblxuY29uc3QgcmVkdWNlciA9IGNvbWJpbmVSZWR1Y2Vycyh7XG4gIGluZm8sXG4gIHByb2Ncbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZWR1Y2VyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxpYi9zb2xpZGl0eS9yZWR1Y2Vycy5qcyIsImltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gXCJyZWR1eFwiO1xuXG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gXCIuL2FjdGlvbnNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4KHN0YXRlID0gMCwgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24udHlwZSA9PSBhY3Rpb25zLlRPQ0sgfHwgYWN0aW9uLnR5cGUgPT0gYWN0aW9ucy5FTkRfT0ZfVFJBQ0UpIHtcbiAgICByZXR1cm4gc3RhdGUgKyAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RlcHMoc3RhdGUgPSBudWxsLCBhY3Rpb24pIHtcbiAgaWYgKGFjdGlvbi50eXBlID09IGFjdGlvbnMuU0FWRV9TVEVQUykge1xuICAgIHJldHVybiBhY3Rpb24uc3RlcHM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG5cbmNvbnN0IGluZm8gPSBjb21iaW5lUmVkdWNlcnMoe1xuICBzdGVwc1xufSlcblxuY29uc3QgcHJvYyA9IGNvbWJpbmVSZWR1Y2Vycyh7XG4gIGluZGV4XG59KVxuXG5jb25zdCByZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHtcbiAgaW5mbyxcbiAgcHJvY1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJlZHVjZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbGliL3RyYWNlL3JlZHVjZXJzLmpzIiwiaW1wb3J0IGRlYnVnTW9kdWxlIGZyb20gXCJkZWJ1Z1wiO1xuY29uc3QgZGVidWcgPSBkZWJ1Z01vZHVsZShcImRlYnVnZ2VyOnNlc3Npb246c2VsZWN0b3JzXCIpO1xuXG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvclRyZWUsIGNyZWF0ZUxlYWYgfSBmcm9tIFwicmVzZWxlY3QtdHJlZVwiO1xuXG5pbXBvcnQgZXZtIGZyb20gXCJsaWIvZXZtL3NlbGVjdG9yc1wiO1xuaW1wb3J0IHNvbGlkaXR5IGZyb20gXCJsaWIvc29saWRpdHkvc2VsZWN0b3JzXCI7XG5cbmNvbnN0IHNlc3Npb24gPSBjcmVhdGVTZWxlY3RvclRyZWUoe1xuICAvKipcbiAgICogc2Vzc2lvbi5pbmZvXG4gICAqL1xuICBpbmZvOiB7XG5cbiAgICAvKipcbiAgICAgKiBzZXNzaW9uLmluZm8uYWZmZWN0ZWRJbnN0YW5jZXNcbiAgICAgKi9cbiAgICBhZmZlY3RlZEluc3RhbmNlczogY3JlYXRlTGVhZihcbiAgICAgIFtldm0uaW5mby5pbnN0YW5jZXMsIGV2bS5pbmZvLmNvbnRleHRzLCBzb2xpZGl0eS5pbmZvLnNvdXJjZXMsIHNvbGlkaXR5LmluZm8uc291cmNlTWFwc10sXG5cbiAgICAgIChpbnN0YW5jZXMsIGNvbnRleHRzLCBzb3VyY2VzLCBzb3VyY2VNYXBzKSA9PiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhpbnN0YW5jZXMpLm1hcChcbiAgICAgICAgICAoW2FkZHJlc3MsIHtjb250ZXh0fV0pID0+IHtcbiAgICAgICAgICAgIGxldCB7IGNvbnRyYWN0TmFtZSwgYmluYXJ5IH0gPSBjb250ZXh0c1tjb250ZXh0XTtcbiAgICAgICAgICAgIGxldCB7IHNvdXJjZU1hcCB9ID0gc291cmNlTWFwc1tjb250ZXh0XTtcblxuICAgICAgICAgICAgbGV0IHsgc291cmNlIH0gPSBzb3VyY2VNYXAgP1xuICAgICAgICAgICAgICAvLyBsb29rIGZvciBzb3VyY2UgSUQgYmV0d2VlbiBzZWNvbmQgYW5kIHRoaXJkIGNvbG9ucyAoSEFDSylcbiAgICAgICAgICAgICAgc291cmNlc1tzb3VyY2VNYXAubWF0Y2goL15bXjpdKzpbXjpdKzooW146XSspOi8pWzFdXSA6XG4gICAgICAgICAgICAgIHt9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBbYWRkcmVzc106IHtcbiAgICAgICAgICAgICAgICBjb250cmFjdE5hbWUsIHNvdXJjZSwgYmluYXJ5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgc2Vzc2lvbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWIvc2Vzc2lvbi9zZWxlY3RvcnMvaW5kZXguanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDN0RBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0VBO0FBWUE7QUFDQTtBQWZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7Ozs7QUNoQkE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFMQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUlBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBaERBO0FBQ0E7QUFtREE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkNBO0FBc0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQTNCQTtBQWRBO0FBQ0E7QUE0Q0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFHQTtBQUFBO0FBQ0E7QUFFQTs7O0FBR0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFGQTtBQUlBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQVFBO0FBQ0E7QUFBQTtBQURBO0FBQ0E7QUFJQTs7O0FBR0E7QUE3REE7QUFDQTtBQStEQTs7O0FBR0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBUUE7QUFDQTtBQUFBO0FBREE7QUFDQTtBQUlBO0FBcEJBO0FBNUhBO0FBQ0E7QUFtSkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNVFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7OztBQVBBO0FBQ0E7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBSEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBVEE7QUFDQTtBQVdBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBR0E7QUFBQTtBQUNBO0FBRUE7OztBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7OztBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUExTEE7QUF4QkE7QUFDQTtBQXNOQTs7Ozs7O0FDL09BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNZQTtBQWtCQTtBQVVBO0FBU0E7QUE4RUE7QUFzQkE7QUFvQkE7QUFJQTtBQUlBO0FBcUJBO0FBZUE7QUFhQTtBQTBDQTtBQXdCQTtBQUNBO0FBclNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBOzs7OztBQUpBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNwVEE7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBUkE7QUFDQTtBQVNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFKQTtBQUNBO0FBTUE7OztBQUdBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7OztBQUtBO0FBR0E7QUFBQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUF0Q0E7QUFkQTtBQUNBO0FBMkRBOzs7Ozs7Ozs7Ozs7QUN6RUE7QUFRQTtBQVFBO0FBS0E7QUFLQTtBQUtBO0FBaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUF2Q0E7QUFDQTtBQTJDQTs7Ozs7O0FDOUNBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7O0FDQ0E7QUFRQTtBQU9BO0FBUUE7QUFPQTtBQS9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7O0FDcENBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7Ozs7Ozs7QUNDQTtBQVFBO0FBS0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQU1BO0FBeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUM3Q0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNnQkE7QUFJQTtBQWlGQTtBQUNBO0FBdEdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFJQTtBQUlBO0FBNkVBO0FBQ0E7QUFyR0E7QUFDQTtBQWNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFSQTtBQUFBO0FBQ0E7QUFEQTtBQVNBO0FBVEE7QUFBQTtBQUNBO0FBREE7QUFXQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWdCQTtBQUNBO0FBakJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFvQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUEvQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFvREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRUE7QUFDQTtBQS9EQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUE0RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTs7Ozs7Ozs7Ozs7O0FDOUdBO0FBUUE7QUFRQTtBQWpCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBYkE7QUFDQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQURBO0FBQ0E7QUFJQTs7O0FBR0E7QUFHQTtBQUVBO0FBQUE7QUFGQTtBQUNBO0FBS0E7OztBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUpBO0FBREE7QUE5QkE7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBSkE7QUFBQTtBQUZBO0FBUkE7QUFDQTtBQXVCQTs7Ozs7QUFLQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBOUNBO0FBQ0E7QUFpREE7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBTEE7QUFDQTtBQU9BOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFBQTtBQUxBO0FBQ0E7QUFPQTs7O0FBR0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUFBO0FBTkE7QUFDQTtBQVNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFNQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFTQTs7Ozs7QUFLQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFUQTtBQUNBO0FBWUE7QUFPQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUZBO0FBQ0E7QUFPQTtBQTVGQTtBQXZCQTtBQUNBO0FBc0hBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBTEE7QUEzTUE7QUFDQTtBQW1OQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hQQTtBQWlDQTtBQUlBO0FBU0E7QUFDQTtBQXZFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBO0FBY0E7QUFNQTtBQTJCQTtBQUlBO0FBU0E7QUFDQTtBQXRFQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFSQTtBQUFBO0FBQ0E7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBZUE7QUFDQTtBQWpCQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQUNBO0FBcEJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFMQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7Ozs7Ozs7Ozs7OztBQzVFQTtBQVFBO0FBU0E7QUFsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7Ozs7Ozs7O0FDdEJBO0FBUUE7QUFRQTtBQVFBO0FBUUE7QUFqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7Ozs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNIQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTtBQUNBOzs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBNEJBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTlCQTtBQUFBOzs7Ozs7QUFDQTtBQUNBO0FBSUE7OztBQU1BO0FBQ0E7Ozs7Ozs7Ozs7O0FBSUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7QUEzRUE7Ozs7OztBQ3pCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7OztBQUVBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBZEE7QUFDQTtBQWNBOzs7QUFHQTtBQUNBOzs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBQUE7OztBQUdBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBNkRBO0FBQ0E7QUFDQTs7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUF0REE7QUFDQTtBQUNBOzs7QUFNQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBM0RBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQWxDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBekZBOzs7Ozs7QUNuQkE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1NBO0FBY0E7QUF5QkE7QUFDQTtBQWpEQTtBQUNBOzs7QUFFQTtBQUNBOzs7OztBQUhBO0FBQ0E7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFNQTtBQUFBO0FBTkE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7QUNwRUE7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNPQTtBQXlDQTtBQUNBO0FBbERBO0FBQ0E7OztBQUdBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQU5BO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFJQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQy9FQTs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNpQkE7QUFDQTtBQWxCQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7Ozs7O0FBQ0E7QUFxREE7QUFPQTtBQXFCQTtBQVVBO0FBTUE7QUFJQTtBQUlBO0FBQ0E7QUExSEE7QUFDQTtBQWVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBTEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFSQTtBQUNBO0FBREE7QUFDQTtBQVVBO0FBWEE7QUFDQTtBQURBO0FBQ0E7QUFhQTtBQUNBO0FBZkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWdCQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQUNBO0FBREE7QUFxQkE7QUFDQTtBQXRCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBc0JBO0FBdkJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBMkJBO0FBQ0E7QUE1QkE7QUFDQTtBQURBO0FBQ0E7QUE4QkE7QUFDQTtBQWhDQTtBQUNBO0FBREE7QUFDQTtBQWtDQTtBQUNBO0FBcENBO0FBQ0E7QUFEQTtBQUNBO0FBc0NBO0FBQ0E7QUF4Q0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQTJDQTtBQTVDQTtBQUFBO0FBOENBO0FBQUE7QUFDQTtBQS9DQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQURBO0FBY0E7QUFkQTtBQUFBO0FBaUJBO0FBQUE7QUFDQTtBQWxCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBb0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1REE7QUFnQkE7QUFDQTtBQS9FQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBRUE7QUFrQkE7QUFvQkE7QUFNQTtBQUlBO0FBZ0JBO0FBQ0E7QUE5RUE7QUFDQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBTUE7QUFBQTtBQU5BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQVVBO0FBQUE7QUFWQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBUkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWNBO0FBZEE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFtQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUEE7QUFHQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzRUE7QUFhQTtBQWtDQTtBQThFQTtBQWtIQTtBQUNBO0FBMVBBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7Ozs7O0FBUEE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEJBO0FBMEJBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFIQTtBQUhBO0FBQ0E7QUFXQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQXJFQTtBQXdFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQXRHQTtBQXdHQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7Ozs7Ozs7Ozs7OztBQ3ZQQTtBQVNBO0FBK0JBO0FBQ0E7QUF6REE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBOzs7OztBQUxBO0FBQ0E7QUFNQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcERBO0FBcUNBO0FBQ0E7QUFuREE7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7Ozs7O0FBSkE7QUFDQTtBQUtBOzs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxRkE7QUFRQTtBQVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNlQTtBQUNBO0FBN0JBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFnQkE7QUFxQkE7QUFZQTtBQWtDQTtBQTBDQTtBQXdCQTtBQStCQTtBQUNBO0FBaE1BO0FBQ0E7QUFXQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBTEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUZBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7Ozs7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTs7Ozs7OztBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFVQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXFCQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQWJBO0FBQUE7QUFDQTtBQURBO0FBY0E7QUFDQTtBQWZBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFxQkE7QUFyQkE7QUFBQTtBQUNBO0FBREE7QUFzQkE7QUFDQTtBQXZCQTtBQUFBO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBb0NBOzs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQVJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTs7Ozs7O0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQVRBO0FBQUE7QUFDQTtBQURBO0FBVUE7QUFDQTtBQVhBO0FBQUE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBeUJBOzs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQVRBO0FBQUE7QUFDQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDaE1BO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQVBBO0FBQ0E7QUFPQTs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFkQTtBQW5CQTtBQUxBO0FBQ0E7QUEwQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakRBO0FBSUE7QUFvQkE7QUFDQTtBQXBDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUlBO0FBSUE7QUFnQkE7QUFDQTtBQW5DQTtBQUNBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQU5BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBUUE7QUFSQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFlQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZCQTtBQVdBO0FBU0E7QUFRQTtBQXdCQTtBQUNBO0FBckVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU1BO0FBV0E7QUFTQTtBQVFBO0FBd0JBO0FBQ0E7QUFwRUE7QUFDQTtBQVNBOzs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7Ozs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFOQTtBQUFBO0FBQ0E7QUFEQTtBQU9BO0FBUEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBWkE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQWJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFpQkE7QUFsQkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJBO0FBdUJBO0FBOEJBO0FBQ0E7QUF6R0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFDQTtBQWlDQTtBQVFBO0FBdUJBO0FBb0JBO0FBVUE7QUFDQTtBQXhHQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUpBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFOQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBVUE7QUFYQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBY0E7QUFDQTtBQWZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBb0JBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFnQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBTEE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBWkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBaUJBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFuQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFMQTtBQUFBO0FBT0E7QUFBQTtBQUNBO0FBUkE7QUFVQTtBQVZBO0FBQUE7QUFZQTtBQUFBO0FBQ0E7QUFiQTtBQVdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFoQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFtQkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBTkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7Ozs7Ozs7Ozs7OztBQ2hIQTtBQVFBO0FBUUE7QUFRQTtBQVFBO0FBUUE7QUFRQTtBQWpEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdERBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7O0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOzs7Ozs7QUFLQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeERBOzs7Ozs7Ozs7Ozs7O0FDUUE7QUFDQTtBQWZBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0Q0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBOzs7OztBQUxBO0FBQ0E7QUFLQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFEQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQU5BO0FBREE7QUFDQTtBQWVBO0FBQ0E7QUF4Q0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFBQTtBQU5BO0FBQ0E7QUFnQkE7QUFDQTtBQXBCQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVEE7QUFDQTtBQTlGQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVBBO0FBQ0E7QUFhQTs7O0FBR0E7QUFDQTtBQS9CQTtBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBQUE7QUFaQTtBQUNBO0FBZUE7OztBQUdBO0FBQ0E7QUEvQkE7QUFrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTs7Ozs7O0FDeEhBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDK0VBO0FBQ0E7QUFoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFRQTs7O0FBYkE7QUFpQkE7QUExQkE7QUE0QkE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUZBO0FBSkE7QUFDQTtBQVVBOzs7QUFHQTtBQUNBO0FBdkJBO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTs7Ozs7Ozs7Ozs7O0FDdkdBO0FBUUE7QUFDQTtBQWJBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBTkE7QUFDQTtBQU1BO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUVBO0FBREE7QUFJQTtBQWhCQTtBQVJBO0FBSkE7QUFDQTtBQWtDQTs7OztBIiwic291cmNlUm9vdCI6IiJ9